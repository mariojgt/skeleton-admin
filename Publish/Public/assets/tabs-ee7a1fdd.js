import{o as p,A as E,T as K,I as M,s as J,N as q,u as N,a as h}from"./keyboard-8f6c38ad.js";import{s as Q,f as U,O as k,T as B,t as V,i as X,P as F,N as P}from"./micro-task-39390087.js";import{x as $,a as T,h as C,A as m,aW as W,p as L,bB as Y,bC as Z,F as _,aT as z,av as G}from"./preset-db35be31.js";let ee=$({props:{onFocus:{type:Function,required:!0}},setup(e){let i=T(!0);return()=>i.value?C(U,{as:"button",type:"button",features:Q.Focusable,onFocus(c){c.preventDefault();let d,f=50;function u(){var l;if(f--<=0){d&&cancelAnimationFrame(d);return}if((l=e.onFocus)!=null&&l.call(e)){i.value=!1,cancelAnimationFrame(d);return}d=requestAnimationFrame(u)}d=requestAnimationFrame(u)}}):null}});var te=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(te||{}),ae=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(ae||{});let H=Symbol("TabsContext");function D(e){let i=G(H,null);if(i===null){let c=new Error(`<${e} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(c,D),c}return i}let R=Symbol("TabsSSRContext"),ue=$({name:"TabGroup",emits:{change:e=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:i,attrs:c,emit:d}){var f;let u=T((f=e.selectedIndex)!=null?f:e.defaultIndex),l=T([]),r=T([]),y=m(()=>e.selectedIndex!==null),S=m(()=>y.value?e.selectedIndex:u.value);function g(a){var n;let o=k(s.tabs.value,p),t=k(s.panels.value,p),v=o.filter(x=>{var I;return!((I=p(x))!=null&&I.hasAttribute("disabled"))});if(a<0||a>o.length-1){let x=N(u.value===null?0:Math.sign(a-u.value),{[-1]:()=>1,0:()=>N(Math.sign(a),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),I=N(x,{0:()=>o.indexOf(v[0]),1:()=>o.indexOf(v[v.length-1])});I!==-1&&(u.value=I),s.tabs.value=o,s.panels.value=t}else{let x=o.slice(0,a),I=[...o.slice(a),...x].find(j=>v.includes(j));if(!I)return;let A=(n=o.indexOf(I))!=null?n:s.selectedIndex.value;A===-1&&(A=s.selectedIndex.value),u.value=A,s.tabs.value=o,s.panels.value=t}}let s={selectedIndex:m(()=>{var a,n;return(n=(a=u.value)!=null?a:e.defaultIndex)!=null?n:null}),orientation:m(()=>e.vertical?"vertical":"horizontal"),activation:m(()=>e.manual?"manual":"auto"),tabs:l,panels:r,setSelectedIndex(a){S.value!==a&&d("change",a),y.value||g(a)},registerTab(a){var n;if(l.value.includes(a))return;let o=l.value[u.value];l.value.push(a),l.value=k(l.value,p);let t=(n=l.value.indexOf(o))!=null?n:u.value;t!==-1&&(u.value=t)},unregisterTab(a){let n=l.value.indexOf(a);n!==-1&&l.value.splice(n,1)},registerPanel(a){r.value.includes(a)||(r.value.push(a),r.value=k(r.value,p))},unregisterPanel(a){let n=r.value.indexOf(a);n!==-1&&r.value.splice(n,1)}};W(H,s);let b=T({tabs:[],panels:[]}),O=T(!1);L(()=>{O.value=!0}),W(R,m(()=>O.value?null:b.value));let w=m(()=>e.selectedIndex);return L(()=>{Y([w],()=>{var a;return g((a=e.selectedIndex)!=null?a:e.defaultIndex)},{immediate:!0})}),Z(()=>{if(!y.value||S.value==null||s.tabs.value.length<=0)return;let a=k(s.tabs.value,p);a.some((n,o)=>p(s.tabs.value[o])!==p(n))&&s.setSelectedIndex(a.findIndex(n=>p(n)===p(s.tabs.value[S.value])))}),()=>{let a={selectedIndex:u.value};return C(_,[l.value.length<=0&&C(ee,{onFocus:()=>{for(let n of l.value){let o=p(n);if((o==null?void 0:o.tabIndex)===0)return o.focus(),!0}return!1}}),E({theirProps:{...c,...K(e,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:a,slots:i,attrs:c,name:"TabGroup"})])}}}),se=$({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:i,slots:c}){let d=D("TabList");return()=>{let f={selectedIndex:d.selectedIndex.value},u={role:"tablist","aria-orientation":d.orientation.value};return E({ourProps:u,theirProps:e,slot:f,attrs:i,slots:c,name:"TabList"})}}}),oe=$({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{attrs:i,slots:c,expose:d}){var f;let u=(f=e.id)!=null?f:`headlessui-tabs-tab-${M()}`,l=D("Tab"),r=T(null);d({el:r,$el:r}),L(()=>l.registerTab(r)),z(()=>l.unregisterTab(r));let y=G(R),S=m(()=>{if(y.value){let t=y.value.tabs.indexOf(u);return t===-1?y.value.tabs.push(u)-1:t}return-1}),g=m(()=>{let t=l.tabs.value.indexOf(r);return t===-1?S.value:t}),s=m(()=>g.value===l.selectedIndex.value);function b(t){var v;let x=t();if(x===B.Success&&l.activation.value==="auto"){let I=(v=X(r))==null?void 0:v.activeElement,A=l.tabs.value.findIndex(j=>p(j)===I);A!==-1&&l.setSelectedIndex(A)}return x}function O(t){let v=l.tabs.value.map(x=>p(x)).filter(Boolean);if(t.key===h.Space||t.key===h.Enter){t.preventDefault(),t.stopPropagation(),l.setSelectedIndex(g.value);return}switch(t.key){case h.Home:case h.PageUp:return t.preventDefault(),t.stopPropagation(),b(()=>F(v,P.First));case h.End:case h.PageDown:return t.preventDefault(),t.stopPropagation(),b(()=>F(v,P.Last))}if(b(()=>N(l.orientation.value,{vertical(){return t.key===h.ArrowUp?F(v,P.Previous|P.WrapAround):t.key===h.ArrowDown?F(v,P.Next|P.WrapAround):B.Error},horizontal(){return t.key===h.ArrowLeft?F(v,P.Previous|P.WrapAround):t.key===h.ArrowRight?F(v,P.Next|P.WrapAround):B.Error}}))===B.Success)return t.preventDefault()}let w=T(!1);function a(){var t;w.value||(w.value=!0,!e.disabled&&((t=p(r))==null||t.focus({preventScroll:!0}),l.setSelectedIndex(g.value),V(()=>{w.value=!1})))}function n(t){t.preventDefault()}let o=J(m(()=>({as:e.as,type:i.type})),r);return()=>{var t;let v={selected:s.value},{...x}=e,I={ref:r,onKeydown:O,onMousedown:n,onClick:a,id:u,role:"tab",type:o.value,"aria-controls":(t=p(l.panels.value[g.value]))==null?void 0:t.id,"aria-selected":s.value,tabIndex:s.value?0:-1,disabled:e.disabled?!0:void 0};return E({ourProps:I,theirProps:x,slot:v,attrs:i,slots:c,name:"Tab"})}}}),ie=$({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:i,attrs:c}){let d=D("TabPanels");return()=>{let f={selectedIndex:d.selectedIndex.value};return E({theirProps:e,ourProps:{},slot:f,attrs:c,slots:i,name:"TabPanels"})}}}),de=$({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(e,{attrs:i,slots:c,expose:d}){var f;let u=(f=e.id)!=null?f:`headlessui-tabs-panel-${M()}`,l=D("TabPanel"),r=T(null);d({el:r,$el:r}),L(()=>l.registerPanel(r)),z(()=>l.unregisterPanel(r));let y=G(R),S=m(()=>{if(y.value){let b=y.value.panels.indexOf(u);return b===-1?y.value.panels.push(u)-1:b}return-1}),g=m(()=>{let b=l.panels.value.indexOf(r);return b===-1?S.value:b}),s=m(()=>g.value===l.selectedIndex.value);return()=>{var b;let O={selected:s.value},{tabIndex:w,...a}=e,n={ref:r,id:u,role:"tabpanel","aria-labelledby":(b=p(l.tabs.value[g.value]))==null?void 0:b.id,tabIndex:s.value?w:-1};return!s.value&&e.unmount&&!e.static?C(U,{as:"span","aria-hidden":!0,...n}):E({ourProps:n,theirProps:a,slot:O,attrs:i,slots:c,features:q.Static|q.RenderStrategy,visible:s.value,name:"TabPanel"})}}});export{ie as I,se as m,ue as p,oe as x,de as y};
