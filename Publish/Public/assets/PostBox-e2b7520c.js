import{v as le,bZ as re,a as y,m as ae,o as n,g as p,d as t,e as a,u as i,q as d,t as P,D as _,E as V,s as E,x as Q,f as B,H as ie,F as A,y as I,k as D,bL as U,b as $,I as H,w as G,$ as X,G as W,l as ne,i as ue,X as de}from"./preset-271ebd79.js";import{a as z}from"./axios-846b6323.js";import{M as ce,S as pe}from"./Markdown-e119eeb3.js";import{T as fe}from"./triangle-alert-f7b3f1cd.js";import{P as me,d as be,e as xe,B as q,f as T,g as ve,L as ge}from"./App.vue_vue_type_script_setup_true_lang-5d5520e6.js";import{X as J}from"./x-6b2a35b0.js";import{F as ye}from"./folder-open-6e5a743d.js";import{M as he}from"./SearchSidebar-b36e8605.js";import{E as we}from"./eye-2b2a8e5b.js";import{F as R,H as ke}from"./hash-8bfda2bb.js";import{C as Ce}from"./chevron-down-bf468928.js";import{I as _e,C as Te}from"./trash-34cdc7a5.js";import{T as Ee}from"./trash-2-96af71dd.js";import{D as Se,B as Le,I as Pe,a as je,Q as Be}from"./underline-3e5b1b70.js";import{C as M}from"./code-983bd773.js";import"./purify.es-851ec8c9.js";/* empty css                                                                       */const Me={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[70]"},De={class:"bg-dark-blue-100 p-6 rounded-xl border border-gray-700 w-full max-w-md"},$e={class:"text-lg font-semibold text-white mb-4 flex items-center gap-2"},Fe={class:"text-gray-300 text-sm mb-4"},Oe={class:"text-white font-medium"},Ne={class:"flex justify-end gap-3"},Ve=["disabled"],Ae={class:"w-full max-w-3xl bg-dark-blue-100 rounded-xl shadow-xl border border-gray-700/50"},Ie={class:"flex items-center justify-between p-4 border-b border-gray-700/50"},Re={class:"flex items-center gap-2"},Ue={class:"text-lg font-semibold text-white"},He={class:"p-4 space-y-4"},ze={class:"space-y-2"},qe={for:"commentTitle",class:"flex items-center gap-2 text-sm font-medium text-gray-300"},Je={key:0,class:"space-y-2"},Qe={for:"channel",class:"flex items-center gap-2 text-sm font-medium text-gray-300"},Ge=["value"],Xe={class:"space-y-2"},We={class:"flex items-center gap-2 text-sm font-medium text-gray-300"},Ye={class:"flex border-b border-gray-700/50"},Ze={class:"flex items-center gap-2"},Ke={class:"flex items-center gap-2"},et={class:"space-y-2"},tt={class:"flex flex-wrap gap-1 p-2 bg-dark-blue-200 rounded-t-lg border border-gray-700"},st=["onClick","title"],ot={class:"relative"},lt={key:0,class:"absolute left-0 top-full mt-1 w-48 py-1 bg-dark-blue-100 rounded-lg border border-gray-700 shadow-xl z-[60]"},rt=["onClick"],at={class:"min-h-[16rem] p-4 bg-dark-blue-200 rounded-lg border border-gray-700"},it={key:0},nt={key:1,class:"text-gray-500 italic"},ut={class:"flex items-center gap-2 text-xs text-gray-500"},dt={class:"flex flex-col sm:flex-row justify-between items-center gap-4 p-4 border-t border-gray-700/50 bg-dark-blue-200/50"},ct={class:"flex items-center text-gray-400 text-sm"},pt={class:"flex gap-2 w-full sm:w-auto"},ft={type:"submit",class:"flex items-center justify-center gap-2 px-6 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 text-sm font-medium transition-colors flex-1 sm:flex-initial"},mt=le({__name:"Post",props:{commentClass:{type:String,default:"w-full rounded-lg"},categories:{type:Array,default:()=>[]},topitEdit:{type:Object,default:()=>({})}},emits:["fresh-comments","close"],setup(j,{emit:F}){const h={mounted:(o,e)=>{o._clickOutside=r=>{o===r.target||o.contains(r.target)||e.value()},document.body.addEventListener("click",o._clickOutside)},unmounted:o=>{document.body.removeEventListener("click",o._clickOutside)}},x=re(),v=y(!1),S=y(null),w=y(!1),k=y(""),m=y(!1),l=y(""),g=y(""),L=y(""),Y=[{label:"JavaScript",value:"javascript",icon:q},{label:"PHP",value:"php",icon:R},{label:"Python",value:"python",icon:T},{label:"C++",value:"cpp",icon:T},{label:"Java",value:"java",icon:T},{label:"Ruby",value:"ruby",icon:T},{label:"SQL",value:"sql",icon:Se},{label:"HTML",value:"html",icon:M},{label:"CSS",value:"css",icon:M},{label:"TypeScript",value:"typescript",icon:q},{label:"Go",value:"go",icon:T},{label:"Rust",value:"rust",icon:T},{label:"Shell",value:"bash",icon:T},{label:"JSON",value:"json",icon:ve},{label:"XML",value:"xml",icon:M},{label:"YAML",value:"yaml",icon:R}],Z=[{label:"Bold",icon:Le,prefix:"**",suffix:"**"},{label:"Italic",icon:Pe,prefix:"*",suffix:"*"},{label:"Code",icon:M,prefix:"`",suffix:"`"},{label:"Heading",icon:ke,prefix:"# ",suffix:""},{label:"List",icon:je,prefix:"- ",suffix:""},{label:"Quote",icon:Be,prefix:"> ",suffix:""},{label:"Link",icon:ge,prefix:"[",suffix:"](url)"}],b=j,O=F,K=o=>{const e=S.value;if(!e)return;const r=e.selectionStart,u=e.selectionEnd,f=l.value.substring(r,u),c=["```"+o,f||"Your code here","```",""].join(`
`),s=l.value.substring(0,r),C=l.value.substring(u);l.value=s+c+C,setTimeout(()=>{m.value=!1,e.focus()},100)},ee=o=>{const e=S.value;if(!e)return;const r=e.selectionStart,u=e.selectionEnd,f=l.value.substring(r,u);let c;if(f){const s=l.value.substring(0,r),C=l.value.substring(u);c=s+o.prefix+f+o.suffix+C}else{const s=l.value.substring(0,r),C=l.value.substring(r);c=s+o.prefix+"text"+o.suffix+C}l.value=c,e.focus()},te=async()=>{var e,r,u,f;const o={title:g.value,content:l.value,category:L.value};if(!g.value||!l.value||!((e=b.topitEdit)!=null&&e.id)&&!L.value){x.error("Please fill in all required fields");return}try{let c=route("forum.thread.create");(r=b.topitEdit)!=null&&r.id&&(c=route("forum.thread.edit",b.topitEdit.id));const s=await z.post(c,o);x.success(s.data.message),oe(),O("fresh-comments"),O("close")}catch(c){(f=(u=c.response)==null?void 0:u.data)!=null&&f.errors&&Object.values(c.response.data.errors).forEach(s=>{x.error(s[0])})}},se=async()=>{var o,e,r;if(k.value===g.value)try{const u=await z.delete(route("forum.thread.edit",(o=b.topitEdit)==null?void 0:o.id));x.success(u.data.message),w.value=!1,W.visit(route("home"),{preserveScroll:"errors"})}catch(u){(r=(e=u.response)==null?void 0:e.data)!=null&&r.errors&&Object.values(u.response.data.errors).forEach(f=>{x.error(f[0])})}},oe=()=>{l.value="",g.value="",L.value="",v.value=!1,w.value=!1,k.value=""},N=()=>{O("close")};return ae(()=>{var o;(o=b.topitEdit)!=null&&o.id&&(l.value=b.topitEdit.content,g.value=b.topitEdit.title)}),(o,e)=>{var r,u,f,c;return n(),p("div",{class:"fixed inset-0 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm z-50",onClick:B(N,["self"])},[w.value?(n(),p("div",Me,[t("div",De,[t("h3",$e,[a(i(fe),{class:"w-5 h-5 text-red-400"}),e[9]||(e[9]=d(" Confirm Deletion "))]),t("p",Fe,[e[10]||(e[10]=d(" This action cannot be undone. Please type ")),t("span",Oe,P(g.value),1),e[11]||(e[11]=d(" to confirm. "))]),_(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>k.value=s),type:"text",placeholder:"Type post title to confirm",class:"w-full px-3 py-2 bg-dark-blue-200 border border-gray-700 rounded-lg text-white placeholder-gray-500 mb-4"},null,512),[[V,k.value]]),t("div",Ne,[t("button",{type:"button",onClick:e[1]||(e[1]=s=>w.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-400 hover:text-white"}," Cancel "),t("button",{type:"button",onClick:se,disabled:k.value!==g.value,class:"px-4 py-2 bg-red-500 text-white rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," Delete Post ",8,Ve)])])])):E("",!0),t("div",Ae,[i(Q)().props.isUserAuth?(n(),p("form",{key:0,onSubmit:B(te,["prevent"])},[t("div",Ie,[t("div",Re,[a(i(me),{class:"w-5 h-5 text-purple-400"}),t("h2",Ue,P((r=b.topitEdit)!=null&&r.id?"Edit Discussion":"New Discussion"),1)]),t("button",{type:"button",onClick:N,class:"p-1 text-gray-400 hover:text-white transition-colors"},[a(i(J),{class:"w-5 h-5"})])]),t("div",He,[t("div",ze,[t("label",qe,[a(i(be),{class:"w-4 h-4"}),e[12]||(e[12]=d(" Title ")),e[13]||(e[13]=t("span",{class:"text-red-400"},"*",-1))]),_(t("input",{id:"commentTitle","onUpdate:modelValue":e[2]||(e[2]=s=>g.value=s),type:"text",placeholder:"What's your topic about?",class:"w-full px-3 py-2 bg-dark-blue-200 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all"},null,512),[[V,g.value]])]),(u=b.topitEdit)!=null&&u.id?E("",!0):(n(),p("div",Je,[t("label",Qe,[a(i(ye),{class:"w-4 h-4"}),e[14]||(e[14]=d(" Select Topic ")),e[15]||(e[15]=t("span",{class:"text-red-400"},"*",-1))]),_(t("select",{id:"channel","onUpdate:modelValue":e[3]||(e[3]=s=>L.value=s),class:"w-full px-3 py-2 bg-dark-blue-200 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all appearance-none"},[e[16]||(e[16]=t("option",{value:"",class:"bg-dark-blue-200"},"Choose a category",-1)),(n(!0),p(A,null,I(j.categories,s=>(n(),p("option",{key:s.id,value:s.slug,class:"bg-dark-blue-200"},P(s.name),9,Ge))),128))],512),[[ie,L.value]])])),t("div",Xe,[t("label",We,[a(i(he),{class:"w-4 h-4"}),e[17]||(e[17]=d(" Content ")),e[18]||(e[18]=t("span",{class:"text-red-400"},"*",-1))]),t("div",Ye,[t("button",{type:"button",class:D(["px-4 py-2 text-sm font-medium transition-colors border-b-2",[v.value?"text-gray-400 border-transparent hover:text-gray-300":"text-purple-400 border-purple-400"]]),onClick:e[4]||(e[4]=s=>v.value=!1)},[t("div",Ze,[a(i(xe),{class:"w-4 h-4"}),e[19]||(e[19]=d(" Write "))])],2),t("button",{type:"button",class:D(["px-4 py-2 text-sm font-medium transition-colors border-b-2",[v.value?"text-purple-400 border-purple-400":"text-gray-400 border-transparent hover:text-gray-300"]]),onClick:e[5]||(e[5]=s=>v.value=!0)},[t("div",Ke,[a(i(we),{class:"w-4 h-4"}),e[20]||(e[20]=d(" Preview "))])],2)]),_(t("div",et,[t("div",tt,[(n(),p(A,null,I(Z,s=>t("button",{key:s.label,type:"button",onClick:C=>ee(s),class:"p-1.5 text-gray-400 hover:text-white rounded transition-colors",title:s.label},[(n(),$(H(s.icon),{class:"w-4 h-4"}))],8,st)),64)),t("div",ot,[t("button",{type:"button",onClick:e[6]||(e[6]=B(s=>m.value=!m.value,["stop"])),class:D(["p-1.5 text-gray-400 hover:text-white rounded transition-colors flex items-center gap-1",{"text-purple-400":m.value}]),title:"Insert Code Block"},[a(i(R),{class:"w-4 h-4"}),a(i(Ce),{class:"w-3 h-3"})],2),a(X,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:G(()=>[m.value?_((n(),p("div",lt,[(n(),p(A,null,I(Y,s=>t("button",{key:s.value,type:"button",onClick:B(C=>K(s.value),["stop"]),class:"w-full px-4 py-2 text-sm text-left text-gray-300 hover:bg-dark-blue-200 hover:text-white flex items-center gap-2"},[(n(),$(H(s.icon),{class:"w-4 h-4"})),d(" "+P(s.label),1)],8,rt)),64))])),[[h,()=>m.value=!1]]):E("",!0)]),_:1})])]),_(t("textarea",{id:"comment",ref_key:"textareaRef",ref:S,"onUpdate:modelValue":e[7]||(e[7]=s=>l.value=s),placeholder:"Share your thoughts with the community...",class:"w-full h-64 px-4 py-3 bg-dark-blue-200 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all resize-none"},null,512),[[V,l.value]])],512),[[U,!v.value]]),_(t("div",at,[l.value?(n(),p("div",it,[a(ce,{content:l.value},null,8,["content"])])):(n(),p("div",nt," Nothing to preview yet... "))],512),[[U,v.value]]),t("div",ut,[a(i(_e),{class:"w-4 h-4"}),e[21]||(e[21]=t("span",null,[d(" Markdown supported: "),t("span",{class:"text-gray-400"},"**bold**, *italic*, `code`, etc.")],-1))])])]),t("div",dt,[t("div",ct,[a(i(Te),{class:"w-4 h-4 mr-2"}),e[22]||(e[22]=d(" Please follow community guidelines "))]),t("div",pt,[t("button",{type:"button",onClick:N,class:"flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium text-gray-400 hover:text-white transition-colors flex-1 sm:flex-initial"},[a(i(J),{class:"w-4 h-4"}),e[23]||(e[23]=d(" Cancel "))]),(f=b.topitEdit)!=null&&f.id?(n(),p("button",{key:0,type:"button",onClick:e[8]||(e[8]=s=>w.value=!0),class:"flex items-center justify-center gap-2 px-4 py-2 bg-red-500/10 text-red-400 rounded-lg hover:bg-red-500/20 text-sm font-medium transition-colors flex-1 sm:flex-initial"},[a(i(Ee),{class:"w-4 h-4"}),e[24]||(e[24]=d(" Delete "))])):E("",!0),t("button",ft,[a(i(pe),{class:"w-4 h-4"}),d(" "+P((c=b.topitEdit)!=null&&c.id?"Update":"Post"),1)])])])],32)):E("",!0)])])}}}),bt={class:"mt-3 bg-dark-100 rounded-lg"},Dt={__name:"PostBox",props:{categories:{type:Array,default:()=>[]},postBtnClass:{type:String,default:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold py-2 px-4 rounded-lg mb-6"},topitEdit:{type:Object,default:()=>{}}},emits:["displayLogin"],setup(j,{emit:F}){let h=y(!1);const x=j,v=()=>{setTimeout(()=>{W.reload({only:["blogPost"]})},300)},S=F,w=()=>{if(!Q().props.isUserAuth){S("displayLogin",!0);return}h.value=!h.value};return(k,m)=>(n(),p("section",bt,[t("button",{class:D(x.postBtnClass),onClick:w},[ne(k.$slots,"default",{},()=>[m[1]||(m[1]=d("New Dicussion"))])],2),(n(),$(de,{to:"body"},[a(X,{name:"fade"},{default:G(()=>[i(h)?(n(),$(mt,{key:0,onFreshComments:v,onClose:m[0]||(m[0]=l=>ue(h)?h.value=!1:h=!1),categories:x.categories,topitEdit:x.topitEdit},null,8,["categories","topitEdit"])):E("",!0)]),_:1})]))]))}};export{Dt as _};
