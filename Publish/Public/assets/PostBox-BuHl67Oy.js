import{q as re,ak as ae,a as y,k as ie,o as n,g as p,d as t,e as a,u as i,l as d,t as L,x as C,y as V,p as T,A as G,f as D,D as ne,F as U,z,n as $,a9 as R,b as F,E as H,w as W,aa as X,G as Y,j as ue,i as de,au as ce}from"./index-WItOpbdS.js";import{a as q}from"./axios-_QDD2PZU.js";import{s as P}from"./index-Dv4gq3Lz.js";import{_ as pe}from"./Markdown.vue_vue_type_style_index_0_lang-kspHqnBo.js";import{T as fe}from"./triangle-alert-WvWLgC-B.js";import{j as me,k as be,l as xe,m as J,T as _,n as ve,L as ge}from"./App.vue_vue_type_style_index_0_lang-DgznI69R.js";import{X as Q}from"./x-D_G4-85w.js";import{a as ye}from"./folder-open-Bdw4lC_y.js";import{M as he}from"./message-square-BsO5noHy.js";import{E as we}from"./eye-C6yT-mMt.js";import{F as I}from"./file-code-DcAGEUbz.js";import{C as ke}from"./chevron-down-CFkIQPso.js";import{I as Ce,C as _e}from"./info-pjT6XQSI.js";import{T as Te}from"./trash-2-jAQMw3jY.js";import{S as Ee}from"./send-Co5KQWL8.js";import{D as Se,B as je,I as Le,H as Pe,a as Be,Q as De}from"./underline-D3f7xiAR.js";import{C as M}from"./code-6FR90YNu.js";/* empty css                                                                       */const Me={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[70]"},$e={class:"bg-dark-blue-100 p-6 rounded-xl border border-gray-700 w-full max-w-md"},Fe={class:"text-lg font-semibold text-white mb-4 flex items-center gap-2"},Oe={class:"text-gray-300 text-sm mb-4"},Ae={class:"text-white font-medium"},Ne={class:"flex justify-end gap-3"},Ve=["disabled"],Ue={class:"w-full max-w-3xl bg-dark-blue-100 rounded-xl shadow-xl border border-gray-700/50"},ze={class:"flex items-center justify-between p-4 border-b border-gray-700/50"},Ie={class:"flex items-center gap-2"},Re={class:"text-lg font-semibold text-white"},He={class:"p-4 space-y-4"},qe={class:"space-y-2"},Je={for:"commentTitle",class:"flex items-center gap-2 text-sm font-medium text-gray-300"},Qe={key:0,class:"space-y-2"},Ge={for:"channel",class:"flex items-center gap-2 text-sm font-medium text-gray-300"},We=["value"],Xe={class:"space-y-2"},Ye={class:"flex items-center gap-2 text-sm font-medium text-gray-300"},Ke={class:"flex border-b border-gray-700/50"},Ze={class:"flex items-center gap-2"},et={class:"flex items-center gap-2"},tt={class:"space-y-2"},st={class:"flex flex-wrap gap-1 p-2 bg-dark-blue-200 rounded-t-lg border border-gray-700"},ot=["onClick","title"],lt={class:"relative"},rt={key:0,class:"absolute left-0 top-full mt-1 w-48 py-1 bg-dark-blue-100 rounded-lg border border-gray-700 shadow-xl z-[60]"},at=["onClick"],it={class:"min-h-[16rem] p-4 bg-dark-blue-200 rounded-lg border border-gray-700"},nt={key:0},ut={key:1,class:"text-gray-500 italic"},dt={class:"flex items-center gap-2 text-xs text-gray-500"},ct={class:"flex flex-col sm:flex-row justify-between items-center gap-4 p-4 border-t border-gray-700/50 bg-dark-blue-200/50"},pt={class:"flex items-center text-gray-400 text-sm"},ft={class:"flex gap-2 w-full sm:w-auto"},mt={type:"submit",class:"flex items-center justify-center gap-2 px-6 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 text-sm font-medium transition-colors flex-1 sm:flex-initial"},bt=re({__name:"Post",props:{commentClass:{type:String,default:"w-full rounded-lg"},categories:{type:Array,default:()=>[]},topitEdit:{type:Object,default:()=>({})}},emits:["fresh-comments","close"],setup(B,{emit:O}){const m=ae("route"),E={mounted:(o,e)=>{o._clickOutside=r=>{o===r.target||o.contains(r.target)||e.value()},document.body.addEventListener("click",o._clickOutside)},unmounted:o=>{document.body.removeEventListener("click",o._clickOutside)}},v=y(!1),S=y(null),h=y(!1),w=y(""),b=y(!1),l=y(""),g=y(""),j=y(""),K=[{label:"JavaScript",value:"javascript",icon:J},{label:"PHP",value:"php",icon:I},{label:"Python",value:"python",icon:_},{label:"C++",value:"cpp",icon:_},{label:"Java",value:"java",icon:_},{label:"Ruby",value:"ruby",icon:_},{label:"SQL",value:"sql",icon:Se},{label:"HTML",value:"html",icon:M},{label:"CSS",value:"css",icon:M},{label:"TypeScript",value:"typescript",icon:J},{label:"Go",value:"go",icon:_},{label:"Rust",value:"rust",icon:_},{label:"Shell",value:"bash",icon:_},{label:"JSON",value:"json",icon:ve},{label:"XML",value:"xml",icon:M},{label:"YAML",value:"yaml",icon:I}],Z=[{label:"Bold",icon:je,prefix:"**",suffix:"**"},{label:"Italic",icon:Le,prefix:"*",suffix:"*"},{label:"Code",icon:M,prefix:"`",suffix:"`"},{label:"Heading",icon:Pe,prefix:"# ",suffix:""},{label:"List",icon:Be,prefix:"- ",suffix:""},{label:"Quote",icon:De,prefix:"> ",suffix:""},{label:"Link",icon:ge,prefix:"[",suffix:"](url)"}],x=B,A=O,ee=o=>{const e=S.value;if(!e)return;const r=e.selectionStart,u=e.selectionEnd,f=l.value.substring(r,u),c=["```"+o,f||"Your code here","```",""].join(`
`),s=l.value.substring(0,r),k=l.value.substring(u);l.value=s+c+k,setTimeout(()=>{b.value=!1,e.focus()},100)},te=o=>{const e=S.value;if(!e)return;const r=e.selectionStart,u=e.selectionEnd,f=l.value.substring(r,u);let c;if(f){const s=l.value.substring(0,r),k=l.value.substring(u);c=s+o.prefix+f+o.suffix+k}else{const s=l.value.substring(0,r),k=l.value.substring(r);c=s+o.prefix+"text"+o.suffix+k}l.value=c,e.focus()},se=async()=>{var e,r,u,f;const o={title:g.value,content:l.value,category:j.value};if(!g.value||!l.value||!((e=x.topitEdit)!=null&&e.id)&&!j.value){P("error","Please fill in all required fields","error");return}try{let c=m("forum.thread.create");(r=x.topitEdit)!=null&&r.id&&(c=m("forum.thread.edit",x.topitEdit.id));const s=await q.post(c,o);P("success",s.data.message,"success"),le(),A("fresh-comments"),A("close")}catch(c){(f=(u=c.response)==null?void 0:u.data)!=null&&f.errors&&Object.values(c.response.data.errors).forEach(s=>{P("error",s[0],"error")})}},oe=async()=>{var o,e,r;if(w.value===g.value)try{const u=await q.delete(m("forum.thread.edit",(o=x.topitEdit)==null?void 0:o.id));P("success",u.data.message,"success"),h.value=!1,Y.visit(m("home"),{preserveScroll:"errors"})}catch(u){(r=(e=u.response)==null?void 0:e.data)!=null&&r.errors&&Object.values(u.response.data.errors).forEach(f=>{P("error",f[0],"error")})}},le=()=>{l.value="",g.value="",j.value="",v.value=!1,h.value=!1,w.value=""},N=()=>{A("close")};return ie(()=>{var o;(o=x.topitEdit)!=null&&o.id&&(l.value=x.topitEdit.content,g.value=x.topitEdit.title)}),(o,e)=>{var r,u,f,c;return n(),p("div",{class:"fixed inset-0 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm z-50",onClick:D(N,["self"])},[h.value?(n(),p("div",Me,[t("div",$e,[t("h3",Fe,[a(i(fe),{class:"w-5 h-5 text-red-400"}),e[9]||(e[9]=d(" Confirm Deletion "))]),t("p",Oe,[e[10]||(e[10]=d(" This action cannot be undone. Please type ")),t("span",Ae,L(g.value),1),e[11]||(e[11]=d(" to confirm. "))]),C(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>w.value=s),type:"text",placeholder:"Type post title to confirm",class:"w-full px-3 py-2 bg-dark-blue-200 border border-gray-700 rounded-lg text-white placeholder-gray-500 mb-4"},null,512),[[V,w.value]]),t("div",Ne,[t("button",{type:"button",onClick:e[1]||(e[1]=s=>h.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-400 hover:text-white"}," Cancel "),t("button",{type:"button",onClick:oe,disabled:w.value!==g.value,class:"px-4 py-2 bg-red-500 text-white rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," Delete Post ",8,Ve)])])])):T("",!0),t("div",Ue,[i(G)().props.isUserAuth?(n(),p("form",{key:0,onSubmit:D(se,["prevent"])},[t("div",ze,[t("div",Ie,[a(i(me),{class:"w-5 h-5 text-purple-400"}),t("h2",Re,L((r=x.topitEdit)!=null&&r.id?"Edit Discussion":"New Discussion"),1)]),t("button",{type:"button",onClick:N,class:"p-1 text-gray-400 hover:text-white transition-colors"},[a(i(Q),{class:"w-5 h-5"})])]),t("div",He,[t("div",qe,[t("label",Je,[a(i(be),{class:"w-4 h-4"}),e[12]||(e[12]=d(" Title ")),e[13]||(e[13]=t("span",{class:"text-red-400"},"*",-1))]),C(t("input",{id:"commentTitle","onUpdate:modelValue":e[2]||(e[2]=s=>g.value=s),type:"text",placeholder:"What's your topic about?",class:"w-full px-3 py-2 bg-dark-blue-200 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all"},null,512),[[V,g.value]])]),(u=x.topitEdit)!=null&&u.id?T("",!0):(n(),p("div",Qe,[t("label",Ge,[a(i(ye),{class:"w-4 h-4"}),e[14]||(e[14]=d(" Select Topic ")),e[15]||(e[15]=t("span",{class:"text-red-400"},"*",-1))]),C(t("select",{id:"channel","onUpdate:modelValue":e[3]||(e[3]=s=>j.value=s),class:"w-full px-3 py-2 bg-dark-blue-200 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all appearance-none"},[e[16]||(e[16]=t("option",{value:"",class:"bg-dark-blue-200"},"Choose a category",-1)),(n(!0),p(U,null,z(B.categories,s=>(n(),p("option",{key:s.id,value:s.slug,class:"bg-dark-blue-200"},L(s.name),9,We))),128))],512),[[ne,j.value]])])),t("div",Xe,[t("label",Ye,[a(i(he),{class:"w-4 h-4"}),e[17]||(e[17]=d(" Content ")),e[18]||(e[18]=t("span",{class:"text-red-400"},"*",-1))]),t("div",Ke,[t("button",{type:"button",class:$(["px-4 py-2 text-sm font-medium transition-colors border-b-2",[v.value?"text-gray-400 border-transparent hover:text-gray-300":"text-purple-400 border-purple-400"]]),onClick:e[4]||(e[4]=s=>v.value=!1)},[t("div",Ze,[a(i(xe),{class:"w-4 h-4"}),e[19]||(e[19]=d(" Write "))])],2),t("button",{type:"button",class:$(["px-4 py-2 text-sm font-medium transition-colors border-b-2",[v.value?"text-purple-400 border-purple-400":"text-gray-400 border-transparent hover:text-gray-300"]]),onClick:e[5]||(e[5]=s=>v.value=!0)},[t("div",et,[a(i(we),{class:"w-4 h-4"}),e[20]||(e[20]=d(" Preview "))])],2)]),C(t("div",tt,[t("div",st,[(n(),p(U,null,z(Z,s=>t("button",{key:s.label,type:"button",onClick:k=>te(s),class:"p-1.5 text-gray-400 hover:text-white rounded transition-colors",title:s.label},[(n(),F(H(s.icon),{class:"w-4 h-4"}))],8,ot)),64)),t("div",lt,[t("button",{type:"button",onClick:e[6]||(e[6]=D(s=>b.value=!b.value,["stop"])),class:$(["p-1.5 text-gray-400 hover:text-white rounded transition-colors flex items-center gap-1",{"text-purple-400":b.value}]),title:"Insert Code Block"},[a(i(I),{class:"w-4 h-4"}),a(i(ke),{class:"w-3 h-3"})],2),a(X,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:W(()=>[b.value?C((n(),p("div",rt,[(n(),p(U,null,z(K,s=>t("button",{key:s.value,type:"button",onClick:D(k=>ee(s.value),["stop"]),class:"w-full px-4 py-2 text-sm text-left text-gray-300 hover:bg-dark-blue-200 hover:text-white flex items-center gap-2"},[(n(),F(H(s.icon),{class:"w-4 h-4"})),d(" "+L(s.label),1)],8,at)),64))])),[[E,()=>b.value=!1]]):T("",!0)]),_:1})])]),C(t("textarea",{id:"comment",ref_key:"textareaRef",ref:S,"onUpdate:modelValue":e[7]||(e[7]=s=>l.value=s),placeholder:"Share your thoughts with the community...",class:"w-full h-64 px-4 py-3 bg-dark-blue-200 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all resize-none"},null,512),[[V,l.value]])],512),[[R,!v.value]]),C(t("div",it,[l.value?(n(),p("div",nt,[a(pe,{content:l.value},null,8,["content"])])):(n(),p("div",ut," Nothing to preview yet... "))],512),[[R,v.value]]),t("div",dt,[a(i(Ce),{class:"w-4 h-4"}),e[21]||(e[21]=t("span",null,[d(" Markdown supported: "),t("span",{class:"text-gray-400"},"**bold**, *italic*, `code`, etc.")],-1))])])]),t("div",ct,[t("div",pt,[a(i(_e),{class:"w-4 h-4 mr-2"}),e[22]||(e[22]=d(" Please follow community guidelines "))]),t("div",ft,[t("button",{type:"button",onClick:N,class:"flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium text-gray-400 hover:text-white transition-colors flex-1 sm:flex-initial"},[a(i(Q),{class:"w-4 h-4"}),e[23]||(e[23]=d(" Cancel "))]),(f=x.topitEdit)!=null&&f.id?(n(),p("button",{key:0,type:"button",onClick:e[8]||(e[8]=s=>h.value=!0),class:"flex items-center justify-center gap-2 px-4 py-2 bg-red-500/10 text-red-400 rounded-lg hover:bg-red-500/20 text-sm font-medium transition-colors flex-1 sm:flex-initial"},[a(i(Te),{class:"w-4 h-4"}),e[24]||(e[24]=d(" Delete "))])):T("",!0),t("button",mt,[a(i(Ee),{class:"w-4 h-4"}),d(" "+L((c=x.topitEdit)!=null&&c.id?"Update":"Post"),1)])])])],32)):T("",!0)])])}}}),xt={class:"mt-3 bg-dark-100 rounded-lg"},Ft={__name:"PostBox",props:{categories:{type:Array,default:()=>[]},postBtnClass:{type:String,default:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold py-2 px-4 rounded-lg mb-6"},topitEdit:{type:Object,default:()=>{}}},emits:["displayLogin"],setup(B,{emit:O}){let m=y(!1);const E=B,v=()=>{setTimeout(()=>{Y.reload({only:["blogPost"]})},300)},S=O,h=()=>{if(!G().props.isUserAuth){S("displayLogin",!0);return}m.value=!m.value};return(w,b)=>(n(),p("section",xt,[t("button",{class:$(E.postBtnClass),onClick:h},[ue(w.$slots,"default",{},()=>[b[1]||(b[1]=d("New Dicussion"))])],2),(n(),F(ce,{to:"body"},[a(X,{name:"fade"},{default:W(()=>[i(m)?(n(),F(bt,{key:0,onFreshComments:v,onClose:b[0]||(b[0]=l=>de(m)?m.value=!1:m=!1),categories:E.categories,topitEdit:E.topitEdit},null,8,["categories","topitEdit"])):T("",!0)]),_:1})]))]))}};export{Ft as _};
