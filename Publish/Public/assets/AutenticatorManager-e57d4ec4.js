import{a as h,p as x,o as l,g as c,d as t,s as f,t as i,e as k,f as u,u as d,i as p,F as C,D as g,O as I}from"./preset-4ee70171.js";import{_ as b}from"./Input-bc115587.js";import{_ as V}from"./Submit-703cdd04.js";const T={class:"px-5 py-7"},A={key:0,class:"card shadow-lg compact side bg-base-100"},F={class:"flex-row items-center space-x-4 card-body"},B={class:"rounded-full w-60 h-60 shadow"},M=["innerHTML"],O={class:"w-full"},j=t("h2",{class:"card-title"}," Scan the qr code and enter the code to activate your two factor authentication. ",-1),N={class:"text-base-content text-opacity-40"},R=["onSubmit"],S={class:"form-control pt-10"},q={key:1},D={class:"card-body"},L={class:"my-4 text-4xl font-bold card-title"},U={class:"flex items-center justify-end gap-3"},$=t("label",{for:"my-modal-2",class:"btn btn-primary modal-button"},"Remove Autenticator",-1),H=t("input",{type:"checkbox",id:"my-modal-2",class:"modal-toggle"},null,-1),z={class:"modal"},E={class:"modal-box"},P=t("label",{for:"my-modal-2",class:"btn"},"Close",-1),G={class:"overflow-x-auto"},J={class:"table table-zebra w-full"},K=t("thead",null,[t("tr",null,[t("th",null,"Code"),t("th",null,"Used")])],-1),Y={__name:"AutenticatorManager",props:{userInfo:{type:Object,default:()=>({})},autenticatorInfo:{type:Object,default:()=>({})}},setup(m){const n=m;let y=h([]);x(()=>{y.value=n.userInfo});let o=h("");const _=()=>{const e={code:o.value};I.post(route("user.2fa.enable"),e)},v=()=>{const e={code:o.value};Inertia.patch(route("user.remove-autenticator"),e)},w=()=>{let e=window.open("","PRINT","height=650,width=900,top=100,left=150");const a="codes";e.document.write(`<html><head><title>${a}</title>`),e.document.write("</head><body>"),e.document.write("<h1> Two Factor Autenticator Backup Codes </h1>"),e.document.write("<table>"),e.document.write("<tr><th>Code</th><th>used</th></tr>");for(const[s,r]of Object.entries(n.autenticatorInfo.backup_codes))e.document.write("<tr>"),e.document.write(`<td>${r.code}</td>`),e.document.write(`<td>${r.used}</td>`),e.document.write("</tr>");return e.document.write("</table>"),e.document.write("</body></html>"),e.document.close(),e.focus(),e.print(),e.close(),!0};return(e,a)=>(l(),c("div",null,[t("div",T,[n.autenticatorInfo.is_enable==!1?(l(),c("div",A,[t("div",F,[t("div",null,[t("div",B,[t("div",{innerHTML:n.autenticatorInfo.codeinfo.qr_code},null,8,M)])]),t("div",O,[j,t("p",N,[f(" Case you can,t use the qr code, you can enter the code manually. "),t("strong",null,i(n.autenticatorInfo.codeinfo.secret),1)]),t("div",null,[t("form",{onSubmit:k(_,["prevent"])},[u(d(b),{modelValue:d(o),"onUpdate:modelValue":a[0]||(a[0]=s=>p(o)?o.value=s:o=s),label:"Code",type:"text",placeholder:"type your code",max:"6"},null,8,["modelValue"]),t("div",S,[u(d(V),{name:"activate",onClick:_})])],40,R)])])])])):(l(),c("div",q,[t("div",D,[t("h2",L,[f(" Two Factor Autenticator Backup Codes "),t("div",U,[t("button",{class:"btn btn-primary",onClick:w}," Download Csv "),$,H,t("div",z,[t("div",E,[u(d(b),{modelValue:d(o),"onUpdate:modelValue":a[1]||(a[1]=s=>p(o)?o.value=s:o=s),label:"Two Factor Autenticator Code",type:"text",placeholder:"type your code"},null,8,["modelValue"]),t("div",{class:"modal-action"},[t("label",{for:"my-modal-2",class:"btn btn-primary",onClick:v},"Remove"),P])])])])]),t("div",G,[t("table",J,[K,t("tbody",null,[(l(!0),c(C,null,g(m.autenticatorInfo.backup_codes,(s,r)=>(l(),c("tr",{key:r},[t("th",null,i(s.code),1),t("th",null,i(s.used),1)]))),128))])])])])]))])]))}};export{Y as default};
