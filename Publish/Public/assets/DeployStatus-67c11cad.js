import{a as i,z as c,p as x,A as w,B as k,o as r,g as m,d as t,k as u,t as o,s as p,F as D,y as j,u as C,l as B,C as S}from"./preset-dc82439c.js";const V={class:"min-h-screen bg-base-200 p-6"},L={class:"container mx-auto"},P={class:"card bg-base-100 shadow-xl"},M={class:"card-body"},N={class:"flex justify-between items-center mb-4"},z={class:"card-title text-2xl flex items-center gap-2"},A=t("span",null,"Deployment Status",-1),E=t("div",{class:"flex items-center gap-4"},[t("div",{class:"text-sm opacity-70"}," Started: 2024-10-26 14:30:00 "),t("div",{class:"text-sm opacity-70"}," Duration: 2m 45s ")],-1),F={class:"bg-base-200 p-4 rounded-lg mb-4"},H={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},I=t("div",{class:"text-sm opacity-70"},"Repository",-1),T={class:"font-medium"},O=t("div",{class:"text-sm opacity-70"},"Branch",-1),R={class:"font-medium"},U=t("div",{class:"text-sm opacity-70"},"Commit",-1),q={class:"font-mono text-sm"},G=t("div",{class:"text-sm opacity-70"}," Deployment Path ",-1),J={class:"font-mono text-sm"},K={class:"mb-6"},Q={class:"flex justify-between items-center mb-2"},W=t("div",{class:"font-medium"},"Deployment Progress",-1),X={class:"text-sm opacity-70"},Y=["value"],Z={class:"bg-base-300 rounded-lg"},$={class:"flex items-center justify-between p-4 border-b border-base-content/10"},tt=t("h3",{class:"font-bold"},"Deployment Logs",-1),et={class:"flex gap-2"},st=t("button",{class:"btn btn-sm btn-ghost"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})]),p(" Download Logs ")],-1),ot=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13l-3 3m0 0l-3-3m3 3V8"})],-1),nt={class:"h-[400px] overflow-y-auto font-mono text-sm p-4 space-y-2"},at=B('<div class="flex justify-between items-center mt-4"><div class="flex gap-2"><button class="btn btn-error btn-sm"> Cancel Deployment </button><button class="btn btn-ghost btn-sm"> View Previous Deployment </button></div><div class="flex gap-2"><div class="badge badge-neutral"> webhook-id: 123 </div><div class="badge badge-neutral"> deploy-id: 456 </div></div></div>',1),dt={__name:"DeployStatus",props:{deployment:{type:Object,default:()=>({})}},setup(e){const a=e;i("running");const g=i(!0);let d=i([]);const l=async()=>{try{const _=await(await fetch(route("deployments.logs",a.deployment.id))).json();d.value=_.data}catch(s){console.error("Error fetching logs:",s)}},v=c(()=>d.value.filter(s=>s.type==="success").length),h=c(()=>a.deployment.progress.total||0),b=c(()=>v.value/h.value*100||0),y=s=>s?S(new Date(s),"HH:mm:ss"):"";return x(()=>{a.deployment&&(l(),setInterval(l,5e3))}),w(()=>a.deployment,s=>{s&&l()}),k(()=>{clearInterval(l)}),(s,_)=>(r(),m("div",V,[t("div",L,[t("div",P,[t("div",M,[t("div",N,[t("h2",z,[A,t("div",{class:u(["badge badge-lg",{"badge-warning animate-pulse":e.deployment.status==="running","badge-success":e.deployment.status==="completed","badge-error":e.deployment.status==="failed","badge-info":e.deployment.status==="pending"}])},o(e.deployment.status),3)]),E]),t("div",F,[t("div",H,[t("div",null,[I,t("div",T,o(e.deployment.metadata.repository_name),1)]),t("div",null,[O,t("div",R,o(e.deployment.webhook_config.branch),1)]),t("div",null,[U,t("div",q,o(e.deployment.commit_hash),1)]),t("div",null,[G,t("div",J,o(e.deployment.webhook_config.deployment_path),1)])])]),t("div",K,[t("div",Q,[W,t("div",X,o(v.value)+"/"+o(h.value)+" commands completed ",1)]),t("progress",{class:"progress progress-primary w-full",value:b.value,max:"100"},null,8,Y),p(" "+o(b.value),1)]),t("div",Z,[t("div",$,[tt,t("div",et,[st,t("button",{class:u(["btn btn-sm btn-ghost",{"btn-active":g.value}])},[ot,p(" Auto-scroll ")],2)])]),t("div",nt,[(r(!0),m(D,null,j(C(d),(n,f)=>(r(),m("div",{key:f},[t("div",{class:u({"text-primary":n.type==="info","text-info":n.type==="command","text-success":n.type==="success","text-error":n.type==="error","text-warning animate-pulse":n.type==="running","pl-4":n.indented})}," ["+o(y(n.timestamp))+"] "+o(n.content),3)]))),128))])]),at])])])]))}};export{dt as default};
