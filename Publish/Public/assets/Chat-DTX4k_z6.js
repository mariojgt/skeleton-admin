import{v as R,a as m,k as j,B as O,b as k,w as B,aq as G,o as A,d as i,e as c,l as q,u as F,P as W,t as Y,p as z,H as _}from"./index-WItOpbdS.js";import{P as J,M as K,T as Q,_ as X}from"./App.vue_vue_type_style_index_0_lang-DgznI69R.js";import{s as p}from"./index-Dv4gq3Lz.js";import Z from"./ServiceInfo-iP5B40Pu.js";import ee from"./ConversationList-CGQsL5zq.js";import te from"./OptionsPanel-BWijskDJ.js";import oe from"./ChatHeader-7GpHQEDi.js";import re from"./MessageList-Ckfxmo5N.js";import ae from"./ChatInput-BOA7zZ8G.js";import ie from"./NewChatModal-27bqtbgJ.js";import{C as L}from"./code-6FR90YNu.js";import{F as ne}from"./file-code-DcAGEUbz.js";import{G as se}from"./gamepad-DeoH836H.js";import{B as ce}from"./SearchSidebar-C-_lzOtR.js";import{a as le}from"./chevron-right-o_L0fzR6.js";import{C as me}from"./circle-plus-CDlRviFK.js";import"./FlashMessage-D5T9KYej.js";import"./createLucideIcon-B_m21LnD.js";import"./underline-D3f7xiAR.js";import"./bookmark-ULpl1TpR.js";import"./arrow-right-DR4DXPKm.js";import"./award-BzMCt3sC.js";import"./square-pen-DT6EUZg-.js";import"./bell-off-7yGDgxWn.js";import"./bell-Btq0QMyD.js";import"./book-open-DA17LBaE.js";import"./folder-open-Bdw4lC_y.js";import"./layers-nOFiBkQ5.js";import"./refresh-ccw-HiQ0xrwq.js";import"./calendar-uav1JtPz.js";import"./check-Bj0sAzNn.js";import"./chevron-down-CFkIQPso.js";import"./chevron-up-DnU83qHv.js";import"./info-pjT6XQSI.js";import"./circle-check-big-D4oY-uLV.js";import"./plus-C-Tc0aaV.js";import"./circle-x-CZUopObt.js";import"./clock-CtJexj6H.js";import"./copy-kcKq1M6K.js";import"./credit-card-C9fkk2-U.js";import"./crown-Q_hRGcZ7.js";import"./settings-BMSynf3N.js";import"./download-Br1fYmfn.js";import"./pen-Z-rwVA3g.js";import"./external-link-DL6H8Pmk.js";import"./shield-check-C5PVV6Z4.js";import"./eye-C6yT-mMt.js";import"./trash-DWR5SLDJ.js";import"./gamepad-2-oAnktp6q.js";import"./graduation-cap-BDa-mbFu.js";import"./history-DE24IReM.js";import"./house-X6YzmkQp.js";import"./key-uG_gkCpc.js";import"./lock-BRWUkUvR.js";import"./mail-BO47lLg7.js";import"./message-circle-Din7jeE5.js";import"./message-square-BsO5noHy.js";import"./shopping-bag-BsFNNjNi.js";import"./thumbs-up-zL8bQz8Z.js";import"./play-qh96BeCU.js";import"./qr-code--I0Kf4H8.js";import"./refresh-cw-Baqh8J4k.js";import"./save-ZWy67PzQ.js";import"./scroll-text-D4lLzPU_.js";import"./scroll-BNMWMBtd.js";import"./search-Cw9ASmoG.js";import"./send-Co5KQWL8.js";import"./shield-Be_G51qQ.js";import"./shopping-cart-BmrR1tg0.js";import"./star-DeAhN4QA.js";import"./timer-dHC_Ll8z.js";import"./trash-2-jAQMw3jY.js";import"./triangle-alert-WvWLgC-B.js";import"./trophy-k7fMmljL.js";import"./user-DdnhHvPw.js";import"./users-G5pHmbt7.js";import"./video-Dl_CRmcu.js";import"./x-D_G4-85w.js";import"./zap-Cbw5Ho42.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./app-Bbx9pxJZ.js";import"./Input.vue_vue_type_style_index_0_scoped_a29b7091_lang-CIV3KoBB.js";import"./ReusableModal-CrVkhlU_.js";import"./transition-Ck23AN9S.js";import"./focus-management-BrwG5F66.js";import"./keyboard-Cn0nGm_W.js";import"./hidden-BhFQ2Bcg.js";import"./open-closed-DfxnaXzs.js";import"./purify.es-DaM3Xu2Z.js";import"./axios-_QDD2PZU.js";import"./Money-BJRPvLN8.js";import"./SeoManager-DxqDIF7D.js";import"./Message-Cq3fahK8.js";import"./index-CeigbtfH.js";import"./UnrealBlueprintRenderer-BOUHhlSn.js";import"./CodeRenderer-CBcF_AX5.js";import"./formatUtils-D1BGvVL8.js";import"./SvgRenderer-B6_TwaCJ.js";import"./MarkdownRenderer-Ccup8hup.js";import"./dynamicIcon.vue_vue_type_script_setup_true_lang-Cf8ehSRr.js";import"./Markdown.vue_vue_type_style_index_0_lang-kspHqnBo.js";const pe=a=>({Code:L,FileCode:ne,Gamepad:se,Layout:J,Music:K,Bot:ce,Terminal:Q})[a]||L,ue={class:"min-h-screen bg-[#0F172A]"},de={class:"max-w-6xl mx-auto py-6 px-4 sm:px-6"},ve={class:"mb-6"},fe={class:"flex items-center gap-2 text-sm"},Ce={class:"text-[#64FFDA]"},ge={class:"grid grid-cols-1 lg:grid-cols-4 gap-6"},he={class:"lg:col-span-1 space-y-6"},we={class:"lg:col-span-3"},ye={class:"bg-[#1E293B] rounded-xl shadow-xl border border-[#64FFDA]/20 overflow-hidden"},fo={__name:"Chat",props:{service:String,serviceConfig:Object,conversations:Array},setup(a){const n=a,w=R(()=>pe(n.serviceConfig.icon)),r=m([{role:"assistant",content:`ðŸ‘‹ Hello! I'm your ${n.serviceConfig.name}. How can I help you today?`,timestamp:Date.now()}]),d=m(""),u=m(!1),y=m(null),x=m(!0),s=m(null),h=m(!1),v=m(""),$=t=>(typeof t=="string"&&(t=new Date(t).getTime()),new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit"}).format(t)),f=async()=>{await G(),y.value&&y.value.scrollToBottom()},I=()=>{s.value?confirm("Do you want to clear the current conversation? This cannot be undone.")&&(r.value=[r.value[0]],s.value=null,p("info","Chat cleared","info")):(r.value=[r.value[0]],p("info","Chat cleared","info"))},M=t=>{navigator.clipboard.writeText(t),p("success","Copied to clipboard","success")},N=()=>{v.value="",h.value=!0},E=async()=>{if(v.value.trim())try{const t=await _.post(route("api.ai.conversation.create"),{service:n.service,title:v.value});t.data.success&&(s.value=t.data.conversation.id,r.value=[r.value[0]],h.value=!1,p("success","New conversation created","success"))}catch(t){console.error("Failed to create conversation:",t),p("error","Failed to create new conversation","error")}},U=async t=>{try{u.value=!0;const e=await _.get(route("api.ai.conversation.get",{conversation:t}));e.data.success&&(s.value=t,e.data.messages.length>0?r.value=e.data.messages.map(o=>({role:o.role,content:o.content,created_at:o.created_at})):r.value=[{role:"assistant",content:`ðŸ‘‹ Hello! I'm your ${n.serviceConfig.name}. How can I help you today?`,timestamp:Date.now()}])}catch(e){console.error("Failed to load conversation:",e),p("error","Failed to load conversation","error")}finally{u.value=!1,await f()}},P=async()=>{if(!d.value.trim()||u.value)return;const t={role:"user",content:d.value.trim(),timestamp:Date.now()};r.value.push(t),d.value="",await f();try{u.value=!0;const e=[...r.value.map(({role:C,content:b})=>({role:C,content:b}))];e.length>1&&e[0].role==="assistant"&&e.shift();const o=await _.post(route("api.ai.chat"),{messages:e,service:n.service,conversation_id:s.value,use_anthropic:x.value});if(o.data.success)r.value.push({role:"assistant",content:o.data.message,timestamp:Date.now()}),!s.value&&o.data.conversation_id&&(s.value=o.data.conversation_id);else throw new Error(o.data.message||"Failed to get response")}catch(e){p("error","Failed to get AI response. Please try again.","error"),console.error("Chat error:",e),r.value.pop(),d.value=t.content}finally{u.value=!1,await f()}},S=()=>{var T;if(r.value.length<=1)return;const t=s.value?(T=n.conversations.find(l=>l.id===s.value))==null?void 0:T.title:`${n.serviceConfig.name} Chat`,e=new Date().toISOString().replace(/:/g,"-").substring(0,19),o=`${t||"Chat"}-${e}.md`;let C=`# ${t||n.serviceConfig.name+" Chat"}
`;C+=`Exported on ${new Date().toLocaleString()}

`,r.value.forEach(l=>{const V=l.role==="user"?"You":n.serviceConfig.name,H=l.timestamp?$(l.timestamp):l.created_at?$(l.created_at):"";C+=`## ${V} (${H})

${l.content}

---

`});const b=new Blob([C],{type:"text/markdown;charset=utf-8"}),D=URL.createObjectURL(b),g=document.createElement("a");g.href=D,g.download=o,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(D),p("success","Chat exported successfully","success")};return j(()=>{f()}),O(r,f,{deep:!0}),(t,e)=>(A(),k(X,{backgroundFooterClass:"bg-dark-100",headerBackground:"bg-dark-100"},{default:B(()=>[i("div",ue,[i("div",de,[i("div",ve,[i("div",fe,[c(F(W),{href:t.route("ai.index"),class:"text-[#CBD5E1] hover:text-[#64FFDA] transition-colors"},{default:B(()=>e[4]||(e[4]=[q(" AI Assistants ")])),_:1},8,["href"]),c(F(le),{class:"w-3 h-3 text-[#CBD5E1]"}),i("span",Ce,Y(a.serviceConfig.name),1)])]),i("div",ge,[i("div",he,[c(Z,{serviceConfig:a.serviceConfig,iconComponent:w.value},null,8,["serviceConfig","iconComponent"]),i("button",{onClick:N,class:"w-full px-4 py-3 bg-gradient-to-r from-[#64FFDA] to-[#10B981] rounded-md text-[#0F172A] font-medium flex items-center justify-center gap-2"},[c(F(me),{class:"w-4 h-4"}),e[5]||(e[5]=i("span",null,"New Chat",-1))]),a.conversations.length>0?(A(),k(ee,{key:0,conversations:a.conversations,currentConversationId:s.value,serviceConfig:a.serviceConfig,onLoadConversation:U},null,8,["conversations","currentConversationId","serviceConfig"])):z("",!0),c(te,{useAnthropic:x.value,"onUpdate:useAnthropic":e[0]||(e[0]=o=>x.value=o),messagesCount:r.value.length,onExportChat:S},null,8,["useAnthropic","messagesCount"])]),i("div",we,[i("div",ye,[c(oe,{serviceConfig:a.serviceConfig,iconComponent:w.value,onClearChat:I},null,8,["serviceConfig","iconComponent"]),c(re,{ref_key:"chatContainer",ref:y,messages:r.value,service:a.service,serviceConfig:a.serviceConfig,isLoading:u.value,iconComponent:w.value,onCopyContent:M},null,8,["messages","service","serviceConfig","isLoading","iconComponent"]),c(ae,{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=o=>d.value=o),isLoading:u.value,serviceConfig:a.serviceConfig,onSendMessage:P},null,8,["modelValue","isLoading","serviceConfig"])])])])]),c(ie,{show:h.value,title:v.value,"onUpdate:title":e[2]||(e[2]=o=>v.value=o),onClose:e[3]||(e[3]=o=>h.value=!1),onCreate:E},null,8,["show","title"])])]),_:1}))}};export{fo as default};
