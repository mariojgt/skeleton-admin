import{v as W,bZ as I,o as r,g as i,d as e,j as z,t as V,q as ee,F as C,J as H,a as $,A as T,m as J,y as S,e as w,u as c,D as E,E as Q,s as P,z as j,b as L,w as D,k as N,H as K,bT as te,f as le,X as oe,l as se,c0 as ae}from"./preset-b90b9b08.js";/* empty css                                                                         */import{_ as R}from"./_plugin-vue_export-helper-c27b6911.js";import{_ as O}from"./Input.vue_vue_type_script_setup_true_lang-8998e423.js";import"./index.esm-b2918197.js";import{_ as ne}from"./Password-350de7e5.js";import{_ as re}from"./Select.vue_vue_type_script_setup_true_lang-6d59acee.js";import{_ as ie}from"./Image.vue_vue_type_script_setup_true_lang-2215c83f.js";import{_ as q}from"./TextMultipleSelector-201d79a5.js";import{_ as Y}from"./Toggle-1f7e2e25.js";import{_ as de}from"./Chips.vue_vue_type_script_setup_true_lang-8bc401f8.js";import{Q as X,V as Z,N as G}from"./disclosure-e9910491.js";const ce=["for"],ue=["id"],pe={class:"modal text-neutral-content"},me={class:"modal-box relative flex flex-col items-center justify-center w-11/12 max-w-md bg-white dark:bg-gray-800 border-2 border-red-500 rounded-2xl shadow-2xl text-center p-8 space-y-6"},fe=["for"],ve={class:"space-y-4"},be={class:"text-gray-600 dark:text-gray-400 text-sm md:text-base"},he={class:"flex w-full justify-between space-x-4"},ye=["for"],ge=W({__name:"delete",props:{id:{type:Number,default:0},model:{type:String,default:()=>[]},endpoint:{type:String,default:()=>[]},permission:{type:String,default:null}},emits:["onDelete"],setup(h,{emit:_}){const b=I(),u=h,s=_,x=async()=>{var v,d;try{const m=await H.post(u.endpoint,{model:u.model,id:u.id,permission:u.permission});b.success(m.data.message),s("onDelete");const o=document.getElementById(`my-modal-delete-${u.id}`);o&&(o.checked=!1)}catch(m){const o=((d=(v=m.response)==null?void 0:v.data)==null?void 0:d.errors)||{};Object.values(o).forEach(p=>{b.error(p[0])})}};return(v,d)=>(r(),i(C,null,[e("label",{for:"my-modal-delete-"+u.id,class:"btn btn-error modal-button group transition-all duration-300 hover:scale-105"},d[0]||(d[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 group-hover:animate-pulse",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,ce),e("input",{type:"checkbox",id:"my-modal-delete-"+u.id,class:"modal-toggle"},null,8,ue),e("div",pe,[e("div",me,[e("button",{for:"my-modal-delete-"+u.id,class:"btn btn-sm btn-circle btn-ghost absolute right-3 top-3 hover:bg-red-50 dark:hover:bg-red-900"},d[1]||(d[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-gray-500 hover:text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,fe),e("div",ve,[d[2]||(d[2]=z('<div class="flex justify-center mb-4" data-v-54f81a0a><div class="bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-full p-4 inline-flex items-center justify-center animate-bounce" data-v-54f81a0a><svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-54f81a0a><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-54f81a0a></path></svg></div></div><h2 class="text-2xl font-bold text-gray-800 dark:text-gray-200" data-v-54f81a0a> Confirm Deletion </h2>',2)),e("p",be," Are you sure you want to delete item #"+V(u.id)+"? This action cannot be undone. ",1)]),e("div",he,[e("label",{for:"my-modal-delete-"+u.id,class:"btn btn-outline btn-primary flex-1"}," Cancel ",8,ye),e("button",{onClick:x,class:"btn btn-error flex-1 hover:bg-red-700 transition-colors duration-300 group"},d[3]||(d[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2 group-hover:animate-pulse",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),ee(" Delete ")]))])])])],64))}}),we=R(ge,[["__scopeId","data-v-54f81a0a"]]),_e=h=>{if(!h)return"";let _;if(h.includes("T"))_=new Date(h);else{const b=h.split("/");_=new Date(`${b[2]}-${b[1]}-${b[0]}`)}return _.toISOString().split("T")[0]},xe=h=>{const _=h.split("/");return new Date(_[2]+"/"+_[1]+"/"+_[0]).toISOString().substr(0,16)},ke=h=>h?h.toString():"",$e={key:0},Ve={key:1},Ce={key:2},Me={key:3},Se={key:4},je={key:5},Ue={key:6},Be={key:7},De={key:8},Pe={key:9},Fe={key:10},Oe={key:11},Te={key:12},Ee={key:13},ze={class:"form-control mt-1"},Ae={class:"label"},Ie={class:"label-text"},He=["onKeyup","onUpdate:modelValue"],Le={class:"flex justify-center bg-base-100 rounded mt-5"},Ke=["innerHTML"],We={key:14},A={__name:"formbuilder",props:{columns:{type:Array,default:()=>[]},modelValue:{type:Object,default:()=>({})},editMode:{type:String,default:"false"}},emits:["onFormUpdate"],setup(h,{emit:_}){const b=h,u=_;let s=$([]);const x=()=>{s.value=[],b.columns.forEach(o=>{var a;const p=b.editMode==="false",t=b.editMode==="true";if(p&&o.canCreate||t&&o.canEdit){let n="";p?(o.type==="Toggle"||o.type==="boolean")&&(n=!1):t&&(n=v(o,b.modelValue));const f=((a=o==null?void 0:o.options)==null?void 0:a.select_options)||(o==null?void 0:o.select_options),k={key:o.key,label:o.label,type:o.type,nullable:o==null?void 0:o.nullable,unique:o==null?void 0:o.unique,endpoint:o==null?void 0:o.endpoint,displayKey:o==null?void 0:o.displayKey,columns:o==null?void 0:o.columns,model:o==null?void 0:o.model,singleSearch:o==null?void 0:o.singleSearch,relation:o==null?void 0:o.relation,value:n,select_options:f};s.value.push(k)}}),b.editMode==="true"&&u("onFormUpdate",s.value)},v=(o,p)=>{switch(o.type){case"date":return _e(p[o.key]);case"timestamp":return xe(p[o.key]);case"media":case"model_search":case"pivot_model":case"boolean":case"chips":return p[o.key];default:return ke(p[o.key])}};let d=$(null);T(()=>s.value,()=>{clearTimeout(d.value),d.value=setTimeout(()=>{u("onFormUpdate",s.value)},500)},{deep:!0});const m=(o,p,t)=>{if(t==="name"||t==="title"){const l=s.value.findIndex(a=>a.key==="slug");l!==-1&&(s.value[l].value=o.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,""))}};return J(x),(o,p)=>(r(),i("div",null,[(r(!0),i(C,null,S(c(s),(t,l)=>(r(),i("div",{key:l},[t.type=="text"?(r(),i("div",$e,[w(c(O),{type:"text",modelValue:c(s)[l].value,"onUpdate:modelValue":a=>c(s)[l].value=a,label:t.label,onKeyup:a=>m(a.target.value,t.type,t.key)},null,8,["modelValue","onUpdate:modelValue","label","onKeyup"])])):t.type=="password"?(r(),i("div",Ve,[w(c(ne),{modelValue:c(s)[l].value,"onUpdate:modelValue":a=>c(s)[l].value=a,label:t.label},null,8,["modelValue","onUpdate:modelValue","label"])])):t.type=="email"?(r(),i("div",Ce,[w(c(O),{type:"email",modelValue:c(s)[l].value,"onUpdate:modelValue":a=>c(s)[l].value=a,label:t.label},null,8,["modelValue","onUpdate:modelValue","label"])])):t.type=="date"?(r(),i("div",Me,[w(c(O),{type:"date",modelValue:c(s)[l].value,"onUpdate:modelValue":a=>c(s)[l].value=a,label:t.label},null,8,["modelValue","onUpdate:modelValue","label"])])):t.type=="timestamp"?(r(),i("div",Se,[w(c(O),{type:"datetime-local",modelValue:c(s)[l].value,"onUpdate:modelValue":a=>c(s)[l].value=a,label:t.label},null,8,["modelValue","onUpdate:modelValue","label"])])):t.type=="slug"?(r(),i("div",je,[w(c(O),{type:"text",modelValue:c(s)[l].value,"onUpdate:modelValue":a=>c(s)[l].value=a,label:t.label},null,8,["modelValue","onUpdate:modelValue","label"])])):t.type=="media"?(r(),i("div",Ue,[w(c(ie),{label:"image",placeholder:"search",modelValue:c(s)[l].value,"onUpdate:modelValue":a=>c(s)[l].value=a,loadData:c(s)[l].value,endpoint:t.endpoint},null,8,["modelValue","onUpdate:modelValue","loadData","endpoint"])])):t.type=="number"?(r(),i("div",Be,[w(c(O),{type:"number",modelValue:c(s)[l].value,"onUpdate:modelValue":a=>c(s)[l].value=a,label:t.label,onKeyup:a=>m(a.target.value,t.type,t.key)},null,8,["modelValue","onUpdate:modelValue","label","onKeyup"])])):t.type=="model_search"?(r(),i("div",De,[w(c(q),{label:t.label,placeholder:"search",model:t.model,columns:t.columns,singleMode:t.singleSearch,modelValue:c(s)[l].value,"onUpdate:modelValue":a=>c(s)[l].value=a,loadData:c(s)[l].value,endpoint:t.endpoint,displayKey:t.displayKey},null,8,["label","model","columns","singleMode","modelValue","onUpdate:modelValue","loadData","endpoint","displayKey"])])):t.type=="pivot_model"?(r(),i("div",Pe,[w(c(q),{label:t.label,placeholder:"search",model:t.model,columns:t.columns,singleMode:t.singleSearch,modelValue:c(s)[l].value,"onUpdate:modelValue":a=>c(s)[l].value=a,loadData:c(s)[l].value,endpoint:t.endpoint,displayKey:t.displayKey},null,8,["label","model","columns","singleMode","modelValue","onUpdate:modelValue","loadData","endpoint","displayKey"])])):t.type=="Toggle"?(r(),i("div",Fe,[w(c(Y),{modelValue:c(s)[l].value,"onUpdate:modelValue":a=>c(s)[l].value=a,label:t.label},null,8,["modelValue","onUpdate:modelValue","label"])])):t.type=="boolean"?(r(),i("div",Oe,[w(c(Y),{modelValue:c(s)[l].value,"onUpdate:modelValue":a=>c(s)[l].value=a,label:t.label},null,8,["modelValue","onUpdate:modelValue","label"])])):t.type=="chips"?(r(),i("div",Te,[w(c(de),{modelValue:c(s)[l].value,"onUpdate:modelValue":a=>c(s)[l].value=a,label:t.label},null,8,["modelValue","onUpdate:modelValue","label"])])):t.type=="icon"?(r(),i("div",Ee,[e("label",ze,[e("div",Ae,[e("span",Ie,V(t.label),1)]),E(e("textarea",{class:"textarea textarea-primary h-24",onKeyup:a=>m(a.target.value,t.type,t.key),"onUpdate:modelValue":a=>c(s)[l].value=a,placeholder:"Bio"},null,40,He),[[Q,c(s)[l].value]])]),e("div",Le,[e("div",{class:"flex p-10 w-52",innerHTML:c(s)[l].value},null,8,Ke)])])):t.type=="select"?(r(),i("div",We,[w(c(re),{modelValue:c(s)[l].value,"onUpdate:modelValue":a=>c(s)[l].value=a,label:t.label,options:t.select_options},null,8,["modelValue","onUpdate:modelValue","label","options"])])):P("",!0)]))),128))]))}},Ne={class:"modal text-left"},Re={key:0,class:"modal-box w-11/12 max-w-5xl border border-primary shadow-primary shadow-2xl relative"},qe={class:"w-full space-y-4"},Ye={key:0,class:"w-full rounded-lg"},Je={class:"text-left"},Qe={key:1,class:"w-full bg-base-300 border border-secondary rounded-3xl text-neutral-content p-6"},Xe={key:1,class:"modal-box w-11/12 max-w-5xl"},Ze={__name:"create",props:{columns:{type:Array,default:()=>[]},model:{type:String,default:()=>[]},endpoint:{type:String,default:()=>[]},permission:{type:String,default:null}},emits:["onCreate"],setup(h,{emit:_}){const b=I(),u=h,s=_,x=j(()=>u.columns.some(p=>p.canCreate)),v=j(()=>{const p=u.columns.filter(n=>n.section),t=u.columns.filter(n=>!n.section),l=[...new Set(p.map(n=>n.section))],a=l.map(n=>({section:n,fields:p.filter(f=>f.section===n)}));return{sections:l,fields:t,sectionsWithFields:a}});let d=$(u.columns.filter(p=>p.canCreate));const m=p=>{d.value.length>0?p.forEach(t=>{const l=d.value.findIndex(a=>a.key===t.key);l!==-1&&(d.value[l]=t)}):d.value=p},o=async()=>{var p,t;try{const l=await H.post(u.endpoint,{model:u.model,data:d.value,permission:u.permission});b.success(l.data.message),s("onCreate"),document.getElementById("my-modal-5").checked=!1}catch(l){const a=((t=(p=l.response)==null?void 0:p.data)==null?void 0:t.errors)||{};Object.values(a).forEach(n=>{b.error(n[0])})}};return(p,t)=>(r(),i(C,null,[t[5]||(t[5]=z('<label for="my-modal-5" class="btn btn-primary modal-button flex items-center space-x-2 group"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 transition-transform group-hover:rotate-45" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4"></path></svg><span class="hidden md:inline">Create New</span></label><input type="checkbox" id="my-modal-5" class="modal-toggle">',2)),e("div",Ne,[x.value?(r(),i("div",Re,[t[3]||(t[3]=e("div",{class:"modal-header flex justify-between items-center mb-4"},[e("h3",{class:"font-bold text-lg text-base-content"},"Create New Entry"),e("label",{for:"my-modal-5",class:"btn btn-sm btn-circle absolute right-2 top-2 hover:bg-base-200"}," ✕ ")],-1)),e("div",qe,[v.value.sectionsWithFields.length>0?(r(),i("div",Ye,[(r(!0),i(C,null,S(v.value.sectionsWithFields,(l,a)=>(r(),L(c(G),{key:a,as:"div",class:"mb-2"},{default:D(({open:n})=>[w(c(X),{class:"btn btn-ghost w-full justify-between hover:bg-base-200"},{default:D(()=>[e("span",Je,V(l.section),1),(r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",class:N(["h-6 w-6 transition-transform",{"rotate-180":n}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},t[0]||(t[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),_:2},1024),w(c(Z),{class:"p-2 bg-base-100 rounded-b-lg"},{default:D(()=>[w(A,{columns:l.fields,onOnFormUpdate:m},null,8,["columns"])]),_:2},1024)]),_:2},1024))),128))])):P("",!0),v.value.fields.length>0?(r(),i("div",Qe,[w(A,{columns:v.value.fields,onOnFormUpdate:m},null,8,["columns"])])):P("",!0)]),e("div",{class:"modal-action flex justify-end gap-2 pt-3"},[t[2]||(t[2]=e("label",{for:"my-modal-5",class:"btn btn-secondary text-white"}," Close ",-1)),e("button",{onClick:o,class:"btn btn-primary text-white flex items-center space-x-2"},t[1]||(t[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z","clip-rule":"evenodd"})],-1),e("span",null,"Create",-1)]))])])):(r(),i("div",Xe,t[4]||(t[4]=[z('<div class="card w-full bg-base-100 shadow-xl"><figure class="px-10 pt-10"><svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-warning" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg></figure><div class="card-body items-center text-center"><h2 class="card-title text-error">Creation Disabled</h2><p class="text-base-content">You do not have permission to create entries.</p><p class="text-base-content">Please contact your administrator.</p></div></div>',1)])))])],64))}},Ge=["for"],et=["id"],tt={class:"modal"},lt={key:0,class:"modal-box w-11/12 max-w-5xl border border-primary shadow-lg shadow-primary text-neutral-content relative"},ot={class:"modal-header flex justify-between items-center mb-4"},st={class:"font-bold text-lg flex items-center space-x-2"},at=["for"],nt={class:"w-full mt-2"},rt={key:0,class:"w-full rounded-lg p-2 space-y-2"},it={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 transition-transform"},dt={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 transition-transform"},ct={key:1,class:"w-full bg-base-300 border border-secondary rounded-3xl text-neutral-content p-6 mt-4"},ut={class:"flex justify-end gap-4 mt-5"},pt=["for"],mt=["for"],ft={key:1,class:"modal-box w-11/12 max-w-5xl"},vt=W({__name:"edit",props:{columns:{type:Array,default:()=>[]},model:{type:String,default:()=>[]},endpoint:{type:String,default:()=>[]},id:{type:Number,default:0},modelValue:{type:Object,default:()=>({})},permission:{type:String,default:null}},emits:["onEdit"],setup(h,{emit:_}){const b=I(),u=h,s=_,x=j(()=>u.columns.some(p=>p.canEdit)),v=j(()=>{const p=u.columns.filter(n=>n.section),t=u.columns.filter(n=>!n.section),l=[...new Set(p.map(n=>n.section))],a=l.map(n=>({section:n,fields:p.filter(f=>f.section===n)}));return{sections:l,fields:t,sectionsWithFields:a}});let d=$(u.columns.filter(p=>p.canEdit));const m=p=>{d.value.length>0?p.forEach(t=>{const l=d.value.findIndex(a=>a.key===t.key);l!==-1&&(d.value[l]=t)}):d.value=p},o=async()=>{var p,t;try{const l=await H.post(u.endpoint,{model:u.model,id:u.id,data:d.value,permission:u.permission});b.success(l.data.message),s("onEdit");const a=document.getElementById(`edit-data-${u.id}`);a&&(a.checked=!1)}catch(l){const a=((t=(p=l.response)==null?void 0:p.data)==null?void 0:t.errors)||{};Object.values(a).forEach(n=>{b.error(n[0])})}};return(p,t)=>(r(),i(C,null,[e("label",{for:"edit-data-"+u.id,class:"btn btn-info modal-button group transition-all duration-300 hover:scale-105"},t[0]||(t[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 group-hover:rotate-6 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,Ge),e("input",{type:"checkbox",id:"edit-data-"+u.id,class:"modal-toggle"},null,8,et),e("div",tt,[x.value?(r(),i("div",lt,[e("div",ot,[e("h3",st,[e("span",null,"Edit Item #"+V(u.id),1)]),e("label",{for:"edit-data-"+u.id,class:"btn btn-sm btn-circle absolute right-2 top-2 hover:bg-base-200"}," ✕ ",8,at)]),e("div",nt,[v.value.sectionsWithFields.length>0?(r(),i("div",rt,[(r(!0),i(C,null,S(v.value.sectionsWithFields,(l,a)=>(r(),L(c(G),{key:a,as:"div",class:"mt-2",defaultOpen:!0},{default:D(({open:n})=>[w(c(X),{class:"btn btn-primary w-full flex justify-between items-center"},{default:D(()=>[e("span",null,V(l.section),1),n?(r(),i("svg",it,t[1]||(t[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"},null,-1)]))):(r(),i("svg",dt,t[2]||(t[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 5.25l-7.5 7.5-7.5-7.5m15 6l-7.5 7.5-7.5-7.5"},null,-1)])))]),_:2},1024),w(c(Z),{class:"px-4 pt-4 pb-2 text-sm text-gray-500 transition-all duration-300"},{default:D(()=>[w(A,{columns:l.fields,onOnFormUpdate:m,editMode:"true",modelValue:u.modelValue},null,8,["columns","modelValue"])]),_:2},1024)]),_:2},1024))),128))])):P("",!0),v.value.fields.length>0?(r(),i("div",ct,[w(A,{columns:v.value.fields,onOnFormUpdate:m,editMode:"true",modelValue:u.modelValue},null,8,["columns","modelValue"])])):P("",!0)]),e("div",ut,[e("label",{for:"edit-data-"+u.id,class:"btn btn-primary font-bold text-lg text-white hover:bg-primary-focus transition-colors"}," Close ",8,pt),e("label",{for:"edit-data-"+u.id,class:"btn btn-secondary font-bold text-lg text-white hover:bg-secondary-focus transition-colors",onClick:o}," Submit ",8,mt)])])):(r(),i("div",ft,t[3]||(t[3]=[z('<div class="card w-full bg-base-100 shadow-xl"><figure class="px-10 pt-10 animate-pulse"><svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-warning rounded-xl" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg></figure><div class="card-body items-center text-center"><h2 class="card-title text-error">Edit Method Disabled</h2><p class="text-base-content">You do not have permission to edit this item.</p><p class="text-base-content">Please contact your administrator for access.</p></div></div>',1)])))])],64))}}),bt={class:"bg-base-100 shadow-sm rounded-lg p-4 mb-4"},ht={class:"flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0 md:space-x-4"},yt={class:"flex flex-wrap gap-3 items-center w-full md:w-auto"},gt={class:"relative w-full md:w-auto"},wt={class:"relative w-full md:w-auto"},_t=["value"],xt={class:"relative w-full md:w-auto"},kt={class:"flex w-full md:w-auto"},$t={class:"join w-full"},Vt={class:"relative w-full"},Ct={__name:"filter",props:{columns:{type:Array,default:()=>[]}},emits:["onPerPage","onOrderBy","onSearch","onFilter","onFilterReset"],setup(h,{emit:_}){const b=h,u=_,s=$(10),x=$("id"),v=$("asc"),d=$(""),m=$([]),o=(n,f)=>{let k;return(...U)=>{k&&clearTimeout(k),k=setTimeout(()=>{n(...U)},f)}},p=()=>{const n=b.columns.filter(f=>f.sortable);n.length>0&&(x.value=n[0].key),m.value=n.map(f=>({label:f.label,value:f.key}))},t=o(n=>{u("onSearch",n)},500);T(s,n=>{u("onPerPage",n)}),T(v,n=>{u("onOrderBy",n)}),T(x,n=>{u("onFilter",n)}),T(d,n=>{n&&n.length>0&&t(n)});const l=()=>{d.value&&d.value.length>0&&u("onSearch",d.value)},a=()=>{var n;s.value=10,x.value=((n=m.value[0])==null?void 0:n.value)||"id",v.value="asc",d.value="",u("onFilterReset",{perPage:s.value,filterBy:x.value,orderBy:v.value,search:null})};return J(p),(n,f)=>(r(),i("div",bt,[e("div",ht,[e("div",yt,[e("div",gt,[E(e("select",{class:"select select-primary w-full md:w-44","onUpdate:modelValue":f[0]||(f[0]=k=>s.value=k),"aria-label":"Items per page"},f[4]||(f[4]=[e("option",{disabled:"",selected:""},"Per page",-1),e("option",{value:10},"10 Items",-1),e("option",{value:25},"25 Items",-1),e("option",{value:50},"50 Items",-1),e("option",{value:100},"100 Items",-1)]),512),[[K,s.value]])]),e("div",wt,[E(e("select",{class:"select select-primary w-full md:w-44","onUpdate:modelValue":f[1]||(f[1]=k=>x.value=k),"aria-label":"Filter by column"},[f[5]||(f[5]=e("option",{disabled:"",selected:""},"Filter By",-1)),(r(!0),i(C,null,S(m.value,(k,U)=>(r(),i("option",{key:U,value:k.value},V(k.label),9,_t))),128))],512),[[K,x.value]])]),e("div",xt,[E(e("select",{class:"select select-primary w-full md:w-44","onUpdate:modelValue":f[2]||(f[2]=k=>v.value=k),"aria-label":"Sort order"},f[6]||(f[6]=[z('<option disabled selected data-v-99fbb144>Sort Order</option><option value="asc" data-v-99fbb144><span class="flex items-center" data-v-99fbb144><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" viewBox="0 0 20 20" fill="currentColor" data-v-99fbb144><path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" data-v-99fbb144></path></svg> Ascending </span></option><option value="desc" data-v-99fbb144><span class="flex items-center" data-v-99fbb144><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" viewBox="0 0 20 20" fill="currentColor" data-v-99fbb144><path fill-rule="evenodd" d="M10 17a1 1 0 01-.707-.293l-3-3a1 1 0 011.414-1.414L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3A1 1 0 0110 17zm-3.707-9.293a1 1 0 011.414 0L10 5.414l2.293 2.293a1 1 0 001.414-1.414l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 000 1.414z" clip-rule="evenodd" data-v-99fbb144></path></svg> Descending </span></option>',3)]),512),[[K,v.value]])])]),e("div",kt,[e("div",$t,[e("div",Vt,[E(e("input",{class:"input input-bordered join-item w-full pr-10","onUpdate:modelValue":f[3]||(f[3]=k=>d.value=k),placeholder:"Search...",onKeyup:te(l,["enter"]),"aria-label":"Search input"},null,544),[[Q,d.value]]),f[7]||(f[7]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1))]),e("button",{class:"btn btn-primary join-item px-4",onClick:l,"aria-label":"Search"},f[8]||(f[8]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})],-1)])),e("button",{class:"btn btn-secondary join-item px-4",onClick:a,"aria-label":"Reset filters"},f[9]||(f[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})],-1)]))])])])]))}},Mt=R(Ct,[["__scopeId","data-v-99fbb144"]]),St={class:"px-5 py-5 bg-base-200 border-t flex flex-col xs:flex-row items-center xs:justify-between"},jt={class:"xs:text-sm text-primary font-bold text-sm md:text-lg"},Ut={class:"inline-flex mt-2 xs:mt-0"},Bt={class:"btn-group"},Dt=["disabled"],Pt=["onClick"],Ft={key:1,class:"btn btn-md btn-disabled"},Ot=["disabled"],Tt={__name:"pagination",props:{paginationInfo:{type:Object,default:()=>({currentPage:1,lastPage:1,perPage:10,total:0,links:[]})},endpoint:{type:String,default:""}},emits:["onPagiation"],setup(h,{emit:_}){const b=h,u=_,s=j(()=>b.paginationInfo.currentPage||1),x=j(()=>b.paginationInfo.lastPage||1),v=j(()=>b.paginationInfo.perPage||10),d=j(()=>b.paginationInfo.total||0),m=j(()=>{const l=s.value,a=x.value,n=2,f=l-n,k=l+n+1,U=[],F=[];let y;for(let g=1;g<=a;g++)(g===1||g===a||g>=f&&g<k)&&U.push(g);for(const g of U)y&&(g-y===2?F.push(y+1):g-y!==1&&F.push("...")),F.push(g),y=g;return F}),o=l=>{const a=b.endpoint+`?page=${l}`;u("onPagiation",a)},p=()=>{s.value<x.value&&o(s.value+1)},t=()=>{s.value>1&&o(s.value-1)};return(l,a)=>(r(),i("div",St,[e("span",jt," Showing "+V(s.value)+" to "+V(Math.min(s.value*v.value,d.value))+" of "+V(d.value)+" Entries ",1),e("div",Ut,[e("div",Bt,[e("button",{class:"btn btn-md",disabled:s.value===1,onClick:t}," Prev ",8,Dt),(r(!0),i(C,null,S(m.value,(n,f)=>(r(),i(C,{key:f},[typeof n=="number"?(r(),i("button",{key:0,class:N(["btn btn-md",{"btn-active":n===s.value}]),onClick:k=>o(n)},V(n),11,Pt)):n==="..."?(r(),i("span",Ft," ... ")):P("",!0)],64))),128)),e("button",{class:"btn btn-md",disabled:s.value===x.value,onClick:p}," Next ",8,Ot)])])]))}},Et={key:0,class:"flex items-center space-x-2"},zt={class:"carousel rounded-box w-96 max-h-24 overflow-x-auto"},At=["src","alt","onClick"],It=["onClick"],Ht=["innerHTML"],Lt={key:2},Kt={key:3,class:"flex flex-col space-y-1"},Wt=["title","innerHTML"],Nt=["src"],Rt=W({__name:"tableDataDisplay",props:{tableData:{type:Object,default:()=>({})},columns:{type:Array,default:()=>[]}},setup(h){const _=$(null),b=v=>{_.value=v},u=()=>{_.value=null},s=h,x=j(()=>s.columns.map(v=>({label:v.label,type:v.type||"default",value:(()=>{const d=s.tableData[v.key];switch(v.type){case"media":return Array.isArray(d)?d:d?[d]:[];case"model_search":return Array.isArray(d)?d:d?[d]:[];default:return d}})()})));return(v,d)=>(r(),i(C,null,[(r(!0),i(C,null,S(x.value,(m,o)=>(r(),i("th",{key:o,class:"px-4 py-2"},[m.type==="media"?(r(),i("div",Et,[e("div",zt,[(r(!0),i(C,null,S(m.value,(p,t)=>{var l;return r(),i("div",{key:t,class:"carousel-item w-1/2 mr-2 relative group"},[e("img",{src:((l=p.url)==null?void 0:l.default)||p.url,alt:`Media ${t+1}`,class:"w-full h-20 object-cover rounded-md cursor-pointer transition-transform group-hover:scale-105",onClick:a=>{var n;return b(((n=p.url)==null?void 0:n.default)||p.url)}},null,8,At),e("div",{class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-black/50 rounded-full p-1",onClick:a=>{var n;return b(((n=p.url)==null?void 0:n.default)||p.url)}},d[1]||(d[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-white cursor-pointer",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.414-1.414A1 1 0 0011.586 3H8.414a1 1 0 00-.707.293L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"})],-1)]),8,It)])}),128))])])):m.type==="icon"?(r(),i("div",{key:1,class:"bg-base-100 rounded-lg flex justify-center items-center p-2",innerHTML:m.value},null,8,Ht)):m.type==="toggle"?(r(),i("div",Lt,[e("span",{class:N(["badge mt-3",m.value==1?"badge-success":"badge-error"])},V(m.value==1?"Enable":"Disable"),3)])):m.type==="model_search"?(r(),i("div",Kt,[(r(!0),i(C,null,S(m.value,(p,t)=>(r(),i("span",{key:t,class:"badge badge-primary mt-1"},V(t)+" > "+V(p),1))),128))])):(r(),i("div",{key:4,class:"truncate max-w-xs",title:m.value,innerHTML:m.value},null,8,Wt))]))),128)),(r(),L(oe,{to:"body"},[_.value?(r(),i("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75 p-4",onClick:u},[e("div",{class:"max-w-full max-h-full flex items-center justify-center relative",onClick:d[0]||(d[0]=le(()=>{},["stop"]))},[e("img",{src:_.value,alt:"Expanded Image",class:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl"},null,8,Nt),e("button",{onClick:u,class:"absolute top-4 right-4 bg-white/20 hover:bg-white/40 rounded-full p-2 transition-colors"},d[2]||(d[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])):P("",!0)]))],64))}}),qt=R(Rt,[["__scopeId","data-v-1e037550"]]),Yt={class:"w-full"},Jt={class:"relative flex flex-col min-w-0 break-words bg-base-300 w-full mb-6 rounded-3xl"},Qt={class:"flex flex-wrap items-center mt-5"},Xt={class:"relative w-full px-4 max-w-full flex-grow flex-1"},Zt={class:"text-3xl font-extrabold text-base-content"},Gt={class:"relative w-full px-4 max-w-full flex-grow flex-1 text-right"},el={class:"overflow-x-auto p-6"},tl={class:"overflow-x-auto bg-base-100"},ll={class:"table table-compact w-full"},ol={class:"font-bold bg-primary text-neutral"},sl={class:"flex justify-start overflow-x-hidden gap-2"},al={key:1},nl=["for"],rl={class:"font-bold bg-primary text-neutral"},wl={__name:"Table",props:{tableTitle:{type:String,default:"Table name"},columns:{type:Array,default:()=>[]},model:{type:String,default:""},endpoint:{type:String,default:""},endpointDelete:{type:String,default:""},endpointCreate:{type:String,default:""},endpointEdit:{type:String,default:""},permission:{type:String,default:null},custom_edit_route:{type:String,default:null}},setup(h){const _=I();let b=$([]),u=$([]),s=$(10),x=$("id"),v=$(null),d=$(null);const m=h,o=async(y=null)=>{y===null&&(y=m.endpoint),H.post(y,{model:m.model,columns:m.columns,perPage:s.value,search:d.value,sort:x.value,direction:v.value,permission:m.permission}).then(function(g){b.value=g.data.data,u.value={currentPage:g.data.current_page,lastPage:g.data.last_page,perPage:g.data.per_page,total:g.data.total,links:g.data.links}}).catch(function(g){for(const[M,B]of Object.entries(g.response.data.errors))_.error(B[0])})},p=async y=>{o(y)},t=async y=>{s.value=y,o()},l=async y=>{x.value=y,o()},a=async y=>{v.value=y,o()},n=async y=>{y&&y.length>3&&(d.value=y,o())},f=async()=>{o()},k=async()=>{o()},U=async()=>{o()},F=async y=>{s.value=y.perPage,x.value=y.filterBy,v.value=y.orderBy,d.value=y.search,o()};return o(),(y,g)=>(r(),i("div",Yt,[e("div",Jt,[e("div",Qt,[e("div",Xt,[e("h1",Zt,V(m.tableTitle),1)]),e("div",Gt,[se(y.$slots,"new",{},()=>[w(Ze,{columns:m.columns,endpoint:m.endpointCreate,model:m.model,permission:m.permission,onOnCreate:k},null,8,["columns","endpoint","model","permission"])])])]),w(Mt,{onOnPerPage:t,onOnOrderBy:a,onOnSearch:n,onOnFilter:l,onOnFilterReset:F,columns:m.columns},null,8,["columns"]),e("div",el,[e("div",tl,[e("table",ll,[e("thead",ol,[e("tr",null,[(r(!0),i(C,null,S(h.columns,(M,B)=>(r(),i("th",{key:B},V(M.label),1))),128)),g[0]||(g[0]=e("th",null,"Action",-1))])]),e("tbody",null,[(r(!0),i(C,null,S(c(b),(M,B)=>(r(),i("tr",{key:B,class:"font-thin bg-base-300 hover:bg-secondary hover:text-neutral hover:font-bold"},[w(qt,{tableData:M,columns:h.columns},null,8,["tableData","columns"]),e("th",null,[e("div",sl,[h.custom_edit_route?(r(),i("div",al,[w(c(ae),{href:h.custom_edit_route+M.id},{default:D(()=>[e("label",{for:"edit-data-"+M.id,class:"btn btn-info modal-button"},g[1]||(g[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,nl)]),_:2},1032,["href"])])):(r(),L(vt,{key:0,columns:m.columns,endpoint:m.endpointEdit,model:m.model,modelValue:M,id:M.id,permission:m.permission,onOnEdit:U},null,8,["columns","endpoint","model","modelValue","id","permission"])),w(we,{id:M.id,endpoint:m.endpointDelete,model:m.model,permission:m.permission,onOnDelete:f},null,8,["id","endpoint","model","permission"])])])]))),128))]),e("tfoot",rl,[e("tr",null,[(r(!0),i(C,null,S(h.columns,(M,B)=>(r(),i("th",{key:B},V(M.label),1))),128)),g[2]||(g[2]=e("th",null,"Action",-1))])])])]),w(Tt,{onOnPagiation:p,paginationInfo:c(u),endpoint:m.endpoint},null,8,["paginationInfo","endpoint"])])])]))}};export{wl as _};
