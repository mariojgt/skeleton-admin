import{m as S,d7 as M,a as C,p as O,o as p,b as _,w as i,e as a,u as t,d as o,k as f,D as U,E as P,i as $,g as y,H as D,s as b,y as T,t as h,F as B,f as A}from"./preset-b90b9b08.js";import{_ as z,a as V}from"./App-1f22318c.js";import{I as c}from"./Input-75e9a382.js";import"./Password.vue_vue_type_style_index_0_scoped_eed4e79b_lang-f3834945.js";import{_ as H}from"./Submit-5e6379c6.js";import{_ as F}from"./Select.vue_vue_type_script_setup_true_lang-0f699d34.js";import{_ as W}from"./Image.vue_vue_type_script_setup_true_lang-2215c83f.js";import{_ as q}from"./TextMultipleSelector-05047dbc.js";import{_ as G}from"./Toggle-7ddc4411.js";import{m as J,p as K,x,I as Q,y as k}from"./tabs-3113ed32.js";import"./FlashMessage-65cf7e3b.js";import"./search-b1a2db28.js";import"./createLucideIcon-c54a04d6.js";import"./circle-check-big-66a371fd.js";import"./loader-circle-c9275f11.js";import"./triangle-alert-9a3c06c5.js";import"./file-text-046f6174.js";import"./arrow-right-0e40d01d.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./keyboard-8b566b5e.js";import"./use-resolve-button-type-a7c357fc.js";import"./hidden-a6a905be.js";import"./focus-management-bfa3f621.js";const X={class:"form-control"},Y={class:"flex flex-col space-y-4"},Z={key:0,class:"p-4 border rounded-lg bg-base-300"},ee={class:"mb-2"},te={class:"flex space-x-2 mt-4"},le={class:"flex justify-between items-center"},oe={class:"text-lg font-semibold"},ae={class:"space-x-2"},de=["onClick"],re=["onClick"],se={class:"text-sm"},ne={key:0},ie=["href"],ue={key:1},pe={key:2,class:"p-4 bg-base-200 rounded-lg"},ce={class:"mb-2"},me=["onUpdate:modelValue"],be={class:"flex space-x-2 mt-4"},ye=["onClick"],_e=["onClick"],fe={class:"form-control pt-10"},Be={__name:"edit",props:{product:{type:Object,default:()=>({})},image_search_endpoint:{type:String,default:""},dynamicCategorySearch:{type:Object,default:()=>({})},selected_category:{type:Object,default:()=>({})},type_enum:{type:Object,default:()=>({})},price_type_enum:{type:Object,default:()=>({})}},setup(v){const d=v;S(()=>{});const r=M({name:d.product.data.name,slug:d.product.data.slug,description:d.product.data.description,price:d.product.data.price,product_image:d.product.data.media,media:d.product.data.media,category_id:d.product.data.category_id,type:d.product.data.type,price_type:d.product.data.price_type,free_with_subscription:d.product.data.free_with_subscription}),w=()=>{r.patch(route("admin.store.product.update",{product:d.product.data.id}))};let R=C([]),m=C(!1),s=C({title:"",description:"",resource_type:"link",resource_url:"",file_path:""});const g=async()=>{try{const u=await V.get(route("admin.store.product.resources.index",d.product.data.id));R.value=u.data.data}catch(u){console.error("Error loading resources:",u)}},E=async()=>{try{await V.post(route("admin.store.product.resources.store",d.product.data.id),s.value),m.value=!1,g(),s.value={title:"",description:"",resource_type:"link",resource_url:"",file_path:""}}catch(u){console.error("Error creating resource:",u)}},N=async u=>{try{await V.put(route("admin.store.product.resources.update",[d.product.data.id,u.id]),u),g()}catch(l){console.error("Error updating resource:",l)}},j=async u=>{try{await V.delete(route("admin.store.product.resources.destroy",[d.product.data.id,u.id])),g()}catch(l){console.error("Error deleting resource:",l)}};return S(()=>{g()}),(u,l)=>{const I=O("n-card");return p(),_(z,null,{default:i(()=>[a(I,{title:"Product",class:f("col-span-1 row-span-3 shadow-lg xl:col-span-2 bg-base-300")},{default:i(()=>[a(t(J),null,{default:i(()=>[a(t(K),{class:"flex space-x-1 rounded-xl p-1 tabs"},{default:i(()=>[a(t(x),null,{default:i(({selected:e})=>[o("a",{class:f(["tab tab-lg tab-bordered rounded-md bg-neutral",e?"bg-primary text-black":""])},"Deatils",2)]),_:1}),a(t(x),null,{default:i(({selected:e})=>[o("a",{class:f(["tab tab-lg tab-bordered rounded-md bg-neutral",e?"bg-primary text-black":""])},"Media and Description",2)]),_:1}),a(t(x),null,{default:i(({selected:e})=>[o("a",{class:f(["tab tab-lg tab-bordered rounded-md bg-neutral",e?"bg-primary text-black":""])},"Settings",2)]),_:1}),a(t(x),null,{default:i(({selected:e})=>[o("a",{class:f(["tab tab-lg tab-bordered rounded-md bg-neutral",e?"bg-primary text-black":""])},"Add Resources",2)]),_:1})]),_:1}),o("form",{onSubmit:A(w,["prevent"])},[a(t(Q),{class:"mt-2"},{default:i(()=>[a(t(k),null,{default:i(()=>[a(t(c),{modelValue:t(r).name,"onUpdate:modelValue":l[0]||(l[0]=e=>t(r).name=e),label:"Name",type:"text",placeholder:"Name"},null,8,["modelValue"]),a(t(c),{modelValue:t(r).slug,"onUpdate:modelValue":l[1]||(l[1]=e=>t(r).slug=e),label:"slug",type:"text",placeholder:"slug"},null,8,["modelValue"]),a(t(c),{modelValue:t(r).price,"onUpdate:modelValue":l[2]||(l[2]=e=>t(r).price=e),label:"Price",type:"text",placeholder:"slug"},null,8,["modelValue"]),a(t(q),{modelValue:t(r).category_id,"onUpdate:modelValue":l[3]||(l[3]=e=>t(r).category_id=e),label:"Category",placeholder:"search",model:d.dynamicCategorySearch.model,columns:d.dynamicCategorySearch.columns,"single-mode":d.dynamicCategorySearch.singleSearch,"load-data":v.selected_category.data,endpoint:d.dynamicCategorySearch.endpoint},null,8,["modelValue","model","columns","single-mode","load-data","endpoint"])]),_:1}),a(t(k),null,{default:i(()=>[o("label",X,[l[16]||(l[16]=o("div",{class:"label"},[o("span",{class:"label-text"},"Description")],-1)),U(o("textarea",{class:"textarea textarea-bordered w-full",placeholder:"Product Description","onUpdate:modelValue":l[4]||(l[4]=e=>t(r).description=e)},null,512),[[P,t(r).description]])]),a(t(W),{modelValue:t(r).product_image,"onUpdate:modelValue":l[5]||(l[5]=e=>t(r).product_image=e),label:"image",placeholder:"search","load-data":v.product.data.media,endpoint:d.image_search_endpoint},null,8,["modelValue","load-data","endpoint"])]),_:1}),a(t(k),null,{default:i(()=>[a(t(F),{modelValue:t(r).price_type,"onUpdate:modelValue":l[6]||(l[6]=e=>t(r).price_type=e),options:d.price_type_enum,label:"Price type"},null,8,["modelValue","options"]),a(t(F),{modelValue:t(r).type,"onUpdate:modelValue":l[7]||(l[7]=e=>t(r).type=e),options:d.type_enum,label:"Type"},null,8,["modelValue","options"]),a(t(G),{modelValue:t(r).free_with_subscription,"onUpdate:modelValue":l[8]||(l[8]=e=>t(r).free_with_subscription=e),label:"Is Free WIth Subscription"},null,8,["modelValue"])]),_:1}),a(t(k),null,{default:i(()=>[o("div",Y,[o("button",{type:"button",class:"btn btn-primary",onClick:l[9]||(l[9]=e=>$(m)?m.value=!0:m=!0)}," Add New Resource "),t(m)?(p(),y("div",Z,[l[19]||(l[19]=o("h2",{class:"text-xl font-bold mb-2"},"Add New Resource",-1)),a(t(c),{modelValue:t(s).title,"onUpdate:modelValue":l[10]||(l[10]=e=>t(s).title=e),type:"text",label:"Title"},null,8,["modelValue"]),a(t(c),{modelValue:t(s).description,"onUpdate:modelValue":l[11]||(l[11]=e=>t(s).description=e),type:"text",label:"Description"},null,8,["modelValue"]),o("div",ee,[l[18]||(l[18]=o("label",null,"Resource Type",-1)),U(o("select",{"onUpdate:modelValue":l[12]||(l[12]=e=>t(s).resource_type=e),class:"select select-bordered w-full"},l[17]||(l[17]=[o("option",{value:"link"},"Link",-1),o("option",{value:"file"},"File",-1)]),512),[[D,t(s).resource_type]])]),t(s).resource_type==="link"?(p(),_(t(c),{key:0,modelValue:t(s).resource_url,"onUpdate:modelValue":l[13]||(l[13]=e=>t(s).resource_url=e),type:"text",label:"Resource URL"},null,8,["modelValue"])):b("",!0),t(s).resource_type==="file"?(p(),_(t(c),{key:1,modelValue:t(s).file_path,"onUpdate:modelValue":l[14]||(l[14]=e=>t(s).file_path=e),type:"text",label:"File Path"},null,8,["modelValue"])):b("",!0),o("div",te,[o("button",{type:"button",class:"btn btn-success",onClick:E},"Create Resource"),o("button",{type:"button",class:"btn btn-error",onClick:l[15]||(l[15]=e=>$(m)?m.value=!1:m=!1)},"Cancel")])])):b("",!0),(p(!0),y(B,null,T(t(R),(e,L)=>(p(),y("div",{key:L,class:"p-4 border bg-base-100 rounded-lg flex flex-col space-y-2"},[o("div",le,[o("h3",oe,h(e.title),1),o("div",ae,[o("button",{class:"btn btn-secondary",onClick:n=>e.editing=!e.editing},"Edit",8,de),o("button",{class:"btn btn-error",onClick:n=>j(e)},"Delete",8,re)])]),o("p",se,h(e.description),1),e.resource_type==="link"?(p(),y("div",ne,[o("a",{href:e.resource_url,target:"_blank",class:"text-blue-500 underline"},"Open Link",8,ie)])):b("",!0),e.resource_type==="file"?(p(),y("div",ue,[o("span",null,"File: "+h(e.file_path),1)])):b("",!0),e.editing?(p(),y("div",pe,[a(t(c),{modelValue:e.title,"onUpdate:modelValue":n=>e.title=n,type:"text",label:"Title"},null,8,["modelValue","onUpdate:modelValue"]),a(t(c),{modelValue:e.description,"onUpdate:modelValue":n=>e.description=n,type:"text",label:"Description"},null,8,["modelValue","onUpdate:modelValue"]),o("div",ce,[l[21]||(l[21]=o("label",null,"Resource Type",-1)),U(o("select",{"onUpdate:modelValue":n=>e.resource_type=n,class:"select select-bordered w-full"},l[20]||(l[20]=[o("option",{value:"link"},"Link",-1),o("option",{value:"file"},"File",-1)]),8,me),[[D,e.resource_type]])]),e.resource_type==="link"?(p(),_(t(c),{key:0,modelValue:e.resource_url,"onUpdate:modelValue":n=>e.resource_url=n,type:"text",label:"Resource URL"},null,8,["modelValue","onUpdate:modelValue"])):b("",!0),e.resource_type==="file"?(p(),_(t(c),{key:1,modelValue:e.file_path,"onUpdate:modelValue":n=>e.file_path=n,type:"text",label:"File Path"},null,8,["modelValue","onUpdate:modelValue"])):b("",!0),o("div",be,[o("button",{class:"btn btn-success",onClick:n=>N(e)},"Save Changes",8,ye),o("button",{class:"btn btn-error",onClick:n=>e.editing=!1},"Cancel",8,_e)])])):b("",!0)]))),128))])]),_:1})]),_:1})],32)]),_:1}),o("div",fe,[a(t(H),{name:"Update",onClick:w})])]),_:1})]),_:1})}}};export{Be as default};
