import{a as P}from"./index.8b0a764c.js";import{x as B,o as a,i as n,e,F as x,b as f,s as D,y as S,f as y,u as V,z as H,aJ as E,k as M,aK as F,aL as U,t as $,aM as L,j as N,l as R}from"./preset.261e4b82.js";import{_ as O}from"./Input.48046abd.js";import{_ as K}from"./Password.4da4fe52.js";const q=["for"],J=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),G=[J],Q=["id"],W={class:"modal"},X={class:"modal-box w-11/12 max-w-5xl"},Y=["for"],Z=e("h3",{class:"text-lg font-bold"},"This action cannot be undone.",-1),ee=e("p",{class:"py-4"},"Are you sure you want to delete this item?",-1),te={class:"modal-action"},le=["for"],oe=["for"],se={__name:"delete",props:{id:{type:Array,default:()=>[]},model:{type:String,default:()=>[]},endpoint:{type:String,default:()=>[]},permission:{type:String,default:null}},emits:["onDelete"],setup(r,{emit:l}){const t=r,s=B(),d=async()=>{P.post(t.endpoint,{model:t.model,id:t.id,permission:t.permission}).then(function(c){s.success(c.data.message)}).catch(function(c){for(const[p,i]of Object.entries(c.response.data.errors))s.error(i[0])}),l("onDelete")};return(c,p)=>(a(),n(x,null,[e("label",{for:"my-modal-"+t.id,class:"btn btn-error modal-button"},G,8,q),e("input",{type:"checkbox",id:"my-modal-"+t.id,class:"modal-toggle"},null,8,Q),e("div",W,[e("div",X,[e("label",{for:"my-modal-"+t.id,class:"btn btn-sm btn-circle absolute right-2 top-2"},"\u2715",8,Y),Z,ee,e("div",te,[e("label",{for:"my-modal-"+t.id,class:"btn btn-success"},"Close!",8,le),e("label",{for:"my-modal-"+t.id,onClick:d,class:"btn btn-error"},"Delete",8,oe)])])])],64))}},ae=r=>{const l=r.split("/");return new Date(l[2]+"/"+l[1]+"/"+l[0]).toISOString().split("T")[0]},ne=r=>{const l=r.split("/");return new Date(l[2]+"/"+l[1]+"/"+l[0]).toISOString().substr(0,16)},ie=r=>r.toString(),re={key:0},de={key:1},ce={key:2},ue={key:3},pe={key:4},I={__name:"formbuilder",props:{columns:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},editMode:{type:String,default:"false"}},emits:["onFormUpdate"],setup(r,{emit:l}){const t=r;let s=f([]);(()=>{s.value=[];for(const[p,i]of Object.entries(t.columns))if(t.editMode=="false")i.canCreate&&s.value.push({key:i.key,label:i.label,type:i.type,value:""});else if(i.canEdit){let o=null;switch(i.type){case"date":o=ae(t.modelValue[i.key]);break;case"timestamp":o=ne(t.modelValue[i.key]);break;default:o=ie(t.modelValue[i.key]);break}s.value.push({key:i.key,label:i.label,type:i.type,value:o})}})();let c=f(null);return D(()=>s.value,()=>{clearTimeout(c.value),c.value=setTimeout(function(){l("onFormUpdate",s.value)},500)},{deep:!0}),(p,i)=>(a(!0),n(x,null,S(s.value,(o,m)=>(a(),n("div",{key:m},[o.type=="text"?(a(),n("div",re,[y(V(O),{type:"text",modelValue:s.value[m].value,"onUpdate:modelValue":_=>s.value[m].value=_,label:o.label},null,8,["modelValue","onUpdate:modelValue","label"])])):o.type=="password"?(a(),n("div",de,[y(V(K),{modelValue:s.value[m].value,"onUpdate:modelValue":_=>s.value[m].value=_,label:o.label},null,8,["modelValue","onUpdate:modelValue","label"])])):o.type=="email"?(a(),n("div",ce,[y(V(O),{type:"email",modelValue:s.value[m].value,"onUpdate:modelValue":_=>s.value[m].value=_,label:o.label},null,8,["modelValue","onUpdate:modelValue","label"])])):o.type=="date"?(a(),n("div",ue,[y(V(O),{type:"date",modelValue:s.value[m].value,"onUpdate:modelValue":_=>s.value[m].value=_,label:o.label},null,8,["modelValue","onUpdate:modelValue","label"])])):o.type=="timestamp"?(a(),n("div",pe,[y(V(O),{type:"datetime-local",modelValue:s.value[m].value,"onUpdate:modelValue":_=>s.value[m].value=_,label:o.label},null,8,["modelValue","onUpdate:modelValue","label"])])):H("",!0)]))),128))}},me=e("label",{for:"my-modal-5",class:"btn btn-primary modal-button"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})])],-1),_e=e("input",{type:"checkbox",id:"my-modal-5",class:"modal-toggle"},null,-1),ve={class:"modal text-center"},fe={key:0,class:"modal-box w-11/12 max-w-5xl"},he=e("h3",{class:"font-bold text-lg"},"New",-1),be=e("label",{for:"my-modal-5",class:"btn btn-error"},"Close",-1),ye={key:1,class:"modal-box w-11/12 max-w-5xl"},ge=M('<div class="card w-full bg-base-100 shadow-xl"><figure class="px-10 pt-10"><svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 rounded-xl" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg></figure><div class="card-body items-center text-center"><h2 class="card-title">The create method has been disable</h2><p>Try to contact the administrator </p></div></div>',1),we=[ge],xe={__name:"create",props:{columns:{type:Array,default:()=>[]},model:{type:String,default:()=>[]},endpoint:{type:String,default:()=>[]},permission:{type:String,default:null}},emits:["onCreate"],setup(r,{emit:l}){const t=r,s=B(),d=E(()=>t.columns.filter(o=>o.canCreate).length>0);let c=f([]);const p=async o=>{c.value=o},i=async()=>{P.post(t.endpoint,{model:t.model,data:c.value,permission:t.permission}).then(function(o){s.success(o.data.message)}).catch(function(o){for(const[m,_]of Object.entries(o.response.data.errors))s.error(_[0])}),l("onCreate")};return(o,m)=>(a(),n(x,null,[me,_e,e("div",ve,[V(d)?(a(),n("div",fe,[he,y(I,{columns:t.columns,onOnFormUpdate:p},null,8,["columns"]),e("div",{class:"modal-action"},[be,e("label",{for:"my-modal-5",class:"btn btn-success",onClick:i},"Create")])])):(a(),n("div",ye,we))])],64))}},ke=["for"],$e=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),Ve=[$e],Se=["id"],Ce={class:"modal text-center"},De={key:0,class:"modal-box w-11/12 max-w-5xl"},Fe=e("h3",{class:"font-bold text-lg"},"Edit",-1),Oe={class:"modal-action"},Pe=["for"],Be=["for"],Te={key:1,class:"modal-box w-11/12 max-w-5xl"},Ue=M('<div class="card w-full bg-base-100 shadow-xl"><figure class="px-10 pt-10"><svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 rounded-xl" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg></figure><div class="card-body items-center text-center"><h2 class="card-title">The edit method has been disable</h2><p>Try to contact the administrator </p></div></div>',1),Me=[Ue],je={__name:"edit",props:{columns:{type:Array,default:()=>[]},model:{type:String,default:()=>[]},endpoint:{type:String,default:()=>[]},id:{type:String,default:"0"},modelValue:{type:Array,default:()=>[]},permission:{type:String,default:null}},emits:["onEdit"],setup(r,{emit:l}){const t=r,s=B(),d=E(()=>t.columns.filter(o=>o.canEdit).length>0);let c=f([]);const p=async o=>{c.value=o},i=async()=>{P.post(t.endpoint,{model:t.model,id:t.id,data:c.value,permission:t.permission}).then(function(o){s.success(o.data.message)}).catch(function(o){for(const[m,_]of Object.entries(o.response.data.errors))s.error(_[0])}),l("onEdit")};return(o,m)=>(a(),n(x,null,[e("label",{for:"edit-data-"+t.id,class:"btn btn-info modal-button"},Ve,8,ke),e("input",{type:"checkbox",id:"edit-data-"+t.id,class:"modal-toggle"},null,8,Se),e("div",Ce,[V(d)?(a(),n("div",De,[Fe,y(I,{columns:t.columns,onOnFormUpdate:p,editMode:"true",modelValue:t.modelValue},null,8,["columns","modelValue"]),e("div",Oe,[e("label",{for:"edit-data-"+t.id,class:"btn btn-error"},"Close",8,Pe),e("label",{for:"edit-data-"+t.id,class:"btn btn-success",onClick:i},"Edit",8,Be)])])):(a(),n("div",Te,Me))])],64))}},Ae={class:"my-2 flex sm:flex-row flex-col p-6"},Ee={class:"flex flex-row mb-1 sm:mb-0"},Ie={class:"relative pl-4"},ze=M('<option disabled selected>Per page</option><option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',5),He=[ze],Le={class:"relative pl-4"},Ne=e("option",{disabled:"",selected:""},"Row",-1),Re=["value"],Ke={class:"relative pl-4"},qe=e("option",{disabled:"",selected:""},"Order by",-1),Je=e("option",{value:"asc"},"Asc",-1),Ge=e("option",{value:"desc"},"Desc",-1),Qe=[qe,Je,Ge],We={class:"block relative pl-4"},Xe={class:"form-control"},Ye={class:"input-group"},Ze=e("button",{class:"btn btn-square btn-primary"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1),et={__name:"filter",props:{columns:{type:Array,default:()=>[]}},emits:["onPerPage","onOrderBy","onSearch","onFilter","onFilterReset"],setup(r,{emit:l}){const t=r;let s=f(10),d=f("id"),c=f("asc"),p=f(""),i=f([]);(async()=>{for(const[h,v]of Object.entries(t.columns))v.sortable&&(h==0&&(d.value=v.key),i.value.push({label:v.label,value:v.key}))})(),D(()=>s.value,h=>{l("onPerPage",h)}),D(()=>c.value,h=>{l("onOrderBy",h)}),D(()=>d.value,h=>{l("onFilter",h)});let m=f(null);D(()=>p.value,h=>{clearTimeout(m.value),m.value=setTimeout(function(){l("onSearch",h)},500)});const _=async()=>{s.value=10,d.value="id",c.value="asc",p.value=null,l("onFilterReset",[{perPage:s.value,filterBy:d.value,orderBy:c.value,search:p.value}])};return(h,v)=>(a(),n("div",Ae,[e("div",Ee,[e("div",Ie,[F(e("select",{class:"select select-primary w-full max-w-xs","onUpdate:modelValue":v[0]||(v[0]=b=>s.value=b)},He,512),[[U,s.value]])]),e("div",Le,[F(e("select",{class:"select select-primary w-full max-w-xs","onUpdate:modelValue":v[1]||(v[1]=b=>d.value=b),onChange:v[2]||(v[2]=(...b)=>h.filterChange&&h.filterChange(...b))},[Ne,(a(!0),n(x,null,S(i.value,(b,T)=>(a(),n("option",{key:T,value:b.value},$(b.label),9,Re))),128))],544),[[U,d.value]])]),e("div",Ke,[F(e("select",{class:"select select-primary w-full max-w-xs","onUpdate:modelValue":v[3]||(v[3]=b=>c.value=b)},Qe,512),[[U,c.value]])])]),e("div",We,[e("div",Xe,[e("div",Ye,[F(e("input",{type:"text",placeholder:"Search\u2026",class:"input input-bordered","onUpdate:modelValue":v[4]||(v[4]=b=>p.value=b)},null,512),[[L,p.value]]),Ze])])]),e("div",{class:"block relative pl-4"},[e("button",{class:"btn btn-outline btn-accent",onClick:_}," Reset ")])]))}},tt={class:"px-5 py-5 bg-base-200 border-t flex flex-col xs:flex-row items-center xs:justify-between"},lt={class:"text-xs xs:text-sm text-primary"},ot={class:"inline-flex mt-2 xs:mt-0"},st={class:"btn-group"},at=["onClick"],nt=["innerHTML"],it={__name:"pagination",props:{paginationInfo:{type:Array,default:()=>[]}},emits:["onPagiation"],setup(r,{emit:l}){const t=r,s=async d=>{l("onPagiation",d)};return(d,c)=>(a(),n("div",tt,[e("span",lt," Showing "+$(t.paginationInfo.currentPage)+" to "+$(t.paginationInfo.perPage)+" of "+$(t.paginationInfo.total)+" Entries ",1),e("div",ot,[e("div",st,[(a(!0),n(x,null,S(t.paginationInfo.links,(p,i)=>(a(),n("button",{class:N(["btn btn-md",p.active?"btn-active":""]),key:i,onClick:o=>s(p.url)},[e("span",{innerHTML:p.label},null,8,nt)],10,at))),128))])])]))}},rt={__name:"tableDataDisplay",props:{tableData:{type:Array,default:()=>[]}},setup(r){return(l,t)=>(a(!0),n(x,null,S(r.tableData,(s,d)=>(a(),n("th",{key:d},$(s),1))),128))}},dt={class:"w-full mb-12 xl:mb-0"},ct={class:"relative flex flex-col min-w-0 break-words bg-neutral-focus w-full mb-6 shadow-lg rounded"},ut={class:"rounded-t mb-0 px-4 py-3 border-0"},pt={class:"flex flex-wrap items-center"},mt={class:"relative w-full px-4 max-w-full flex-grow flex-1"},_t={class:"text-3xl font-bold"},vt={class:"relative w-full px-4 max-w-full flex-grow flex-1 text-right"},ft={class:"overflow-x-auto p-6"},ht={class:"overflow-x-auto"},bt={class:"table table-compact w-full"},yt=e("th",null,"Action",-1),gt={class:"preview border-base-300 bg-base-200 rounded-b-box rounded-tr-box flex min-h-[6rem] min-w-[18rem] max-w-4xl flex-wrap items-center justify-center overflow-x-hidden border bg-cover bg-top p-4 undefined gap-4"},wt=e("th",null,"Action",-1),St={__name:"Table",props:{tableTitle:{type:String,default:"Table name"},columns:{type:Array,default:()=>[]},model:{type:String,default:""},endpoint:{type:String,default:""},endpointDelete:{type:String,default:""},endpointCreate:{type:String,default:""},endpointEdit:{type:String,default:""},permission:{type:String,default:null}},setup(r){const l=r,t=B(),s=async u=>{g(u)};let d=f(10);const c=async u=>{d.value=u,g()};let p=f("id");const i=async u=>{p.value=u,g()};let o=f(null);const m=async u=>{o.value=u,g()};let _=f(null);const h=async u=>{u&&u.length>3&&(_.value=u,g())},v=async()=>{g()},b=async()=>{g()},T=async()=>{g()},z=async u=>{d.value=u.perPage,p.value=u.filterBy,o.value=u.orderBy,_.value=u.search,g()};let j=f([]),A=f([]);const g=async(u=null)=>{u===null&&(u=l.endpoint),P.post(u,{model:l.model,columns:l.columns,perPage:d.value,search:_.value,sort:p.value,direction:o.value,permission:l.permission}).then(function(k){j.value=k.data.data,A.value={currentPage:k.data.current_page,lastPage:k.data.last_page,perPage:k.data.per_page,total:k.data.total,links:k.data.links}}).catch(function(k){for(const[w,C]of Object.entries(k.response.data.errors))t.error(C[0])})};return g(),(u,k)=>(a(),n("div",dt,[e("div",ct,[e("div",ut,[e("div",pt,[e("div",mt,[e("h1",_t,$(l.tableTitle),1)]),e("div",vt,[R(u.$slots,"new",{},()=>[y(xe,{columns:l.columns,endpoint:l.endpointCreate,model:l.model,permission:l.permission,onOnCreate:b},null,8,["columns","endpoint","model","permission"])])])])]),y(et,{onOnPerPage:c,onOnOrderBy:m,onOnSearch:h,onOnFilter:i,onOnFilterReset:z,columns:l.columns},null,8,["columns"]),e("div",ft,[e("div",ht,[e("table",bt,[e("thead",null,[e("tr",null,[(a(!0),n(x,null,S(r.columns,(w,C)=>(a(),n("th",{key:C},$(w.label),1))),128)),yt])]),e("tbody",null,[(a(!0),n(x,null,S(j.value,(w,C)=>(a(),n("tr",{key:w},[y(rt,{tableData:w},null,8,["tableData"]),e("th",null,[e("div",gt,[y(se,{id:w.id,endpoint:l.endpointDelete,model:l.model,permission:l.permission,onOnDelete:v},null,8,["id","endpoint","model","permission"]),y(je,{columns:l.columns,endpoint:l.endpointEdit,model:l.model,modelValue:w,id:w.id,permission:l.permission,onOnEdit:T},null,8,["columns","endpoint","model","modelValue","id","permission"])])])]))),128))]),e("tfoot",null,[e("tr",null,[(a(!0),n(x,null,S(r.columns,(w,C)=>(a(),n("th",{key:C},$(w.label),1))),128)),wt])])])]),y(it,{onOnPagiation:s,paginationInfo:A.value},null,8,["paginationInfo"])])])]))}};export{St as _};
