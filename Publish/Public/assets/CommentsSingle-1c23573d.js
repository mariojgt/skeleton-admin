import{v as te,bZ as se,a as k,m as ue,o,g as l,d as e,e as n,u as r,x as F,f as H,k as h,D as N,E as L,i as C,t as j,s as i,z as f,F as V,y as T,aU as G,q as B,b as J,X as K,w as de,$ as me}from"./preset-b90b9b08.js";import{a as U}from"./axios-0c773085.js";import{M as ce}from"./message-circle-78d7a2a9.js";import{X as Q}from"./x-b0b4ae59.js";import{C as pe,I as fe}from"./info-b159d59c.js";import{S as ve}from"./send-01c9abcb.js";import{M as be}from"./CommentsSingle.vue_vue_type_style_index_0_scoped_93efcfb2_lang-40f97a7e.js";import{_ as ye}from"./_plugin-vue_export-helper-c27b6911.js";import{_ as E}from"./dynamicIcon.vue_vue_type_script_setup_true_lang-4bfb852c.js";import{C as ge}from"./chevron-down-f54a1641.js";import{c as xe}from"./createLucideIcon-c54a04d6.js";/**
 * @license lucide-vue-next v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=xe("FlagIcon",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),he={class:"fixed inset-0 bg-dark-300/80 backdrop-blur-sm flex items-end justify-center sm:items-center p-4 z-50"},ke={class:"px-6 py-4 border-b border-dark-100 flex items-center justify-between"},we={class:"flex items-center space-x-3"},_e={class:"relative"},Ce={class:"absolute bottom-3 right-3 text-sm text-gray-400"},Se={key:0,class:"mt-2 text-red-400 text-sm flex items-center space-x-1"},$e={class:"mt-6 bg-dark-300/50 rounded-lg p-4"},Ie={class:"flex items-center space-x-2 text-gray-300"},Fe={class:"mt-6 flex items-center justify-end space-x-3"},je=["disabled"],Ae={class:"flex items-center space-x-2"},Me=te({__name:"Comment",props:{modelClass:{type:String,default:""},modelId:{type:Number,default:0},keyEditor:{type:String,default:null},commentClass:{type:String,default:"w-full rounded-lg"}},emits:["fresh-comments","close"],setup(D,{emit:R}){const c=se(),s=k(!1),v=k(!1),d=k(!1),m=D;let p=k(""),w=k("");const _=R;ue(()=>{setTimeout(()=>{s.value=!0},50)});const b=()=>{s.value=!1,setTimeout(()=>{_("close")},300)},S=async()=>{if(p.value.trim()===""){v.value=!0;return}v.value=!1,d.value=!0;const z={title:w.value,comment:p.value,model:m.modelClass,model_id:m.modelId};try{const u=await U.post(route("comment.add"),z);c.success(u.data.message),p.value="",w.value="",_("fresh-comments"),b()}catch(u){for(const[A,P]of Object.entries(u.response.data.errors))c.error(P[0])}finally{d.value=!1}};return(z,u)=>(o(),l("div",he,[e("div",{class:h(["w-full max-w-2xl bg-dark-200 rounded-xl shadow-2xl transform transition-all duration-300 ease-out",{"translate-y-0 opacity-100":s.value,"translate-y-8 opacity-0":!s.value}])},[e("div",ke,[e("div",we,[n(r(ce),{class:"w-5 h-5 text-blue-400"}),u[1]||(u[1]=e("h3",{class:"text-lg font-medium text-white"},"Add Your Comment",-1))]),e("button",{onClick:b,class:"text-gray-400 hover:text-white transition-colors duration-200"},[n(r(Q),{class:"w-5 h-5"})])]),r(F)().props.isUserAuth?(o(),l("form",{key:0,onSubmit:H(S,["prevent"]),class:"p-6"},[e("div",{class:h(m.commentClass)},[e("div",_e,[N(e("textarea",{"onUpdate:modelValue":u[0]||(u[0]=A=>C(p)?p.value=A:p=A),placeholder:"Share your thoughts...",class:h(["w-full min-h-[120px] bg-dark-300 text-gray-200 rounded-lg p-4 border border-dark-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all duration-200 placeholder-gray-500",{"border-red-500":v.value}])},null,2),[[L,r(p)]]),e("div",Ce,j(r(p).length)+" / 1000 ",1)]),v.value?(o(),l("div",Se,[n(r(pe),{class:"w-4 h-4"}),u[2]||(u[2]=e("span",null,"Please enter your comment",-1))])):i("",!0),e("div",$e,[e("div",Ie,[n(r(fe),{class:"w-4 h-4 text-blue-400"}),u[3]||(u[3]=e("span",{class:"text-sm"},"Please follow our community guidelines, you may use markdown syntax.",-1))])]),e("div",Fe,[e("button",{type:"button",onClick:b,class:"px-4 py-2 bg-dark-300 hover:bg-dark-100 text-gray-300 rounded-lg transition-colors duration-200 flex items-center space-x-2"},[n(r(Q),{class:"w-4 h-4"}),u[4]||(u[4]=e("span",null,"Cancel",-1))]),e("button",{type:"submit",disabled:d.value,class:"relative group px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-all duration-200 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed"},[e("div",Ae,[n(r(ve),{class:"w-4 h-4 transition-transform duration-200 group-hover:translate-x-0.5"}),e("span",null,j(d.value?"Sending...":"Submit"),1)])],8,je)])],2)],32)):i("",!0)],2)]))}}),Ee={class:"mt-5 relative"},Ue={key:0,class:"fire-effect"},ze={key:1,class:"featured-stars"},De={key:2,class:"popular-pulse"},Re={key:1,class:"absolute -left-8 top-1/2 -translate-y-1/2"},Pe={class:"flex gap-4"},Ve={class:"flex flex-col items-center"},Te=["src"],Be={class:"mt-1 px-2 py-0.5 bg-dark-500 rounded-full text-xs text-gray-400"},He={key:0,class:"mt-1 px-2 py-0.5 bg-purple-500/20 rounded-full text-xs text-purple-400"},Ne={class:"flex-1"},Le={class:"flex justify-between items-start"},Oe={class:"text-lg font-bold text-white"},qe={class:"text-sm text-gray-400"},Xe={key:0,class:"dropdown dropdown-left"},We={tabindex:"0",class:"btn btn-sm btn-primary"},Ye={tabindex:"0",class:"dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52 gap-2"},Ze={key:0},Ge={key:1},Je={class:"mt-2"},Ke={key:0,class:"text-gray-200 prose prose-invert prose-sm max-w-none"},Qe={class:"flex justify-end gap-2"},et={class:"flex items-center justify-between mt-4"},tt={key:0,class:"fixed inset-0 z-50"},st={class:"fixed inset-0 flex items-center justify-center p-4"},ot={class:"bg-dark-200 rounded-xl p-6 max-w-md w-full"},rt={class:"text-center"},lt={class:"mt-6 flex justify-end space-x-3"},at=te({__name:"CommentsSingle",props:{comment:{type:Object,required:!0},keyEditor:{type:String,default:null},isReply:{type:Boolean,default:!1}},emits:["fresh-comments"],setup(D,{emit:R}){const c=se(),s=D,v=k(!1);let d=k(!1),m=k(!1);const p=f(()=>w.value||_.value||b.value||S.value),w=f(()=>s.comment.likes_last_hour>5),_=f(()=>s.comment.is_helpful>=10),b=f(()=>s.comment.is_featured),S=f(()=>s.comment.is_highlighted),z=f(()=>w.value?"hot-frame":_.value?"popular-frame":b.value?"featured-frame":S.value?"highlighted-frame":""),u=f(()=>w.value?"bg-gradient-to-r from-orange-500/20 via-red-500/20 to-orange-500/20":_.value?"bg-gradient-to-r from-blue-500/20 via-purple-500/20 to-blue-500/20":b.value?"bg-gradient-to-r from-yellow-500/20 via-amber-500/20 to-yellow-500/20":S.value?"bg-gradient-to-r from-green-500/20 via-emerald-500/20 to-green-500/20":""),A=f(()=>w.value?"bg-red-500/90 text-white":_.value?"bg-purple-500/90 text-white":b.value?"bg-yellow-500/90 text-black":S.value?"bg-green-500/90 text-white":""),P=f(()=>w.value?"🔥 Hot":_.value?"⭐ Popular":b.value?"👑 Featured":S.value?"📌 Highlighted":""),O=f(()=>{var g,t,x,I;return((t=(g=F().props.authUserInfo)==null?void 0:g.data)==null?void 0:t.id)===((I=(x=s.comment)==null?void 0:x.user)==null?void 0:I.id)}),oe=f(()=>O.value||F().props.guard==="admin"),re=async()=>{if(F().props.isUserAuth)try{await U.post(route("mark.helpful",s.comment.id)),M()}catch{c.error("Failed to mark as helpful")}},le=async()=>{if(confirm("Are you sure you want to delete this comment?"))try{await U.delete(route("comment.delete",s.comment.id)),c.success("Comment deleted"),M()}catch{c.error("Failed to delete comment")}},ae=async()=>{if(!s.comment.body.trim()){c.error("Comment cannot be empty");return}try{await U.post(route("comment.edit",s.comment.id),{comment:s.comment.body.trim()}),d.value=!1,M()}catch{c.error("Failed to update comment")}},M=()=>{m.value=!1,ne("fresh-comments")},ne=R;let y=k(!1),$=k("");const ie=async()=>{var g,t;if(!$.value.trim()){c.error("Please provide a reason for reporting");return}try{const x=await U.post(route("comment.report",s.comment.id),{reason:$.value.trim()});c.success(x.data.message),y.value=!1,$.value=""}catch(x){(t=(g=x.response)==null?void 0:g.data)!=null&&t.errors?Object.values(x.response.data.errors).forEach(I=>{c.error(I[0])}):c.error("Failed to report comment")}};return(g,t)=>{var x,I,q,X,W,Y,Z;return o(),l("article",Ee,[p.value?(o(),l("div",{key:0,class:h(["absolute -inset-1 rounded-lg z-0",z.value])},[e("div",{class:h(["absolute inset-0",u.value])},null,2),w.value?(o(),l("div",Ue,[(o(),l(V,null,T(3,a=>e("div",{key:a,class:"fire-particle",style:G({animationDelay:`${a*.2}s`})},null,4)),64))])):i("",!0),b.value?(o(),l("div",ze,[(o(),l(V,null,T(5,a=>e("div",{key:a,class:"star-particle",style:G({animationDelay:`${a*.3}s`})},null,4)),64))])):i("",!0),_.value?(o(),l("div",De)):i("",!0)],2)):i("",!0),e("div",{class:h(["relative bg-dark-400 rounded-lg p-4 hover:bg-dark-300 transition-colors duration-200",{"p-5":p.value}])},[p.value?(o(),l("div",{key:0,class:h(["absolute -top-3 left-4 px-3 py-1 rounded-full text-xs font-medium z-10",A.value])},j(P.value),3)):i("",!0),((x=s.comment.replies)==null?void 0:x.length)>0?(o(),l("div",Re,[e("button",{onClick:t[0]||(t[0]=a=>v.value=!v.value),class:"flex items-center justify-center w-6 h-6 rounded-full bg-dark-300 hover:bg-dark-200 transition-colors duration-200"},[n(r(ge),{class:h(["w-4 h-4 text-gray-400 transition-transform duration-200",{"rotate-180":!v.value}])},null,8,["class"])])])):i("",!0),e("div",Pe,[e("div",Ve,[e("img",{src:(q=(I=s.comment)==null?void 0:I.user)==null?void 0:q.avatar,class:"w-16 h-16 rounded-lg",alt:"User Avatar"},null,8,Te),e("div",Be," Level "+j(s.comment.user.level||"1"),1),(W=(X=s.comment)==null?void 0:X.user)!=null&&W.has_subscription?(o(),l("div",He," Premium ")):i("",!0)]),e("div",Ne,[e("div",Le,[e("div",null,[e("h3",Oe,j((Y=s.comment.user)==null?void 0:Y.full_name),1),e("time",qe," Posted "+j(s.comment.created_at_diff),1)]),r(F)().props.isUserAuth?(o(),l("div",Xe,[e("label",We,[n(E,{componentId:"dots"})]),e("ul",Ye,[O.value?(o(),l("li",Ze,[e("button",{onClick:t[1]||(t[1]=a=>C(d)?d.value=!r(d):d=!r(d)),class:"btn btn-secondary btn-sm"},[n(E,{componentId:"edit"}),t[9]||(t[9]=B(" Edit "))])])):i("",!0),oe.value?(o(),l("li",Ge,[e("button",{onClick:le,class:"btn btn-error btn-sm"},[n(E,{componentId:"trash"}),t[10]||(t[10]=B(" Delete "))])])):i("",!0)])])):i("",!0)]),e("div",Je,[r(d)?(o(),l("form",{key:1,onSubmit:H(ae,["prevent"]),class:"space-y-2"},[N(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=a=>s.comment.body=a),class:"textarea textarea-bordered w-full bg-dark-300 text-gray-200",rows:"3"},null,512),[[L,s.comment.body]]),e("div",Qe,[e("button",{type:"button",onClick:t[3]||(t[3]=a=>C(d)?d.value=!1:d=!1),class:"btn btn-sm"}," Cancel "),t[11]||(t[11]=e("button",{type:"submit",class:"btn btn-sm btn-secondary"}," Update ",-1))])],32)):(o(),l("div",Ke,[n(be,{content:s.comment.body},null,8,["content"])]))]),e("div",et,[r(F)().props.guard==="web"?(o(),l("button",{key:0,onClick:re,class:h(["btn btn-sm",s.comment.user_helpful_Comments?"btn-secondary":"btn-primary"])},[n(E,{componentId:s.comment.user_helpful_Comments?"heartSolid":"heart"},null,8,["componentId"]),e("span",null,j(s.comment.is_helpful),1)],2)):i("",!0),e("button",{onClick:t[4]||(t[4]=a=>{C(y)?y.value=!r(y):y=!r(y),g.showActions=!1}),class:"w-full px-3 py-1.5 text-left text-sm text-gray-300 hover:bg-dark-600 flex items-center space-x-2"},[n(r(ee),{class:"w-3 h-3"}),t[12]||(t[12]=e("span",null,"Report Abuse",-1))]),r(F)().props.isUserAuth?(o(),l("button",{key:1,onClick:t[5]||(t[5]=a=>C(m)?m.value=!r(m):m=!r(m)),class:"btn btn-sm btn-secondary"},[n(E,{componentId:"reply"}),t[13]||(t[13]=B(" Reply "))])):i("",!0)])])])],2),(Z=s.comment.replies)!=null&&Z.length?(o(),l("div",{key:1,class:h(["ml-12 space-y-4 relative transition-all duration-300",{"max-h-0 opacity-0 overflow-hidden":v.value,"max-h-[5000px] opacity-100":!v.value}])},[(o(!0),l(V,null,T(s.comment.replies,(a,it)=>(o(),l("div",{key:a.id,class:"relative neon-thread-container"},[t[14]||(t[14]=e("div",{class:"absolute -left-6 top-0 bottom-0 w-px neon-line"},[e("div",{class:"absolute inset-0 bg-purple-500/20"}),e("div",{class:"absolute inset-0 neon-glow"})],-1)),n(nt,{comment:a,"key-editor":s.keyEditor,"is-reply":!0,onFreshComments:M},null,8,["comment","key-editor"])]))),128))],2)):i("",!0),r(m)?(o(),J(K,{key:2,to:"body"},[n(Me,{"model-class":"comment","model-id":s.comment.id,"key-editor":s.keyEditor,onFreshComments:M,onClose:t[6]||(t[6]=a=>C(m)?m.value=!1:m=!1)},null,8,["model-id","key-editor"])])):i("",!0),(o(),J(K,{to:"body"},[n(me,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:de(()=>[r(y)?(o(),l("div",tt,[t[17]||(t[17]=e("div",{class:"absolute inset-0 bg-dark-300/80 backdrop-blur-sm"},null,-1)),e("div",st,[e("div",ot,[e("div",rt,[n(r(ee),{class:"w-12 h-12 text-yellow-400 mx-auto"}),t[15]||(t[15]=e("h3",{class:"mt-4 text-xl font-medium text-white"},"Report Comment",-1))]),e("form",{onSubmit:H(ie,["prevent"]),class:"mt-6"},[N(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=a=>C($)?$.value=a:$=a),placeholder:"Please describe why you're reporting this comment...",class:"w-full bg-dark-300 rounded-lg p-4 text-gray-200 text-sm border border-dark-100 focus:border-yellow-500 focus:ring-1 focus:ring-yellow-500 transition-all duration-200",rows:"4"},null,512),[[L,r($)]]),e("div",lt,[e("button",{type:"button",onClick:t[8]||(t[8]=a=>C(y)?y.value=!1:y=!1),class:"px-4 py-2 bg-dark-300 text-gray-300 rounded-lg hover:bg-dark-100 transition-colors duration-200"}," Cancel "),t[16]||(t[16]=e("button",{type:"submit",class:"px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-colors duration-200"}," Submit Report ",-1))])],32)])])])):i("",!0)]),_:1})]))])}}}),nt=ye(at,[["__scopeId","data-v-93efcfb2"]]);export{nt as S,Me as _};
