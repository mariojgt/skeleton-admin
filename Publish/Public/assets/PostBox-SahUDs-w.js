import{q as le,a as v,k as re,o as n,g as p,d as t,e as a,u as i,l as d,t as j,x as C,y as N,p as T,A as Q,f as B,D as ae,F as V,z as R,n as M,a9 as z,b as $,E as I,w as G,aa as W,G as X,j as ie,i as ne,au as ue}from"./index-DQfThwAa.js";import{a as H}from"./axios-BpmJAKNE.js";import{s as P}from"./index-CToPLI8H.js";import{M as de,S as ce}from"./Markdown-CYFa4jft.js";import{T as pe}from"./triangle-alert-DXWwu_kn.js";import{P as fe,g as me,h as be,i as q,T as _,j as xe,L as ve}from"./App.vue_vue_type_style_index_0_lang-CrOAGMX-.js";import{X as J}from"./x-CvCFfHKA.js";import{a as ge}from"./folder-open-Cmzto3x3.js";import{M as ye}from"./SearchSidebar-BlFUF28l.js";import{E as he}from"./eye-zGwqV_Uz.js";import{F as U,C as D}from"./file-code-D2Q1yH7e.js";import{C as we}from"./chevron-down-DkmsuOEW.js";import{I as ke,C as Ce}from"./info-D7U56PFf.js";import{T as _e}from"./trash-2-DCUdtpRt.js";import{D as Te,B as Ee,I as Se,a as je,Q as Pe}from"./underline-DFmFO3_U.js";import{H as Le}from"./hash-CkE9kVqE.js";import"./purify.es-CocPUCx9.js";/* empty css                                                                       */const Be={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[70]"},De={class:"bg-dark-blue-100 p-6 rounded-xl border border-gray-700 w-full max-w-md"},Me={class:"text-lg font-semibold text-white mb-4 flex items-center gap-2"},$e={class:"text-gray-300 text-sm mb-4"},Fe={class:"text-white font-medium"},Oe={class:"flex justify-end gap-3"},Ae=["disabled"],Ne={class:"w-full max-w-3xl bg-dark-blue-100 rounded-xl shadow-xl border border-gray-700/50"},Ve={class:"flex items-center justify-between p-4 border-b border-gray-700/50"},Re={class:"flex items-center gap-2"},Ue={class:"text-lg font-semibold text-white"},ze={class:"p-4 space-y-4"},Ie={class:"space-y-2"},He={for:"commentTitle",class:"flex items-center gap-2 text-sm font-medium text-gray-300"},qe={key:0,class:"space-y-2"},Je={for:"channel",class:"flex items-center gap-2 text-sm font-medium text-gray-300"},Qe=["value"],Ge={class:"space-y-2"},We={class:"flex items-center gap-2 text-sm font-medium text-gray-300"},Xe={class:"flex border-b border-gray-700/50"},Ye={class:"flex items-center gap-2"},Ke={class:"flex items-center gap-2"},Ze={class:"space-y-2"},et={class:"flex flex-wrap gap-1 p-2 bg-dark-blue-200 rounded-t-lg border border-gray-700"},tt=["onClick","title"],st={class:"relative"},ot={key:0,class:"absolute left-0 top-full mt-1 w-48 py-1 bg-dark-blue-100 rounded-lg border border-gray-700 shadow-xl z-[60]"},lt=["onClick"],rt={class:"min-h-[16rem] p-4 bg-dark-blue-200 rounded-lg border border-gray-700"},at={key:0},it={key:1,class:"text-gray-500 italic"},nt={class:"flex items-center gap-2 text-xs text-gray-500"},ut={class:"flex flex-col sm:flex-row justify-between items-center gap-4 p-4 border-t border-gray-700/50 bg-dark-blue-200/50"},dt={class:"flex items-center text-gray-400 text-sm"},ct={class:"flex gap-2 w-full sm:w-auto"},pt={type:"submit",class:"flex items-center justify-center gap-2 px-6 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 text-sm font-medium transition-colors flex-1 sm:flex-initial"},ft=le({__name:"Post",props:{commentClass:{type:String,default:"w-full rounded-lg"},categories:{type:Array,default:()=>[]},topitEdit:{type:Object,default:()=>({})}},emits:["fresh-comments","close"],setup(L,{emit:F}){const g={mounted:(l,e)=>{l._clickOutside=r=>{l===r.target||l.contains(r.target)||e.value()},document.body.addEventListener("click",l._clickOutside)},unmounted:l=>{document.body.removeEventListener("click",l._clickOutside)}},m=v(!1),E=v(null),h=v(!1),w=v(""),y=v(!1),o=v(""),x=v(""),S=v(""),Y=[{label:"JavaScript",value:"javascript",icon:q},{label:"PHP",value:"php",icon:U},{label:"Python",value:"python",icon:_},{label:"C++",value:"cpp",icon:_},{label:"Java",value:"java",icon:_},{label:"Ruby",value:"ruby",icon:_},{label:"SQL",value:"sql",icon:Te},{label:"HTML",value:"html",icon:D},{label:"CSS",value:"css",icon:D},{label:"TypeScript",value:"typescript",icon:q},{label:"Go",value:"go",icon:_},{label:"Rust",value:"rust",icon:_},{label:"Shell",value:"bash",icon:_},{label:"JSON",value:"json",icon:xe},{label:"XML",value:"xml",icon:D},{label:"YAML",value:"yaml",icon:U}],K=[{label:"Bold",icon:Ee,prefix:"**",suffix:"**"},{label:"Italic",icon:Se,prefix:"*",suffix:"*"},{label:"Code",icon:D,prefix:"`",suffix:"`"},{label:"Heading",icon:Le,prefix:"# ",suffix:""},{label:"List",icon:je,prefix:"- ",suffix:""},{label:"Quote",icon:Pe,prefix:"> ",suffix:""},{label:"Link",icon:ve,prefix:"[",suffix:"](url)"}],b=L,O=F,Z=l=>{const e=E.value;if(!e)return;const r=e.selectionStart,u=e.selectionEnd,f=o.value.substring(r,u),c=["```"+l,f||"Your code here","```",""].join(`
`),s=o.value.substring(0,r),k=o.value.substring(u);o.value=s+c+k,setTimeout(()=>{y.value=!1,e.focus()},100)},ee=l=>{const e=E.value;if(!e)return;const r=e.selectionStart,u=e.selectionEnd,f=o.value.substring(r,u);let c;if(f){const s=o.value.substring(0,r),k=o.value.substring(u);c=s+l.prefix+f+l.suffix+k}else{const s=o.value.substring(0,r),k=o.value.substring(r);c=s+l.prefix+"text"+l.suffix+k}o.value=c,e.focus()},te=async()=>{var e,r,u,f;const l={title:x.value,content:o.value,category:S.value};if(!x.value||!o.value||!((e=b.topitEdit)!=null&&e.id)&&!S.value){P("error","Please fill in all required fields","error");return}try{let c=route("forum.thread.create");(r=b.topitEdit)!=null&&r.id&&(c=route("forum.thread.edit",b.topitEdit.id));const s=await H.post(c,l);P("success",s.data.message,"success"),oe(),O("fresh-comments"),O("close")}catch(c){(f=(u=c.response)==null?void 0:u.data)!=null&&f.errors&&Object.values(c.response.data.errors).forEach(s=>{P("error",s[0],"error")})}},se=async()=>{var l,e,r;if(w.value===x.value)try{const u=await H.delete(route("forum.thread.edit",(l=b.topitEdit)==null?void 0:l.id));P("success",u.data.message,"success"),h.value=!1,X.visit(route("home"),{preserveScroll:"errors"})}catch(u){(r=(e=u.response)==null?void 0:e.data)!=null&&r.errors&&Object.values(u.response.data.errors).forEach(f=>{P("error",f[0],"error")})}},oe=()=>{o.value="",x.value="",S.value="",m.value=!1,h.value=!1,w.value=""},A=()=>{O("close")};return re(()=>{var l;(l=b.topitEdit)!=null&&l.id&&(o.value=b.topitEdit.content,x.value=b.topitEdit.title)}),(l,e)=>{var r,u,f,c;return n(),p("div",{class:"fixed inset-0 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm z-50",onClick:B(A,["self"])},[h.value?(n(),p("div",Be,[t("div",De,[t("h3",Me,[a(i(pe),{class:"w-5 h-5 text-red-400"}),e[9]||(e[9]=d(" Confirm Deletion "))]),t("p",$e,[e[10]||(e[10]=d(" This action cannot be undone. Please type ")),t("span",Fe,j(x.value),1),e[11]||(e[11]=d(" to confirm. "))]),C(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>w.value=s),type:"text",placeholder:"Type post title to confirm",class:"w-full px-3 py-2 bg-dark-blue-200 border border-gray-700 rounded-lg text-white placeholder-gray-500 mb-4"},null,512),[[N,w.value]]),t("div",Oe,[t("button",{type:"button",onClick:e[1]||(e[1]=s=>h.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-400 hover:text-white"}," Cancel "),t("button",{type:"button",onClick:se,disabled:w.value!==x.value,class:"px-4 py-2 bg-red-500 text-white rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," Delete Post ",8,Ae)])])])):T("",!0),t("div",Ne,[i(Q)().props.isUserAuth?(n(),p("form",{key:0,onSubmit:B(te,["prevent"])},[t("div",Ve,[t("div",Re,[a(i(fe),{class:"w-5 h-5 text-purple-400"}),t("h2",Ue,j((r=b.topitEdit)!=null&&r.id?"Edit Discussion":"New Discussion"),1)]),t("button",{type:"button",onClick:A,class:"p-1 text-gray-400 hover:text-white transition-colors"},[a(i(J),{class:"w-5 h-5"})])]),t("div",ze,[t("div",Ie,[t("label",He,[a(i(me),{class:"w-4 h-4"}),e[12]||(e[12]=d(" Title ")),e[13]||(e[13]=t("span",{class:"text-red-400"},"*",-1))]),C(t("input",{id:"commentTitle","onUpdate:modelValue":e[2]||(e[2]=s=>x.value=s),type:"text",placeholder:"What's your topic about?",class:"w-full px-3 py-2 bg-dark-blue-200 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all"},null,512),[[N,x.value]])]),(u=b.topitEdit)!=null&&u.id?T("",!0):(n(),p("div",qe,[t("label",Je,[a(i(ge),{class:"w-4 h-4"}),e[14]||(e[14]=d(" Select Topic ")),e[15]||(e[15]=t("span",{class:"text-red-400"},"*",-1))]),C(t("select",{id:"channel","onUpdate:modelValue":e[3]||(e[3]=s=>S.value=s),class:"w-full px-3 py-2 bg-dark-blue-200 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all appearance-none"},[e[16]||(e[16]=t("option",{value:"",class:"bg-dark-blue-200"},"Choose a category",-1)),(n(!0),p(V,null,R(L.categories,s=>(n(),p("option",{key:s.id,value:s.slug,class:"bg-dark-blue-200"},j(s.name),9,Qe))),128))],512),[[ae,S.value]])])),t("div",Ge,[t("label",We,[a(i(ye),{class:"w-4 h-4"}),e[17]||(e[17]=d(" Content ")),e[18]||(e[18]=t("span",{class:"text-red-400"},"*",-1))]),t("div",Xe,[t("button",{type:"button",class:M(["px-4 py-2 text-sm font-medium transition-colors border-b-2",[m.value?"text-gray-400 border-transparent hover:text-gray-300":"text-purple-400 border-purple-400"]]),onClick:e[4]||(e[4]=s=>m.value=!1)},[t("div",Ye,[a(i(be),{class:"w-4 h-4"}),e[19]||(e[19]=d(" Write "))])],2),t("button",{type:"button",class:M(["px-4 py-2 text-sm font-medium transition-colors border-b-2",[m.value?"text-purple-400 border-purple-400":"text-gray-400 border-transparent hover:text-gray-300"]]),onClick:e[5]||(e[5]=s=>m.value=!0)},[t("div",Ke,[a(i(he),{class:"w-4 h-4"}),e[20]||(e[20]=d(" Preview "))])],2)]),C(t("div",Ze,[t("div",et,[(n(),p(V,null,R(K,s=>t("button",{key:s.label,type:"button",onClick:k=>ee(s),class:"p-1.5 text-gray-400 hover:text-white rounded transition-colors",title:s.label},[(n(),$(I(s.icon),{class:"w-4 h-4"}))],8,tt)),64)),t("div",st,[t("button",{type:"button",onClick:e[6]||(e[6]=B(s=>y.value=!y.value,["stop"])),class:M(["p-1.5 text-gray-400 hover:text-white rounded transition-colors flex items-center gap-1",{"text-purple-400":y.value}]),title:"Insert Code Block"},[a(i(U),{class:"w-4 h-4"}),a(i(we),{class:"w-3 h-3"})],2),a(W,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:G(()=>[y.value?C((n(),p("div",ot,[(n(),p(V,null,R(Y,s=>t("button",{key:s.value,type:"button",onClick:B(k=>Z(s.value),["stop"]),class:"w-full px-4 py-2 text-sm text-left text-gray-300 hover:bg-dark-blue-200 hover:text-white flex items-center gap-2"},[(n(),$(I(s.icon),{class:"w-4 h-4"})),d(" "+j(s.label),1)],8,lt)),64))])),[[g,()=>y.value=!1]]):T("",!0)]),_:1})])]),C(t("textarea",{id:"comment",ref_key:"textareaRef",ref:E,"onUpdate:modelValue":e[7]||(e[7]=s=>o.value=s),placeholder:"Share your thoughts with the community...",class:"w-full h-64 px-4 py-3 bg-dark-blue-200 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all resize-none"},null,512),[[N,o.value]])],512),[[z,!m.value]]),C(t("div",rt,[o.value?(n(),p("div",at,[a(de,{content:o.value},null,8,["content"])])):(n(),p("div",it," Nothing to preview yet... "))],512),[[z,m.value]]),t("div",nt,[a(i(ke),{class:"w-4 h-4"}),e[21]||(e[21]=t("span",null,[d(" Markdown supported: "),t("span",{class:"text-gray-400"},"**bold**, *italic*, `code`, etc.")],-1))])])]),t("div",ut,[t("div",dt,[a(i(Ce),{class:"w-4 h-4 mr-2"}),e[22]||(e[22]=d(" Please follow community guidelines "))]),t("div",ct,[t("button",{type:"button",onClick:A,class:"flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium text-gray-400 hover:text-white transition-colors flex-1 sm:flex-initial"},[a(i(J),{class:"w-4 h-4"}),e[23]||(e[23]=d(" Cancel "))]),(f=b.topitEdit)!=null&&f.id?(n(),p("button",{key:0,type:"button",onClick:e[8]||(e[8]=s=>h.value=!0),class:"flex items-center justify-center gap-2 px-4 py-2 bg-red-500/10 text-red-400 rounded-lg hover:bg-red-500/20 text-sm font-medium transition-colors flex-1 sm:flex-initial"},[a(i(_e),{class:"w-4 h-4"}),e[24]||(e[24]=d(" Delete "))])):T("",!0),t("button",pt,[a(i(ce),{class:"w-4 h-4"}),d(" "+j((c=b.topitEdit)!=null&&c.id?"Update":"Post"),1)])])])],32)):T("",!0)])])}}}),mt={class:"mt-3 bg-dark-100 rounded-lg"},Mt={__name:"PostBox",props:{categories:{type:Array,default:()=>[]},postBtnClass:{type:String,default:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold py-2 px-4 rounded-lg mb-6"},topitEdit:{type:Object,default:()=>{}}},emits:["displayLogin"],setup(L,{emit:F}){let g=v(!1);const m=L,E=()=>{setTimeout(()=>{X.reload({only:["blogPost"]})},300)},h=F,w=()=>{if(!Q().props.isUserAuth){h("displayLogin",!0);return}g.value=!g.value};return(y,o)=>(n(),p("section",mt,[t("button",{class:M(m.postBtnClass),onClick:w},[ie(y.$slots,"default",{},()=>[o[1]||(o[1]=d("New Dicussion"))])],2),(n(),$(ue,{to:"body"},[a(W,{name:"fade"},{default:G(()=>[i(g)?(n(),$(ft,{key:0,onFreshComments:E,onClose:o[0]||(o[0]=x=>ne(g)?g.value=!1:g=!1),categories:m.categories,topitEdit:m.topitEdit},null,8,["categories","topitEdit"])):T("",!0)]),_:1})]))]))}};export{Mt as _};
