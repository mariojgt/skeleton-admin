import{a as y,k as x,m as g,b as _,o as f,w as n,d as o,n as d,u as e,e as r,f as U,p as C,i as h,W as I}from"./index-TEoLjiFV.js";import{_ as w}from"./App-BAbX53a0.js";import B from"./DeployTable-CEWgSH2K.js";import L from"./DeployStatus-BE518wY1.js";import{I as s}from"./Input.vue_vue_type_style_index_0_scoped_a29b7091_lang-CyeYYPsD.js";import{_ as N}from"./Submit-DZTN80cJ.js";import{T as R,_ as D}from"./Chips.vue_vue_type_script_setup_true_lang-C0cLhV8d.js";import{m as M,p as T,x as c,I as $,y as b}from"./tabs-B_-IEi1V.js";import"./FlashMessage-DjUSHbDR.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./format-CzROIt5r.js";import"./keyboard-WzBpS7Yk.js";const S={class:"form-control pt-10"},K={__name:"Edit",props:{deploy:{type:Object,default:()=>({})},deploymentLogs:{type:Array,default:()=>[]}},setup(p){const V=p;let l=y({});x(()=>{l.value=V.deploy});let m=y(null);const u=()=>{const i={name:l.value.name,repository_url:l.value.repository_url,branch:l.value.branch,secret_token:l.value.secret_token,is_active:l.value.is_active,deployment_commands:l.value.deployment_commands,deployment_path:l.value.deployment_path};I.post(route("admin.deploy.update",l.value.id),i)},v=()=>{l.value.secret_token=Math.random().toString(36).substring(2).toUpperCase()+Math.random().toString(36).substring(2).toUpperCase()};return(i,a)=>{const k=g("n-card");return f(),_(w,null,{default:n(()=>[o(k,{title:"User Profile",class:d("col-span-1 row-span-3 shadow-lg xl:col-span-2 bg-base-300")},{default:n(()=>[o(e(M),null,{default:n(()=>[o(e(T),{class:"flex space-x-1 rounded-xl p-1 tabs"},{default:n(()=>[o(e(c),null,{default:n(({selected:t})=>[r("a",{class:d(["tab tab-lg tab-bordered",t?"tab-active":""])},"Deploy Information",2)]),_:1}),o(e(c),null,{default:n(({selected:t})=>[r("a",{class:d(["tab tab-lg tab-bordered",t?"tab-active":""])},"Last Deployment",2)]),_:1})]),_:1}),o(e($),{class:"mt-2"},{default:n(()=>[o(e(b),null,{default:n(()=>[r("form",{onSubmit:U(u,["prevent"])},[o(e(s),{modelValue:e(l).name,"onUpdate:modelValue":a[0]||(a[0]=t=>e(l).name=t),label:"Name",type:"text",placeholder:"Name"},null,8,["modelValue"]),o(e(s),{modelValue:e(l).repository_url,"onUpdate:modelValue":a[1]||(a[1]=t=>e(l).repository_url=t),label:"Repository URL",type:"text",placeholder:"Repository URL"},null,8,["modelValue"]),o(e(s),{modelValue:e(l).branch,"onUpdate:modelValue":a[2]||(a[2]=t=>e(l).branch=t),label:"Branch",type:"text",placeholder:"Branch"},null,8,["modelValue"]),o(e(s),{modelValue:e(l).secret_token,"onUpdate:modelValue":a[3]||(a[3]=t=>e(l).secret_token=t),label:"secret_token",type:"text",placeholder:"secret_token",required:"true"},null,8,["modelValue"]),r("div",{class:"form-control pt-10"},[r("button",{onClick:v,type:"button",class:"btn btn-primary"}," Generate Token ")]),o(e(R),{modelValue:e(l).is_active,"onUpdate:modelValue":a[4]||(a[4]=t=>e(l).is_active=t),label:"Is Active"},null,8,["modelValue"]),o(e(D),{modelValue:e(l).deployment_commands,"onUpdate:modelValue":a[5]||(a[5]=t=>e(l).deployment_commands=t),label:"Deployment Commands"},null,8,["modelValue"]),o(e(s),{modelValue:e(l).deployment_path,"onUpdate:modelValue":a[6]||(a[6]=t=>e(l).deployment_path=t),label:"deployment_path",type:"text",placeholder:"deployment_path",required:"true"},null,8,["modelValue"]),r("div",S,[o(e(N),{name:"update",onClick:u})])],32)]),_:1}),o(e(b),null,{default:n(()=>[o(B,{deployments:p.deploymentLogs.data,onViewDeployment:a[7]||(a[7]=t=>h(m)?m.value=t:m=t)},null,8,["deployments"]),e(m)?(f(),_(L,{key:0,deployment:e(m)},null,8,["deployment"])):C("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{K as default};
