import{o as p,A as E,T as K,i as U,N as R,u as N,a as g}from"./keyboard-ClX3uzSK.js";import{s as J}from"./use-resolve-button-type-rIUKilHP.js";import{u as Q,f as W}from"./hidden-CmFwULki.js";import{q as F,a as P,h as j,v as m,ai as M,k as C,B as V,aj as X,F as Y,C as z,ak as q}from"./index-DQfThwAa.js";import{O as k,T as D,t as Z,i as _,P as A,N as T}from"./focus-management-C76-Xa0a.js";let ee=F({props:{onFocus:{type:Function,required:!0}},setup(e){let d=P(!0);return()=>d.value?j(W,{as:"button",type:"button",features:Q.Focusable,onFocus(c){c.preventDefault();let v,f=50;function r(){var l;if(f--<=0){v&&cancelAnimationFrame(v);return}if((l=e.onFocus)!=null&&l.call(e)){d.value=!1,cancelAnimationFrame(v);return}v=requestAnimationFrame(r)}v=requestAnimationFrame(r)}}):null}});var te=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(te||{}),ae=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(ae||{});let H=Symbol("TabsContext");function B(e){let d=q(H,null);if(d===null){let c=new Error(`<${e} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(c,B),c}return d}let G=Symbol("TabsSSRContext"),oe=F({name:"TabGroup",emits:{change:e=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:d,attrs:c,emit:v}){var f;let r=P((f=e.selectedIndex)!=null?f:e.defaultIndex),l=P([]),u=P([]),x=m(()=>e.selectedIndex!==null),w=m(()=>x.value?e.selectedIndex:r.value);function h(a){var n;let o=k(s.tabs.value,p),t=k(s.panels.value,p),i=o.filter(I=>{var y;return!((y=p(I))!=null&&y.hasAttribute("disabled"))});if(a<0||a>o.length-1){let I=N(r.value===null?0:Math.sign(a-r.value),{[-1]:()=>1,0:()=>N(Math.sign(a),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),y=N(I,{0:()=>o.indexOf(i[0]),1:()=>o.indexOf(i[i.length-1])});y!==-1&&(r.value=y),s.tabs.value=o,s.panels.value=t}else{let I=o.slice(0,a),y=[...o.slice(a),...I].find(L=>i.includes(L));if(!y)return;let S=(n=o.indexOf(y))!=null?n:s.selectedIndex.value;S===-1&&(S=s.selectedIndex.value),r.value=S,s.tabs.value=o,s.panels.value=t}}let s={selectedIndex:m(()=>{var a,n;return(n=(a=r.value)!=null?a:e.defaultIndex)!=null?n:null}),orientation:m(()=>e.vertical?"vertical":"horizontal"),activation:m(()=>e.manual?"manual":"auto"),tabs:l,panels:u,setSelectedIndex(a){w.value!==a&&v("change",a),x.value||h(a)},registerTab(a){var n;if(l.value.includes(a))return;let o=l.value[r.value];if(l.value.push(a),l.value=k(l.value,p),!x.value){let t=(n=l.value.indexOf(o))!=null?n:r.value;t!==-1&&(r.value=t)}},unregisterTab(a){let n=l.value.indexOf(a);n!==-1&&l.value.splice(n,1)},registerPanel(a){u.value.includes(a)||(u.value.push(a),u.value=k(u.value,p))},unregisterPanel(a){let n=u.value.indexOf(a);n!==-1&&u.value.splice(n,1)}};M(H,s);let b=P({tabs:[],panels:[]}),O=P(!1);C(()=>{O.value=!0}),M(G,m(()=>O.value?null:b.value));let $=m(()=>e.selectedIndex);return C(()=>{V([$],()=>{var a;return h((a=e.selectedIndex)!=null?a:e.defaultIndex)},{immediate:!0})}),X(()=>{if(!x.value||w.value==null||s.tabs.value.length<=0)return;let a=k(s.tabs.value,p);a.some((n,o)=>p(s.tabs.value[o])!==p(n))&&s.setSelectedIndex(a.findIndex(n=>p(n)===p(s.tabs.value[w.value])))}),()=>{let a={selectedIndex:r.value};return j(Y,[l.value.length<=0&&j(ee,{onFocus:()=>{for(let n of l.value){let o=p(n);if((o==null?void 0:o.tabIndex)===0)return o.focus(),!0}return!1}}),E({theirProps:{...c,...K(e,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:a,slots:d,attrs:c,name:"TabGroup"})])}}}),ie=F({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:d,slots:c}){let v=B("TabList");return()=>{let f={selectedIndex:v.selectedIndex.value},r={role:"tablist","aria-orientation":v.orientation.value};return E({ourProps:r,theirProps:e,slot:f,attrs:d,slots:c,name:"TabList"})}}}),de=F({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{attrs:d,slots:c,expose:v}){var f;let r=(f=e.id)!=null?f:`headlessui-tabs-tab-${U()}`,l=B("Tab"),u=P(null);v({el:u,$el:u}),C(()=>l.registerTab(u)),z(()=>l.unregisterTab(u));let x=q(G),w=m(()=>{if(x.value){let t=x.value.tabs.indexOf(r);return t===-1?x.value.tabs.push(r)-1:t}return-1}),h=m(()=>{let t=l.tabs.value.indexOf(u);return t===-1?w.value:t}),s=m(()=>h.value===l.selectedIndex.value);function b(t){var i;let I=t();if(I===D.Success&&l.activation.value==="auto"){let y=(i=_(u))==null?void 0:i.activeElement,S=l.tabs.value.findIndex(L=>p(L)===y);S!==-1&&l.setSelectedIndex(S)}return I}function O(t){let i=l.tabs.value.map(I=>p(I)).filter(Boolean);if(t.key===g.Space||t.key===g.Enter){t.preventDefault(),t.stopPropagation(),l.setSelectedIndex(h.value);return}switch(t.key){case g.Home:case g.PageUp:return t.preventDefault(),t.stopPropagation(),b(()=>A(i,T.First));case g.End:case g.PageDown:return t.preventDefault(),t.stopPropagation(),b(()=>A(i,T.Last))}if(b(()=>N(l.orientation.value,{vertical(){return t.key===g.ArrowUp?A(i,T.Previous|T.WrapAround):t.key===g.ArrowDown?A(i,T.Next|T.WrapAround):D.Error},horizontal(){return t.key===g.ArrowLeft?A(i,T.Previous|T.WrapAround):t.key===g.ArrowRight?A(i,T.Next|T.WrapAround):D.Error}}))===D.Success)return t.preventDefault()}let $=P(!1);function a(){var t;$.value||($.value=!0,!e.disabled&&((t=p(u))==null||t.focus({preventScroll:!0}),l.setSelectedIndex(h.value),Z(()=>{$.value=!1})))}function n(t){t.preventDefault()}let o=J(m(()=>({as:e.as,type:d.type})),u);return()=>{var t,i;let I={selected:s.value,disabled:(t=e.disabled)!=null?t:!1},{...y}=e,S={ref:u,onKeydown:O,onMousedown:n,onClick:a,id:r,role:"tab",type:o.value,"aria-controls":(i=p(l.panels.value[h.value]))==null?void 0:i.id,"aria-selected":s.value,tabIndex:s.value?0:-1,disabled:e.disabled?!0:void 0};return E({ourProps:S,theirProps:y,slot:I,attrs:d,slots:c,name:"Tab"})}}}),ve=F({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:d,attrs:c}){let v=B("TabPanels");return()=>{let f={selectedIndex:v.selectedIndex.value};return E({theirProps:e,ourProps:{},slot:f,attrs:c,slots:d,name:"TabPanels"})}}}),pe=F({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(e,{attrs:d,slots:c,expose:v}){var f;let r=(f=e.id)!=null?f:`headlessui-tabs-panel-${U()}`,l=B("TabPanel"),u=P(null);v({el:u,$el:u}),C(()=>l.registerPanel(u)),z(()=>l.unregisterPanel(u));let x=q(G),w=m(()=>{if(x.value){let b=x.value.panels.indexOf(r);return b===-1?x.value.panels.push(r)-1:b}return-1}),h=m(()=>{let b=l.panels.value.indexOf(u);return b===-1?w.value:b}),s=m(()=>h.value===l.selectedIndex.value);return()=>{var b;let O={selected:s.value},{tabIndex:$,...a}=e,n={ref:u,id:r,role:"tabpanel","aria-labelledby":(b=p(l.tabs.value[h.value]))==null?void 0:b.id,tabIndex:s.value?$:-1};return!s.value&&e.unmount&&!e.static?j(W,{as:"span","aria-hidden":!0,...n}):E({ourProps:n,theirProps:a,slot:O,attrs:d,slots:c,features:R.Static|R.RenderStrategy,visible:s.value,name:"TabPanel"})}}});export{ve as I,oe as m,ie as p,de as x,pe as y};
