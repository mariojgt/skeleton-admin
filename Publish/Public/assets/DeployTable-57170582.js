import{a as u,z as h,o as a,g as i,d as t,D as p,E as P,G as f,s as d,v as _,F as R,y as F,t as n,k as I,C}from"./preset-dc82439c.js";const N={class:"container mx-auto py-6"},U={class:"mb-6"},E=t("h2",{class:"text-2xl font-bold mb-4"},"Deployment History",-1),q={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4"},G={class:"form-control"},J=t("label",{class:"label"},[t("span",{class:"label-text"},"Search")],-1),K={class:"form-control"},O=t("label",{class:"label"},[t("span",{class:"label-text"},"Status")],-1),Q=t("option",{value:""},"All Status",-1),W=t("option",{value:"completed"},"Completed",-1),X=t("option",{value:"failed"},"Failed",-1),Y=t("option",{value:"running"},"Running",-1),Z=[Q,W,X,Y],tt={class:"form-control"},st=t("label",{class:"label"},[t("span",{class:"label-text"},"Date Range")],-1),et=t("option",{value:"24h"},"Last 24 Hours",-1),ot=t("option",{value:"7d"},"Last 7 Days",-1),nt=t("option",{value:"30d"},"Last 30 Days",-1),lt=t("option",{value:"all"},"All Time",-1),at=[et,ot,nt,lt],it={class:"bg-base-100 rounded-box shadow-xl"},rt={class:"overflow-x-auto"},dt={class:"table table-zebra w-full"},ct={class:"flex items-center gap-2"},ut={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ht=t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 9l4-4 4 4m0 6l-4 4-4-4"},null,-1),_t=[ht],vt=t("th",null,"Commit",-1),mt={class:"flex items-center gap-2"},wt={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},bt=t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 9l4-4 4 4m0 6l-4 4-4-4"},null,-1),pt=[bt],gt={class:"flex items-center gap-2"},kt={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},xt=t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 9l4-4 4 4m0 6l-4 4-4-4"},null,-1),ft=[xt],Ct=t("th",null,"Duration",-1),yt=t("th",null,"Actions",-1),Dt={class:"font-mono"},Mt={class:"flex items-center gap-2"},jt={class:"font-mono text-sm"},Bt=["onClick"],$t=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1),St=[$t],zt={key:0,class:"text-error text-sm mt-1"},Vt={class:"text-sm opacity-60"},Tt={class:"flex items-center gap-2"},Ht=["onClick"],At=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),Lt={class:"dropdown dropdown-end"},Pt=t("label",{tabindex:"0",class:"btn btn-ghost btn-sm"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})])],-1),Rt={tabindex:"0",class:"dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52"},Ft=["onClick"],It=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),Nt=["onClick"],Ut=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),Et={class:"flex justify-between items-center p-4 border-t border-base-300"},qt={class:"text-sm opacity-70"},Gt={class:"join"},Jt=["disabled"],Kt={class:"join-item btn btn-sm"},Ot=["disabled"],g=10,Wt={__name:"DeployTable",props:{deployments:{type:Array,required:!0}},emits:["viewDeployment"],setup(k,{emit:y}){const r=u({search:"",status:"",dateRange:"24h",branch:""}),c=u("started_at"),v=u("desc"),l=u(1),D=k,m=h(()=>D.deployments.length),M=h(()=>Math.ceil(m.value/g)),j=h(()=>(l.value-1)*g+1),B=h(()=>Math.min(l.value*g,m.value)),$=e=>C(new Date(e),"MMM dd, yyyy"),S=e=>C(new Date(e),"HH:mm:ss"),z=e=>{if(e<60)return`${e}s`;const o=Math.floor(e/60),s=e%60;return`${o}m ${s}s`},V=async e=>{await navigator.clipboard.writeText(e)},w=e=>{c.value===e?v.value=v.value==="asc"?"desc":"asc":(c.value=e,v.value="asc")},x=e=>{l.value=e},T=y,H=e=>{T("viewDeployment",e)},A=e=>{},L=e=>{};return(e,o)=>(a(),i("div",N,[t("div",U,[E,t("div",q,[t("div",G,[J,p(t("input",{type:"text",placeholder:"Search by repository or commit...",class:"input input-bordered w-full","onUpdate:modelValue":o[0]||(o[0]=s=>r.value.search=s)},null,512),[[P,r.value.search]])]),t("div",K,[O,p(t("select",{class:"select select-bordered w-full","onUpdate:modelValue":o[1]||(o[1]=s=>r.value.status=s)},Z,512),[[f,r.value.status]])]),t("div",tt,[st,p(t("select",{class:"select select-bordered w-full","onUpdate:modelValue":o[2]||(o[2]=s=>r.value.dateRange=s)},at,512),[[f,r.value.dateRange]])])])]),t("div",it,[t("div",rt,[t("table",dt,[t("thead",null,[t("tr",null,[t("th",{class:"cursor-pointer hover:bg-base-200",onClick:o[3]||(o[3]=s=>w("id"))},[t("div",ct,[d(" ID "),c.value==="id"?(a(),i("svg",ut,_t)):_("",!0)])]),vt,t("th",{class:"cursor-pointer hover:bg-base-200",onClick:o[4]||(o[4]=s=>w("status"))},[t("div",mt,[d(" Status "),c.value==="status"?(a(),i("svg",wt,pt)):_("",!0)])]),t("th",{class:"cursor-pointer hover:bg-base-200",onClick:o[5]||(o[5]=s=>w("started_at"))},[t("div",gt,[d(" Started At "),c.value==="started_at"?(a(),i("svg",kt,ft)):_("",!0)])]),Ct,yt])]),t("tbody",null,[(a(!0),i(R,null,F(k.deployments,s=>(a(),i("tr",{key:s.id,class:"hover"},[t("td",Dt,"#"+n(s.id),1),t("td",null,[t("div",Mt,[t("div",jt,n(s.commit_hash.substring(0,7)),1),t("button",{class:"btn btn-ghost btn-xs",onClick:b=>V(s.commit_hash)},St,8,Bt)])]),t("td",null,[t("div",{class:I({badge:!0,"badge-success":s.status==="completed","badge-error":s.status==="failed","badge-warning animate-pulse":s.status==="running","badge-info":s.status==="pending"})},n(s.status),3),s.error?(a(),i("div",zt,n(s.error.substring(0,50))+"... ",1)):_("",!0)]),t("td",null,[t("div",null,n($(s.started_at)),1),t("div",Vt,n(S(s.started_at)),1)]),t("td",null,n(z(s.duration)),1),t("td",null,[t("div",Tt,[t("button",{class:"btn btn-ghost btn-sm",onClick:b=>H(s)},[At,d(" View ")],8,Ht),t("div",Lt,[Pt,t("ul",Rt,[t("li",null,[t("a",{onClick:b=>A(s.id)},[It,d(" Download Logs ")],8,Ft)]),t("li",null,[t("a",{onClick:b=>L(s.id)},[Ut,d(" Redeploy This Commit ")],8,Nt)])])])])])]))),128))])])]),t("div",Et,[t("div",qt," Showing "+n(j.value)+" to "+n(B.value)+" of "+n(m.value)+" deployments ",1),t("div",Gt,[t("button",{class:"join-item btn btn-sm",disabled:l.value===1,onClick:o[6]||(o[6]=s=>x(l.value-1))}," « ",8,Jt),t("button",Kt," Page "+n(l.value),1),t("button",{class:"join-item btn btn-sm",disabled:l.value===M.value,onClick:o[7]||(o[7]=s=>x(l.value+1))}," » ",8,Ot)])])])]))}};export{Wt as default};
