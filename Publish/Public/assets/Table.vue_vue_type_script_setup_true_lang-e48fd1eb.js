import{a as x,z as D,x as I,G as se,p as ne,H as T,h as q,F as V,Q as z,o as d,g as r,d as e,t as S,e as k,w as F,k as A,u as n,i as P,v as X,I as H,B as L,y as j,C as K,E as Y,b as R,l as W,J as N,m as ae,K as de}from"./preset-1b389b8a.js";import{_ as M}from"./Input.vue_vue_type_script_setup_true_lang-f5b1f4c2.js";import{_ as ie}from"./Password-c284dcc5.js";import{_ as re}from"./Select.vue_vue_type_script_setup_true_lang-cf5052cb.js";import{a as ce,_ as Q}from"./TextMultipleSelector-05a28255.js";import{I as ue,o as pe,E as me,A as _e,T as fe,a as G}from"./keyboard-94d03abe.js";import{s as he}from"./use-resolve-button-type-d875b7c7.js";import{f as ye,u as be}from"./hidden-2f747626.js";import{Q as Z,V as ee,N as te}from"./disclosure-35a68b45.js";function ve(p,f,i){let a=x(i==null?void 0:i.value),l=D(()=>p.value!==void 0);return[D(()=>l.value?p.value:a.value),function(u){return l.value||(a.value=u),f==null?void 0:f(u)}]}function ge(p){var f,i;let a=(f=p==null?void 0:p.form)!=null?f:p.closest("form");if(a){for(let l of a.elements)if(l!==p&&(l.tagName==="INPUT"&&l.type==="submit"||l.tagName==="BUTTON"&&l.type==="submit"||l.nodeName==="INPUT"&&l.type==="image")){l.click();return}(i=a.requestSubmit)==null||i.call(a)}}let ke=Symbol("GroupContext"),we=I({name:"Switch",emits:{"update:modelValue":p=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:null},disabled:{type:Boolean,default:!1},tabIndex:{type:Number,default:0}},inheritAttrs:!1,setup(p,{emit:f,attrs:i,slots:a,expose:l}){var u;let m=(u=p.id)!=null?u:`headlessui-switch-${ue()}`,_=se(ke,null),[b,o]=ve(D(()=>p.modelValue),v=>f("update:modelValue",v),D(()=>p.defaultChecked));function t(){o(!b.value)}let c=x(null),s=_===null?c:_.switchRef,y=he(D(()=>({as:p.as,type:i.type})),s);l({el:s,$el:s});function h(v){v.preventDefault(),t()}function w(v){v.key===G.Space?(v.preventDefault(),t()):v.key===G.Enter&&ge(v.currentTarget)}function B(v){v.preventDefault()}let C=D(()=>{var v,g;return(g=(v=pe(s))==null?void 0:v.closest)==null?void 0:g.call(v,"form")});return ne(()=>{T([C],()=>{if(!C.value||p.defaultChecked===void 0)return;function v(){o(p.defaultChecked)}return C.value.addEventListener("reset",v),()=>{var g;(g=C.value)==null||g.removeEventListener("reset",v)}},{immediate:!0})}),()=>{let{name:v,value:g,form:U,tabIndex:$,...O}=p,le={checked:b.value},oe={id:m,ref:s,role:"switch",type:y.value,tabIndex:$===-1?0:$,"aria-checked":b.value,"aria-labelledby":_==null?void 0:_.labelledby.value,"aria-describedby":_==null?void 0:_.describedby.value,onClick:h,onKeyup:w,onKeypress:B};return q(V,[v!=null&&b.value!=null?q(ye,me({features:be.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:b.value,form:U,disabled:O.disabled,name:v,value:g})):null,_e({ourProps:oe,theirProps:{...i,...fe(O,["modelValue","defaultChecked"])},slot:le,attrs:i,slots:a,name:"Switch"})])}}});const xe={class:"form-control"},$e={class:"label"},Ve={class:"block text-lg font-bold mb-2"},Se=e("span",{class:"sr-only"},"Toggle",-1),Ce={key:0,class:"invalid-feedback text-primary",role:"alert"},J={__name:"Toggle",props:{label:String,name:String,id:String,placeholder:String,modelValue:Boolean,class:String},emits:["update:modelValue"],setup(p,{emit:f}){const i=p,a=f;let l=x(null),u=x(!!i.modelValue);return T(()=>{var m;return(m=z().props)==null?void 0:m.errors},m=>{l.value=z().props.errors[i.name]||null}),T(()=>i.modelValue,m=>{u.value=m}),T(u,m=>{a("update:modelValue",m)}),(m,_)=>(d(),r("div",xe,[e("label",$e,[e("span",Ve,S(i.label),1)]),k(n(we),{modelValue:n(u),"onUpdate:modelValue":_[0]||(_[0]=b=>P(u)?u.value=b:u=b),class:A([n(u)?"bg-primary":"bg-gray-200","relative inline-flex h-6 w-11 items-center rounded-full"])},{default:F(()=>[Se,e("span",{class:A([n(u)?"translate-x-6":"translate-x-1","inline-block h-4 w-4 transform rounded-full bg-white transition"])},null,2)]),_:1},8,["modelValue","class"]),n(l)?(d(),r("span",Ce,[e("strong",null,S(n(l)),1)])):X("",!0)]))}},Ue=["for"],De=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),je=[De],Oe=["id"],Te={class:"modal text-neutral-content"},Be={class:"border border-primary shadow-primary shadow-lg modal-box w-11/12 max-w-5xl"},Fe={class:"modal-header"},Me={class:"text-xl font-bold"},Pe=["for"],Ke=e("div",{class:"rounded-lg text-center text-sm md:text-2xl"},[e("p",null,"Are you sure you want to delete this item?")],-1),Ee={class:"flex justify-end gap-2 pt-3"},Ie=["for"],He=["for"],Le=I({__name:"delete",props:{id:{type:Number,default:0},model:{type:String,default:()=>[]},endpoint:{type:String,default:()=>[]},permission:{type:String,default:null}},emits:["onDelete"],setup(p,{emit:f}){const i=H(),a=p,l=f,u=async()=>{L.post(a.endpoint,{model:a.model,id:a.id,permission:a.permission}).then(function(m){i.success(m.data.message),l("onDelete")}).catch(function(m){for(const[_,b]of Object.entries(m.response.data.errors))i.error(b[0])})};return(m,_)=>(d(),r(V,null,[e("label",{for:"my-modal-delete-"+a.id,class:"btn btn-error modal-button"},je,8,Ue),e("input",{type:"checkbox",id:"my-modal-delete-"+a.id,class:"modal-toggle"},null,8,Oe),e("div",Te,[e("div",Be,[e("div",Fe,[e("h2",Me,"Delete Item #"+S(a.id),1),e("label",{for:"my-modal-delete-"+a.id,class:"btn btn-sm btn-circle absolute right-2 top-2"},"✕",8,Pe)]),Ke,e("div",Ee,[e("label",{for:"my-modal-delete-"+a.id,class:"btn btn-primary font-bold text-lg text-white"},"Close!",8,Ie),e("label",{for:"my-modal-delete-"+a.id,onClick:u,class:"btn btn-secondary font-bold text-lg text-white"},"Delete",8,He)])])])],64))}}),Ne=p=>{const f=p.split("/");return new Date(f[2]+"/"+f[1]+"/"+f[0]).toISOString().split("T")[0]},Ae=p=>{const f=p.split("/");return new Date(f[2]+"/"+f[1]+"/"+f[0]).toISOString().substr(0,16)},Re=p=>p?p.toString():"",We={key:0},qe={key:1},ze={key:2},Qe={key:3},Ge={key:4},Je={key:5},Xe={key:6},Ye={key:7},Ze={key:8},et={key:9},tt={key:10},lt={key:11},ot={key:12},st={class:"form-control mt-1"},nt={class:"label"},at={class:"label-text"},dt=["onKeyup","onUpdate:modelValue"],it={class:"flex justify-center bg-base-100 rounded mt-5"},rt=["innerHTML"],ct={key:13},E={__name:"formbuilder",props:{columns:{type:Array,default:()=>[]},modelValue:{type:Object,default:()=>[]},editMode:{type:String,default:"false"}},emits:["onFormUpdate"],setup(p,{emit:f}){const i=p,a=f;let l=x([]);(()=>{l.value=[];for(const[b,o]of Object.entries(i.columns))if(i.editMode=="false"){if(o.canCreate){let t="";(o.type=="Toggle"||o.type=="boolean")&&(t=!1),l.value.push({key:o.key,label:o.label,type:o.type,nullable:o==null?void 0:o.nullable,unique:o==null?void 0:o.unique,endpoint:o==null?void 0:o.endpoint,displayKey:o==null?void 0:o.displayKey,columns:o==null?void 0:o.columns,model:o==null?void 0:o.model,singleSearch:o==null?void 0:o.singleSearch,relation:o==null?void 0:o.relation,value:t,select_options:o==null?void 0:o.select_options})}}else if(o.canEdit){let t=null;switch(o.type){case"date":t=Ne(i.modelValue[o.key]);break;case"timestamp":t=Ae(i.modelValue[o.key]);break;case"media":t=i.modelValue[o.key];break;case"model_search":t=i.modelValue[o.key];break;case"pivot_model":t=i.modelValue[o.key];break;case"boolean":t=i.modelValue[o.key];break;default:t=Re(i.modelValue[o.key]);break}l.value.push({key:o.key,label:o.label,type:o.type,nullable:o==null?void 0:o.nullable,displayKey:o==null?void 0:o.displayKey,unique:o==null?void 0:o.unique,value:t,endpoint:o==null?void 0:o.endpoint,columns:o==null?void 0:o.columns,model:o==null?void 0:o.model,singleSearch:o==null?void 0:o.singleSearch,relation:o==null?void 0:o.relation,select_options:o==null?void 0:o.select_options})}i.editMode=="true"&&a("onFormUpdate",l.value)})();let m=x(null);T(()=>l.value,()=>{clearTimeout(m.value),m.value=setTimeout(function(){a("onFormUpdate",l.value)},500)},{deep:!0});const _=async(b,o,t)=>{if(t=="name"||t=="title"){const c=l.value.findIndex(s=>s.key=="slug");l.value[c]&&(l.value[c].value=b.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,""))}};return(b,o)=>(d(!0),r(V,null,j(n(l),(t,c)=>(d(),r("div",{key:c},[t.type=="text"?(d(),r("div",We,[k(n(M),{type:"text",modelValue:n(l)[c].value,"onUpdate:modelValue":s=>n(l)[c].value=s,label:t.label,onKeyup:s=>_(s.target.value,t.type,t.key)},null,8,["modelValue","onUpdate:modelValue","label","onKeyup"])])):t.type=="password"?(d(),r("div",qe,[k(n(ie),{modelValue:n(l)[c].value,"onUpdate:modelValue":s=>n(l)[c].value=s,label:t.label},null,8,["modelValue","onUpdate:modelValue","label"])])):t.type=="email"?(d(),r("div",ze,[k(n(M),{type:"email",modelValue:n(l)[c].value,"onUpdate:modelValue":s=>n(l)[c].value=s,label:t.label},null,8,["modelValue","onUpdate:modelValue","label"])])):t.type=="date"?(d(),r("div",Qe,[k(n(M),{type:"date",modelValue:n(l)[c].value,"onUpdate:modelValue":s=>n(l)[c].value=s,label:t.label},null,8,["modelValue","onUpdate:modelValue","label"])])):t.type=="timestamp"?(d(),r("div",Ge,[k(n(M),{type:"datetime-local",modelValue:n(l)[c].value,"onUpdate:modelValue":s=>n(l)[c].value=s,label:t.label},null,8,["modelValue","onUpdate:modelValue","label"])])):t.type=="slug"?(d(),r("div",Je,[k(n(M),{type:"text",modelValue:n(l)[c].value,"onUpdate:modelValue":s=>n(l)[c].value=s,label:t.label},null,8,["modelValue","onUpdate:modelValue","label"])])):t.type=="media"?(d(),r("div",Xe,[k(n(ce),{label:"image",placeholder:"search",modelValue:n(l)[c].value,"onUpdate:modelValue":s=>n(l)[c].value=s,loadData:n(l)[c].value,endpoint:t.endpoint},null,8,["modelValue","onUpdate:modelValue","loadData","endpoint"])])):t.type=="number"?(d(),r("div",Ye,[k(n(M),{type:"number",modelValue:n(l)[c].value,"onUpdate:modelValue":s=>n(l)[c].value=s,label:t.label,onKeyup:s=>_(s.target.value,t.type,t.key)},null,8,["modelValue","onUpdate:modelValue","label","onKeyup"])])):t.type=="model_search"?(d(),r("div",Ze,[k(n(Q),{label:t.label,placeholder:"search",model:t.model,columns:t.columns,singleMode:t.singleSearch,modelValue:n(l)[c].value,"onUpdate:modelValue":s=>n(l)[c].value=s,loadData:n(l)[c].value,endpoint:t.endpoint,displayKey:t.displayKey},null,8,["label","model","columns","singleMode","modelValue","onUpdate:modelValue","loadData","endpoint","displayKey"])])):t.type=="pivot_model"?(d(),r("div",et,[k(n(Q),{label:t.label,placeholder:"search",model:t.model,columns:t.columns,singleMode:t.singleSearch,modelValue:n(l)[c].value,"onUpdate:modelValue":s=>n(l)[c].value=s,loadData:n(l)[c].value,endpoint:t.endpoint,displayKey:t.displayKey},null,8,["label","model","columns","singleMode","modelValue","onUpdate:modelValue","loadData","endpoint","displayKey"])])):t.type=="Toggle"?(d(),r("div",tt,[k(n(J),{modelValue:n(l)[c].value,"onUpdate:modelValue":s=>n(l)[c].value=s,label:t.label},null,8,["modelValue","onUpdate:modelValue","label"])])):t.type=="boolean"?(d(),r("div",lt,[k(n(J),{modelValue:n(l)[c].value,"onUpdate:modelValue":s=>n(l)[c].value=s,label:t.label},null,8,["modelValue","onUpdate:modelValue","label"])])):t.type=="icon"?(d(),r("div",ot,[e("label",st,[e("div",nt,[e("span",at,S(t.label),1)]),K(e("textarea",{class:"textarea textarea-primary h-24",onKeyup:s=>_(s.target.value,t.type,t.key),"onUpdate:modelValue":s=>n(l)[c].value=s,placeholder:"Bio"},null,40,dt),[[Y,n(l)[c].value]])]),e("div",it,[e("div",{class:"flex p-10 w-52",innerHTML:n(l)[c].value},null,8,rt)])])):t.type=="select"?(d(),r("div",ct,[k(n(re),{modelValue:n(l)[c].value,"onUpdate:modelValue":s=>n(l)[c].value=s,label:t.label,options:t.select_options},null,8,["modelValue","onUpdate:modelValue","label","options"])])):X("",!0)]))),128))}},ut=e("label",{for:"my-modal-5",class:"btn btn-primary modal-button"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})])],-1),pt=e("input",{type:"checkbox",id:"my-modal-5",class:"modal-toggle"},null,-1),mt={class:"modal text-left"},_t={key:0,class:"modal-box w-11/12 max-w-5xl border border-primary shadow-primary shadow-2xl"},ft=e("div",{class:"modal-header"},[e("h3",{class:"font-bold text-lg"},"New"),e("label",{for:"my-modal-5",class:"btn btn-sm btn-circle absolute right-2 top-2"},"✕")],-1),ht={class:"w-full mt-2"},yt={class:"w-full rounded-lg p-2"},bt={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},vt=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"},null,-1),gt=[vt],kt={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},wt=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 5.25l-7.5 7.5-7.5-7.5m15 6l-7.5 7.5-7.5-7.5"},null,-1),xt=[wt],$t={class:"w-full bg-secondary rounded-lg text-neutral-content p-6"},Vt=e("label",{for:"my-modal-5",class:"btn btn-secondary font-bold text-lg text-white"},"Close",-1),St={key:1,class:"modal-box w-11/12 max-w-5xl"},Ct=W('<div class="card w-full bg-base-100 shadow-xl"><figure class="px-10 pt-10"><svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 rounded-xl" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg></figure><div class="card-body items-center text-center"><h2 class="card-title">The create method has been disable</h2><p>Try to contact the administrator </p></div></div>',1),Ut=[Ct],Dt={__name:"create",props:{columns:{type:Array,default:()=>[]},model:{type:String,default:()=>[]},endpoint:{type:String,default:()=>[]},permission:{type:String,default:null}},emits:["onCreate"],setup(p,{emit:f}){const i=H(),a=p,l=D(()=>a.columns.filter(t=>t.canCreate).length>0),u=D(()=>{const t=a.columns.filter(w=>w.section),c=a.columns.filter(w=>!w.section),s=t.map(w=>w.section),y=[...new Set(s)],h=[];return y.forEach(w=>{const B=t.filter(C=>C.section==w);h.push({section:w,fields:B})}),{sections:y,fields:c,sectionsWithFields:h}});let m=x(a.columns.filter(t=>t.canCreate));const _=async t=>{if(m.value.length>0)for(const[c,s]of Object.entries(t))for(const[y,h]of Object.entries(m.value))s.key==h.key&&(m.value[y]=s);else m.value=t},b=f,o=async()=>{L.post(a.endpoint,{model:a.model,data:m.value,permission:a.permission}).then(function(t){i.success(t.data.message),b("onCreate")}).catch(function(t){for(const[c,s]of Object.entries(t.response.data.errors))i.error(s[0])})};return(t,c)=>(d(),r(V,null,[ut,pt,e("div",mt,[l.value?(d(),r("div",_t,[ft,e("div",ht,[e("div",yt,[(d(!0),r(V,null,j(u.value.sectionsWithFields,(s,y)=>(d(),R(n(te),{as:"div",class:"mt-2",key:y},{default:F(({open:h})=>[k(n(Z),{class:"btn btn-primary w-full"},{default:F(()=>[e("span",null,S(s.section),1),h?(d(),r("svg",bt,gt)):(d(),r("svg",kt,xt))]),_:2},1024),k(n(ee),{class:"px-4 pt-4 pb-2 text-sm text-gray-500"},{default:F(()=>[k(E,{columns:s.fields,onOnFormUpdate:_},null,8,["columns"])]),_:2},1024)]),_:2},1024))),128))])]),e("div",$t,[k(E,{columns:u.value.fields,onOnFormUpdate:_},null,8,["columns"])]),e("div",{class:"flex justify-end gap-2 pt-3"},[Vt,e("label",{for:"my-modal-5",class:"btn btn-primary font-bold text-lg text-white",onClick:o},"Create")])])):(d(),r("div",St,Ut))])],64))}},jt=["for"],Ot=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),Tt=[Ot],Bt=["id"],Ft={class:"modal"},Mt={key:0,class:"modal-box w-11/12 max-w-5xl border border-primary shadow-lg shadow-primary text-neutral-content"},Pt={class:"modal-header"},Kt=e("h3",{class:"font-bold text-lg"},"Edit",-1),Et=["for"],It={class:"w-full mt-2"},Ht={class:"w-full rounded-lg p-2"},Lt={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},Nt=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"},null,-1),At=[Nt],Rt={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},Wt=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 5.25l-7.5 7.5-7.5-7.5m15 6l-7.5 7.5-7.5-7.5"},null,-1),qt=[Wt],zt={class:"w-full bg-secondary rounded-lg p-6 text-neutral-content"},Qt={class:"flex justify-end gap-4 mt-5"},Gt=["for"],Jt=["for"],Xt={key:1,class:"modal-box w-11/12 max-w-5xl"},Yt=W('<div class="card w-full bg-base-100 shadow-xl"><figure class="px-10 pt-10"><svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 rounded-xl" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg></figure><div class="card-body items-center text-center"><h2 class="card-title">The edit method has been disable</h2><p>Try to contact the administrator </p></div></div>',1),Zt=[Yt],el=I({__name:"edit",props:{columns:{type:Array,default:()=>[]},model:{type:String,default:()=>[]},endpoint:{type:String,default:()=>[]},id:{type:Number,default:0},modelValue:{type:Object,default:()=>[]},permission:{type:String,default:null}},emits:["onEdit"],setup(p,{emit:f}){const i=H(),a=p,l=D(()=>a.columns.filter(t=>t.canEdit).length>0),u=D(()=>{const t=a.columns.filter(w=>w.section),c=a.columns.filter(w=>!w.section),s=t.map(w=>w.section),y=[...new Set(s)],h=[];return y.forEach(w=>{const B=t.filter(C=>C.section==w);h.push({section:w,fields:B})}),{sections:y,fields:c,sectionsWithFields:h}});let m=x(a.columns.filter(t=>t.canEdit));const _=async t=>{if(m.value.length>0)for(const[c,s]of Object.entries(t))for(const[y,h]of Object.entries(m.value))s.key==h.key&&(m.value[y]=s);else m.value=t},b=f,o=async()=>{L.post(a.endpoint,{model:a.model,id:a.id,data:m.value,permission:a.permission}).then(function(t){i.success(t.data.message),b("onEdit")}).catch(function(t){for(const[c,s]of Object.entries(t.response.data.errors))i.error(s[0])})};return(t,c)=>(d(),r(V,null,[e("label",{for:"edit-data-"+a.id,class:"btn btn-info modal-button"},Tt,8,jt),e("input",{type:"checkbox",id:"edit-data-"+a.id,class:"modal-toggle"},null,8,Bt),e("div",Ft,[l.value?(d(),r("div",Mt,[e("div",Pt,[Kt,e("label",{for:"edit-data-"+a.id,class:"btn btn-sm btn-circle absolute right-2 top-2"},"✕",8,Et)]),e("div",It,[e("div",Ht,[(d(!0),r(V,null,j(u.value.sectionsWithFields,(s,y)=>(d(),R(n(te),{as:"div",class:"mt-2",key:y,defaultOpen:!0},{default:F(({open:h})=>[k(n(Z),{class:"btn btn-primary w-full"},{default:F(()=>[e("span",null,S(s.section),1),h?(d(),r("svg",Lt,At)):(d(),r("svg",Rt,qt))]),_:2},1024),k(n(ee),{class:"px-4 pt-4 pb-2 text-sm text-gray-500"},{default:F(()=>[k(E,{columns:s.fields,onOnFormUpdate:_,editMode:"true",modelValue:a.modelValue},null,8,["columns","modelValue"])]),_:2},1024)]),_:2},1024))),128))])]),e("div",zt,[k(E,{columns:u.value.fields,onOnFormUpdate:_,editMode:"true",modelValue:a.modelValue},null,8,["columns","modelValue"])]),e("div",Qt,[e("label",{for:"edit-data-"+a.id,class:"btn btn-primary font-bold text-lg text-white"},"Close",8,Gt),e("label",{for:"edit-data-"+a.id,class:"btn btn-secondary font-bold text-lg text-white",onClick:o},"Submit",8,Jt)])])):(d(),r("div",Xt,Zt))])],64))}}),tl={class:"flex flex-col gap-3"},ll={class:"flex justify-end flex-col md:flex-row gap-3 p-3"},ol={class:"relative"},sl=W('<option disabled selected>Per page</option><option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',5),nl=[sl],al={class:"relative"},dl=e("option",{disabled:"",selected:""},"Row",-1),il=["value"],rl={class:"relative"},cl=e("option",{disabled:"",selected:""},"Order by",-1),ul=e("option",{value:"asc"},"Asc",-1),pl=e("option",{value:"desc"},"Desc",-1),ml=[cl,ul,pl],_l={class:"join"},fl=e("button",{class:"btn btn-primary join-item rounded-r-full"},"Search",-1),hl={__name:"filter",props:{columns:{type:Array,default:()=>[]}},emits:["onPerPage","onOrderBy","onSearch","onFilter","onFilterReset"],setup(p,{emit:f}){const i=p,a=f;let l=x(10),u=x("id"),m=x("asc"),_=x(""),b=x([]);(async()=>{for(const[s,y]of Object.entries(i.columns))y.sortable&&(s==0&&(u.value=y.key),b.value.push({label:y.label,value:y.key}))})(),T(()=>l.value,s=>{a("onPerPage",s)}),T(()=>m.value,s=>{a("onOrderBy",s)}),T(()=>u.value,s=>{a("onFilter",s)});let t=x(null);T(()=>_.value,s=>{clearTimeout(t.value),t.value=setTimeout(function(){a("onSearch",s)},500)});const c=async()=>{l.value=10,u.value="id",m.value="asc",_.value=null,a("onFilterReset",[{perPage:l.value,filterBy:u.value,orderBy:m.value,search:_.value}])};return(s,y)=>(d(),r("div",tl,[e("div",ll,[e("div",ol,[K(e("select",{class:"select select-primary w-full","onUpdate:modelValue":y[0]||(y[0]=h=>P(l)?l.value=h:l=h)},nl,512),[[N,n(l)]])]),e("div",al,[K(e("select",{class:"select select-primary w-full","onUpdate:modelValue":y[1]||(y[1]=h=>P(u)?u.value=h:u=h),onChange:y[2]||(y[2]=(...h)=>s.filterChange&&s.filterChange(...h))},[dl,(d(!0),r(V,null,j(n(b),(h,w)=>(d(),r("option",{key:w,value:h.value},S(h.label),9,il))),128))],544),[[N,n(u)]])]),e("div",rl,[K(e("select",{class:"select select-primary w-full","onUpdate:modelValue":y[3]||(y[3]=h=>P(m)?m.value=h:m=h)},ml,512),[[N,n(m)]])]),e("div",_l,[K(e("input",{class:"input input-bordered join-item","onUpdate:modelValue":y[4]||(y[4]=h=>P(_)?_.value=h:_=h),placeholder:"Email"},null,512),[[Y,n(_)]]),fl,e("button",{class:"btn btn-secondary join-item rounded-r-full",onClick:c},"Reset")])])]))}},yl={class:"px-5 py-5 bg-base-200 border-t flex flex-col xs:flex-row items-center xs:justify-between"},bl={class:"xs:text-sm text-primary font-bold text-sm md:text-lg"},vl={class:"inline-flex mt-2 xs:mt-0"},gl={class:"btn-group"},kl=["onClick"],wl=["innerHTML"],xl={__name:"pagination",props:{paginationInfo:{type:Object,default:()=>[]}},emits:["onPagiation"],setup(p,{emit:f}){const i=f,a=async u=>{i("onPagiation",u)},l=p;return(u,m)=>(d(),r("div",yl,[e("span",bl," Showing "+S(l.paginationInfo.currentPage)+" to "+S(l.paginationInfo.perPage)+" of "+S(l.paginationInfo.total)+" Entries ",1),e("div",vl,[e("div",gl,[(d(!0),r(V,null,j(l.paginationInfo.links,(_,b)=>(d(),r("button",{class:A(["btn btn-md",_.active?"btn-active":""]),key:b,onClick:o=>a(_.url)},[e("span",{innerHTML:_.label},null,8,wl)],10,kl))),128))])])]))}},$l={key:0},Vl={class:"carousel rounded-box w-96"},Sl={class:"carousel-item w-1/2"},Cl=["src"],Ul={key:1},Dl=["innerHTML"],jl={key:1},Ol={key:0,class:"badge badge-success mt-3"},Tl={key:1,class:"badge badge-error mt-3"},Bl={key:2},Fl={class:"flex flex-col"},Ml=["innerHTML"],Pl={__name:"tableDataDisplay",props:{tableData:{type:Object,default:()=>[]},columns:{type:Array,default:()=>[]}},setup(p){const f=p,i=D(()=>{let a=[];for(const[l,u]of Object.entries(f.columns))a.push({label:u.label,type:u.type,value:f.tableData[u.key]});return a});return(a,l)=>(d(!0),r(V,null,j(i.value,(u,m)=>(d(),r("th",{key:m},[u.type==="media"?(d(),r("div",$l,[e("div",Vl,[(d(!0),r(V,null,j(u.value,(_,b)=>(d(),r("div",Sl,[e("img",{src:_.url.default,class:"w-full"},null,8,Cl)]))),256))])])):(d(),r("div",Ul,[u.type=="icon"?(d(),r("div",{key:0,innerHTML:u.value,class:"bg-base-100 rounded-lg flex justify-center"},null,8,Dl)):u.type==="toogle"?(d(),r("div",jl,[u.value==1?(d(),r("div",Ol,"Enable")):(d(),r("div",Tl,"Disable"))])):u.type==="model_search"?(d(),r("div",Bl,[e("div",Fl,[(d(!0),r(V,null,j(u.value,(_,b)=>(d(),r("div",{class:"badge badge-primary mt-3",key:b},S(b)+" > "+S(_),1))),128))])])):(d(),r("div",{key:3,innerHTML:u.value},null,8,Ml))]))]))),128))}},Kl={class:"w-full"},El={class:"relative flex flex-col min-w-0 break-words bg-base-300 w-full mb-6 shadow-lg rounded"},Il={class:"flex flex-wrap items-center mt-5"},Hl={class:"relative w-full px-4 max-w-full flex-grow flex-1"},Ll={class:"text-3xl font-extrabold text-base-content"},Nl={class:"relative w-full px-4 max-w-full flex-grow flex-1 text-right"},Al={class:"overflow-x-auto p-6"},Rl={class:"overflow-x-auto bg-base-100"},Wl={class:"table table-compact w-full"},ql={class:"font-bold bg-primary text-neutral"},zl=e("th",null,"Action",-1),Ql={class:"flex justify-start overflow-x-hidden gap-2"},Gl={key:1},Jl=["for"],Xl=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),Yl=[Xl],Zl={class:"font-bold bg-primary text-neutral"},eo=e("th",null,"Action",-1),uo=I({__name:"Table",props:{tableTitle:{type:String,default:"Table name"},columns:{type:Array,default:()=>[]},model:{type:String,default:""},endpoint:{type:String,default:""},endpointDelete:{type:String,default:""},endpointCreate:{type:String,default:""},endpointEdit:{type:String,default:""},permission:{type:String,default:null},custom_edit_route:{type:String,default:null}},setup(p){const f=H(),i=p,a=async g=>{v(g)};let l=x(10);const u=async g=>{l.value=g,v()};let m=x("id");const _=async g=>{m.value=g,v()};let b=x(null);const o=async g=>{b.value=g,v()};let t=x(null);const c=async g=>{g&&g.length>3&&(t.value=g,v())},s=async()=>{v()},y=async()=>{v()},h=async()=>{v()},w=async g=>{l.value=g.perPage,m.value=g.filterBy,b.value=g.orderBy,t.value=g.search,v()};let B=x([]),C=x([]);const v=async(g=null)=>{g===null&&(g=i.endpoint),L.post(g,{model:i.model,columns:i.columns,perPage:l.value,search:t.value,sort:m.value,direction:b.value,permission:i.permission}).then(function(U){B.value=U.data.data,C.value={currentPage:U.data.current_page,lastPage:U.data.last_page,perPage:U.data.per_page,total:U.data.total,links:U.data.links}}).catch(function(U){for(const[$,O]of Object.entries(U.response.data.errors))f.error(O[0])})};return v(),(g,U)=>(d(),r("div",Kl,[e("div",El,[e("div",Il,[e("div",Hl,[e("h1",Ll,S(i.tableTitle),1)]),e("div",Nl,[ae(g.$slots,"new",{},()=>[k(Dt,{columns:i.columns,endpoint:i.endpointCreate,model:i.model,permission:i.permission,onOnCreate:y},null,8,["columns","endpoint","model","permission"])])])]),k(hl,{onOnPerPage:u,onOnOrderBy:o,onOnSearch:c,onOnFilter:_,onOnFilterReset:w,columns:i.columns},null,8,["columns"]),e("div",Al,[e("div",Rl,[e("table",Wl,[e("thead",ql,[e("tr",null,[(d(!0),r(V,null,j(p.columns,($,O)=>(d(),r("th",{key:O},S($.label),1))),128)),zl])]),e("tbody",null,[(d(!0),r(V,null,j(n(B),($,O)=>(d(),r("tr",{key:$,class:"font-thin bg-base-300 hover:bg-secondary hover:text-neutral hover:font-bold"},[k(Pl,{tableData:$,columns:p.columns},null,8,["tableData","columns"]),e("th",null,[e("div",Ql,[p.custom_edit_route?(d(),r("div",Gl,[k(n(de),{href:p.custom_edit_route+$.id},{default:F(()=>[e("label",{for:"edit-data-"+$.id,class:"btn btn-info modal-button"},Yl,8,Jl)]),_:2},1032,["href"])])):(d(),R(el,{key:0,columns:i.columns,endpoint:i.endpointEdit,model:i.model,modelValue:$,id:$.id,permission:i.permission,onOnEdit:h},null,8,["columns","endpoint","model","modelValue","id","permission"])),k(Le,{id:$.id,endpoint:i.endpointDelete,model:i.model,permission:i.permission,onOnDelete:s},null,8,["id","endpoint","model","permission"])])])]))),128))]),e("tfoot",Zl,[e("tr",null,[(d(!0),r(V,null,j(p.columns,($,O)=>(d(),r("th",{key:O},S($.label),1))),128)),eo])])])]),k(xl,{onOnPagiation:a,paginationInfo:n(C)},null,8,["paginationInfo"])])])]))}});export{uo as _};
