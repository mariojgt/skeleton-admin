import{a as b,A as ne,o as u,g as m,d as e,t as k,J as U,L as q,u as p,i as F,E as K,F as x,D as $,I as E,z as I,K as N,p as z,C as J,y as X,v as Y,x as D,B as ae,M as W,f as g,b as re,w as P,l as G,N as R,k as ve,m as he}from"./preset-4ee70171.js";import{_ as B}from"./Input-bc115587.js";import{_ as fe}from"./Password-4005e7cd.js";import{t as te,u as le,o as T,H as Q,b as _e,N as oe,a as A}from"./use-resolve-button-type-48508f1f.js";const be={class:"form-control"},ye={class:"label"},ge={class:"label-text"},we=["name","id","placeholder"],ke={key:0,class:"invalid-feedback text-primary",role:"alert"},xe={key:1,class:"mt-3 bg-white rounded"},$e=e("div",{class:"px-2 py-3 bg-green-200 text-black rounded-t"},[e("strong",null,"Available Items")],-1),Se=["onClick"],Ve={class:"inline-flex items-center space-x-2"},Ce=["src"],De=e("div",null,[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})])],-1),Oe={key:2,class:"mt-3 bg-white rounded"},Me=e("div",{class:"px-2 py-3 bg-red-200 text-black rounded-t"},[e("strong",null,"Selected Items")],-1),je=["onClick"],Be={class:"inline-flex items-center space-x-2"},Ue=["src"],Fe=e("div",null,[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})])],-1),Ie={__name:"Image",props:{label:String,name:String,id:String,placeholder:String,modelValue:Array,endpoint:String,loadData:Object},emits:["update:modelValue"],setup(d,{emit:c}){const t=d;let s=b(""),i=b({}),h=b(t.modelValue||[]),v=b(null);ne(()=>{h.value=t.loadData||[]});const f=()=>{E.post(t.endpoint,{search:s.value}).then(n=>{i.value=n.data}).catch(n=>{v.value=n.message})},o=n=>{h.value.find(a=>a.id===n.id)||(h.value.push(n),c("update:modelValue",h.value)),i.value={}},l=n=>{h.value.splice(n,1),c("update:modelValue",h.value)};return(n,a)=>(u(),m("div",be,[e("label",ye,[e("span",ge,k(t.label),1)]),U(e("input",{class:"input input-primary input-bordered",name:t.name,id:t.id,placeholder:t.placeholder,"onUpdate:modelValue":a[0]||(a[0]=r=>F(s)?s.value=r:s=r),autocomplete:"off",onKeyup:f},null,40,we),[[q,p(s)]]),p(v)?(u(),m("span",ke,[e("strong",null,k(p(v)),1)])):K("",!0),p(i).data?(u(),m("div",xe,[$e,(u(!0),m(x,null,$(p(i).data,(r,_)=>(u(),m("div",{class:"flex justify-between items-center border-b border-slate-200 py-3 px-2 border-l-4 border-l-transparent hover:rounded text-black hover:bg-green-700 hover:text-white",key:r.id,onClick:y=>o(r)},[e("div",Ve,[e("div",null,[e("img",{src:r.url.default,alt:"",class:"h-10 w-10 flex-shrink-0 rounded-full"},null,8,Ce)]),e("div",null,[e("strong",null,k(r.name),1)])]),De],8,Se))),128))])):K("",!0),p(h).length>0?(u(),m("div",Oe,[Me,(u(!0),m(x,null,$(p(h),(r,_)=>(u(),m("div",{class:"flex justify-between items-center border-b border-slate-200 text-black py-3 px-2 border-l-4 border-l-transparent hover:rounded hover:bg-red-700 hover:text-white",key:r.id,onClick:y=>l(_)},[e("div",Be,[e("div",null,[e("img",{src:r.url.default,alt:"",class:"h-10 w-10 flex-shrink-0 rounded-full"},null,8,Ue)]),e("div",null,[e("strong",null,k(r.name),1)])]),Fe],8,je))),128))])):K("",!0)]))}},Pe={class:"form-control"},Te={class:"label"},Ee={class:"label-text"},Ae=["placeholder"],Ke={class:"invalid-feedback text-primary",role:"alert"},Le={key:0,class:"mt-3 bg-white rounded"},He=e("div",{class:"px-2 py-3 bg-green-200 text-black rounded-t"},[e("strong",null,"Available Items")],-1),We=["onClick"],Ne={class:"inline-flex items-center space-x-2"},Re=e("div",null,[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})])],-1),qe={class:"mt-3 bg-white rounded"},ze=["onClick"],Je={class:"inline-flex items-center space-x-2"},Xe=e("div",null,[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})])],-1),se={__name:"TextMultipleSelector",props:{label:{type:String,default:""},name:{type:String,default:""},id:{type:String,default:""},placeholder:{type:String,default:""},modelValue:{type:String,default:""},model:{type:String,default:""},columns:{type:Object,default:null},endpoint:{type:String,default:""},loadData:{type:Object,default:null},singleMode:{type:Boolean,default:!1},displayKey:{type:String,default:"name"}},emits:["update:modelValue"],setup(d,{emit:c}){const t=d;let s=b(null);I(()=>{var n;return(n=N().props)==null?void 0:n.errors},n=>{N().props.errors[t.name]&&(s.value=N().props.errors[t.name])});let i=b(""),h=b("");const v=async()=>{E.post(t.endpoint,{search:i.value,model:t.model,columns:t.columns}).then(function(n){h.value=n.data}).catch(function(n){for(const[a,r]of Object.entries(n.response.data.errors))message.error(r[0])})};let f=b([]);const o=async n=>{t.singleMode&&(f.value=[]),f.value.indexOf(n)===-1&&f.value.push({id:n.id,[t.displayKey]:n[t.displayKey]}),h.value=[],c("update:modelValue",f.value)},l=async n=>{f.value.splice(n,1),c("update:modelValue",f.value)};return z(()=>{t.loadData&&(t.singleMode?f.value=[t.loadData]:f.value=t.loadData)}),(n,a)=>(u(),m("div",Pe,[e("label",Te,[e("span",Ee,k(t.label),1)]),U(e("input",{class:"input input-primary input-bordered",name:"{{ props.name }}",id:"{{ props.id }}",placeholder:t.placeholder,autocomplete:"off","onUpdate:modelValue":a[0]||(a[0]=r=>F(i)?i.value=r:i=r),onKeyup:v},null,40,Ae),[[q,p(i)]]),e("span",Ke,[e("strong",null,k(p(s)),1)]),p(h).data?(u(),m("div",Le,[He,(u(!0),m(x,null,$(p(h).data,(r,_)=>(u(),m("div",{class:"flex justify-between items-center border-b border-slate-200 py-3 px-2 border-l-4 border-l-transparent hover:rounded text-black hover:bg-green-700 hover:text-white",key:r.id,onClick:y=>o(r)},[e("div",Ne,[e("div",null,[e("strong",null,k(r[t.displayKey]),1)])]),Re],8,We))),128))])):K("",!0),e("div",qe,[(u(!0),m(x,null,$(p(f),(r,_)=>(u(),m("div",{class:"flex justify-between items-center border-b border-slate-200 text-black py-3 px-2 border-l-4 border-l-transparent hover:rounded hover:bg-red-700 hover:text-white",key:r.id,onClick:y=>l(_)},[e("div",Je,[e("div",null,[e("strong",null,k(r[t.displayKey]),1)])]),Xe],8,ze))),128))])]))}};let ie=Symbol("Context");var L=(d=>(d[d.Open=1]="Open",d[d.Closed=2]="Closed",d[d.Closing=4]="Closing",d[d.Opening=8]="Opening",d))(L||{});function Ye(){return J(ie,null)}function Ge(d){X(ie,d)}var Qe=(d=>(d[d.Open=0]="Open",d[d.Closed=1]="Closed",d))(Qe||{});let de=Symbol("DisclosureContext");function Z(d){let c=J(de,null);if(c===null){let t=new Error(`<${d} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Z),t}return c}let ce=Symbol("DisclosurePanelContext");function Ze(){return J(ce,null)}let ue=Y({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(d,{slots:c,attrs:t}){let s=b(d.defaultOpen?0:1),i=b(null),h=b(null),v={buttonId:b(`headlessui-disclosure-button-${te()}`),panelId:b(`headlessui-disclosure-panel-${te()}`),disclosureState:s,panel:i,button:h,toggleDisclosure(){s.value=le(s.value,{0:1,1:0})},closeDisclosure(){s.value!==1&&(s.value=1)},close(f){v.closeDisclosure();let o=(()=>f?f instanceof HTMLElement?f:f.value instanceof HTMLElement?T(f):T(v.button):T(v.button))();o==null||o.focus()}};return X(de,v),Ge(D(()=>le(s.value,{0:L.Open,1:L.Closed}))),()=>{let{defaultOpen:f,...o}=d,l={open:s.value===0,close:v.close};return Q({theirProps:o,ourProps:{},slot:l,slots:c,attrs:t,name:"Disclosure"})}}}),pe=Y({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(d,{attrs:c,slots:t,expose:s}){let i=Z("DisclosureButton"),h=Ze(),v=D(()=>h===null?!1:h.value===i.panelId.value);z(()=>{v.value||d.id!==null&&(i.buttonId.value=d.id)}),ae(()=>{v.value||(i.buttonId.value=null)});let f=b(null);s({el:f,$el:f}),v.value||ne(()=>{i.button.value=f.value});let o=_e(D(()=>({as:d.as,type:c.type})),f);function l(){var r;d.disabled||(v.value?(i.toggleDisclosure(),(r=T(i.button))==null||r.focus()):i.toggleDisclosure())}function n(r){var _;if(!d.disabled)if(v.value)switch(r.key){case A.Space:case A.Enter:r.preventDefault(),r.stopPropagation(),i.toggleDisclosure(),(_=T(i.button))==null||_.focus();break}else switch(r.key){case A.Space:case A.Enter:r.preventDefault(),r.stopPropagation(),i.toggleDisclosure();break}}function a(r){switch(r.key){case A.Space:r.preventDefault();break}}return()=>{var r;let _={open:i.disclosureState.value===0},{id:y,...M}=d,O=v.value?{ref:f,type:o.value,onClick:l,onKeydown:n}:{id:(r=i.buttonId.value)!=null?r:y,ref:f,type:o.value,"aria-expanded":i.disclosureState.value===0,"aria-controls":i.disclosureState.value===0||T(i.panel)?i.panelId.value:void 0,disabled:d.disabled?!0:void 0,onClick:l,onKeydown:n,onKeyup:a};return Q({ourProps:O,theirProps:M,slot:_,attrs:c,slots:t,name:"DisclosureButton"})}}}),me=Y({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(d,{attrs:c,slots:t,expose:s}){let i=Z("DisclosurePanel");z(()=>{d.id!==null&&(i.panelId.value=d.id)}),ae(()=>{i.panelId.value=null}),s({el:i.panel,$el:i.panel}),X(ce,i.panelId);let h=Ye(),v=D(()=>h!==null?(h.value&L.Open)===L.Open:i.disclosureState.value===0);return()=>{var f;let o={open:i.disclosureState.value===0,close:i.close},{id:l,...n}=d,a={id:(f=i.panelId.value)!=null?f:l,ref:i.panel};return Q({ourProps:a,theirProps:n,slot:o,attrs:c,slots:t,features:oe.RenderStrategy|oe.Static,visible:v.value,name:"DisclosurePanel"})}}});const et=["for"],tt=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),lt=[tt],ot=["id"],st={class:"modal"},nt={class:"modal-box w-11/12 max-w-5xl"},at=["for"],rt=e("h3",{class:"text-lg font-bold"},"This action cannot be undone.",-1),it=e("p",{class:"py-4"},"Are you sure you want to delete this item?",-1),dt={class:"modal-action"},ct=["for"],ut=["for"],pt={__name:"delete",props:{id:{type:Array,default:()=>[]},model:{type:String,default:()=>[]},endpoint:{type:String,default:()=>[]},permission:{type:String,default:null}},emits:["onDelete"],setup(d,{emit:c}){const t=d,s=W(),i=async()=>{E.post(t.endpoint,{model:t.model,id:t.id,permission:t.permission}).then(function(h){s.success(h.data.message),c("onDelete")}).catch(function(h){for(const[v,f]of Object.entries(h.response.data.errors))s.error(f[0])})};return(h,v)=>(u(),m(x,null,[e("label",{for:"my-modal-"+t.id,class:"btn btn-error modal-button"},lt,8,et),e("input",{type:"checkbox",id:"my-modal-"+t.id,class:"modal-toggle"},null,8,ot),e("div",st,[e("div",nt,[e("label",{for:"my-modal-"+t.id,class:"btn btn-sm btn-circle absolute right-2 top-2"},"✕",8,at),rt,it,e("div",dt,[e("label",{for:"my-modal-"+t.id,class:"btn btn-success"},"Close!",8,ct),e("label",{for:"my-modal-"+t.id,onClick:i,class:"btn btn-error"},"Delete",8,ut)])])])],64))}},mt=d=>{const c=d.split("/");return new Date(c[2]+"/"+c[1]+"/"+c[0]).toISOString().split("T")[0]},vt=d=>{const c=d.split("/");return new Date(c[2]+"/"+c[1]+"/"+c[0]).toISOString().substr(0,16)},ht=d=>d?d.toString():"",ft={key:0},_t={key:1},bt={key:2},yt={key:3},gt={key:4},wt={key:5},kt={key:6},xt={key:7},$t={key:8},St={key:9},H={__name:"formbuilder",props:{columns:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},editMode:{type:String,default:"false"}},emits:["onFormUpdate"],setup(d,{emit:c}){const t=d;let s=b([]);(()=>{s.value=[];for(const[f,o]of Object.entries(t.columns))if(t.editMode=="false")o.canCreate&&s.value.push({key:o.key,label:o.label,type:o.type,nullable:o==null?void 0:o.nullable,unique:o==null?void 0:o.unique,endpoint:o==null?void 0:o.endpoint,columns:o==null?void 0:o.columns,model:o==null?void 0:o.model,singleSearch:o==null?void 0:o.singleSearch,relation:o==null?void 0:o.relation,value:""});else if(o.canEdit){let l=null;switch(o.type){case"date":l=mt(t.modelValue[o.key]);break;case"timestamp":l=vt(t.modelValue[o.key]);break;case"media":l=t.modelValue[o.key];break;case"model_search":l=t.modelValue[o.key];break;case"pivot_model":l=t.modelValue[o.key];break;default:l=ht(t.modelValue[o.key]);break}s.value.push({key:o.key,label:o.label,type:o.type,nullable:o==null?void 0:o.nullable,unique:o==null?void 0:o.unique,value:l,endpoint:o==null?void 0:o.endpoint,columns:o==null?void 0:o.columns,model:o==null?void 0:o.model,singleSearch:o==null?void 0:o.singleSearch,relation:o==null?void 0:o.relation})}t.editMode=="true"&&c("onFormUpdate",s.value)})();let h=b(null);I(()=>s.value,()=>{clearTimeout(h.value),h.value=setTimeout(function(){c("onFormUpdate",s.value)},500)},{deep:!0});const v=async(f,o,l)=>{if(l=="name"){const n=s.value.findIndex(a=>a.key=="slug");s.value[n]&&(s.value[n].value=f.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,""))}};return(f,o)=>(u(!0),m(x,null,$(p(s),(l,n)=>(u(),m("div",{key:n},[l.type=="text"?(u(),m("div",ft,[g(p(B),{type:"text",modelValue:p(s)[n].value,"onUpdate:modelValue":a=>p(s)[n].value=a,label:l.label,onKeyup:a=>v(a.target.value,l.type,l.key)},null,8,["modelValue","onUpdate:modelValue","label","onKeyup"])])):l.type=="password"?(u(),m("div",_t,[g(p(fe),{modelValue:p(s)[n].value,"onUpdate:modelValue":a=>p(s)[n].value=a,label:l.label},null,8,["modelValue","onUpdate:modelValue","label"])])):l.type=="email"?(u(),m("div",bt,[g(p(B),{type:"email",modelValue:p(s)[n].value,"onUpdate:modelValue":a=>p(s)[n].value=a,label:l.label},null,8,["modelValue","onUpdate:modelValue","label"])])):l.type=="date"?(u(),m("div",yt,[g(p(B),{type:"date",modelValue:p(s)[n].value,"onUpdate:modelValue":a=>p(s)[n].value=a,label:l.label},null,8,["modelValue","onUpdate:modelValue","label"])])):l.type=="timestamp"?(u(),m("div",gt,[g(p(B),{type:"datetime-local",modelValue:p(s)[n].value,"onUpdate:modelValue":a=>p(s)[n].value=a,label:l.label},null,8,["modelValue","onUpdate:modelValue","label"])])):l.type=="slug"?(u(),m("div",wt,[g(p(B),{type:"text",modelValue:p(s)[n].value,"onUpdate:modelValue":a=>p(s)[n].value=a,label:l.label},null,8,["modelValue","onUpdate:modelValue","label"])])):l.type=="media"?(u(),m("div",kt,[g(p(Ie),{label:"image",placeholder:"search",modelValue:p(s)[n].value,"onUpdate:modelValue":a=>p(s)[n].value=a,loadData:p(s)[n].value,endpoint:l.endpoint},null,8,["modelValue","onUpdate:modelValue","loadData","endpoint"])])):l.type=="number"?(u(),m("div",xt,[g(p(B),{type:"number",modelValue:p(s)[n].value,"onUpdate:modelValue":a=>p(s)[n].value=a,label:l.label,onKeyup:a=>v(a.target.value,l.type,l.key)},null,8,["modelValue","onUpdate:modelValue","label","onKeyup"])])):l.type=="model_search"?(u(),m("div",$t,[g(p(se),{label:l.label,placeholder:"search",model:l.model,columns:l.columns,singleMode:l.singleSearch,modelValue:p(s)[n].value,"onUpdate:modelValue":a=>p(s)[n].value=a,loadData:p(s)[n].value,endpoint:l.endpoint},null,8,["label","model","columns","singleMode","modelValue","onUpdate:modelValue","loadData","endpoint"])])):l.type=="pivot_model"?(u(),m("div",St,[g(p(se),{label:l.label,placeholder:"search",model:l.model,columns:l.columns,singleMode:l.singleSearch,modelValue:p(s)[n].value,"onUpdate:modelValue":a=>p(s)[n].value=a,loadData:p(s)[n].value,endpoint:l.endpoint},null,8,["label","model","columns","singleMode","modelValue","onUpdate:modelValue","loadData","endpoint"])])):K("",!0)]))),128))}},Vt=e("label",{for:"my-modal-5",class:"btn btn-primary modal-button"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})])],-1),Ct=e("input",{type:"checkbox",id:"my-modal-5",class:"modal-toggle"},null,-1),Dt={class:"modal text-center"},Ot={key:0,class:"modal-box w-11/12 max-w-5xl"},Mt=e("h3",{class:"font-bold text-lg"},"New",-1),jt={class:"w-full"},Bt={class:"w-full bg-base-300 p-2"},Ut={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},Ft=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"},null,-1),It=[Ft],Pt={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},Tt=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 5.25l-7.5 7.5-7.5-7.5m15 6l-7.5 7.5-7.5-7.5"},null,-1),Et=[Tt],At={class:"w-full bg-base-300 p-6"},Kt=e("label",{for:"my-modal-5",class:"btn btn-error"},"Close",-1),Lt={key:1,class:"modal-box w-11/12 max-w-5xl"},Ht=G('<div class="card w-full bg-base-100 shadow-xl"><figure class="px-10 pt-10"><svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 rounded-xl" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg></figure><div class="card-body items-center text-center"><h2 class="card-title">The create method has been disable</h2><p>Try to contact the administrator </p></div></div>',1),Wt=[Ht],Nt={__name:"create",props:{columns:{type:Array,default:()=>[]},model:{type:String,default:()=>[]},endpoint:{type:String,default:()=>[]},permission:{type:String,default:null}},emits:["onCreate"],setup(d,{emit:c}){const t=d,s=W(),i=D(()=>t.columns.filter(l=>l.canCreate).length>0),h=D(()=>{const l=t.columns.filter(y=>y.section),n=t.columns.filter(y=>!y.section),a=l.map(y=>y.section),r=[...new Set(a)],_=[];return r.forEach(y=>{const M=l.filter(O=>O.section==y);_.push({section:y,fields:M})}),{sections:r,fields:n,sectionsWithFields:_}});let v=b(t.columns.filter(l=>l.canCreate));const f=async l=>{if(v.value.length>0)for(const[n,a]of Object.entries(l))for(const[r,_]of Object.entries(v.value))a.key==_.key&&(v.value[r]=a);else v.value=l},o=async()=>{E.post(t.endpoint,{model:t.model,data:v.value,permission:t.permission}).then(function(l){s.success(l.data.message),c("onCreate")}).catch(function(l){for(const[n,a]of Object.entries(l.response.data.errors))s.error(a[0])})};return(l,n)=>(u(),m(x,null,[Vt,Ct,e("div",Dt,[i.value?(u(),m("div",Ot,[Mt,e("div",jt,[e("div",Bt,[(u(!0),m(x,null,$(h.value.sectionsWithFields,(a,r)=>(u(),re(p(ue),{as:"div",class:"mt-2",key:r},{default:P(({open:_})=>[g(p(pe),{class:"btn btn-primary w-full"},{default:P(()=>[e("span",null,k(a.section),1),_?(u(),m("svg",Ut,It)):(u(),m("svg",Pt,Et))]),_:2},1024),g(p(me),{class:"px-4 pt-4 pb-2 text-sm text-gray-500"},{default:P(()=>[g(H,{columns:a.fields,onOnFormUpdate:f},null,8,["columns"])]),_:2},1024)]),_:2},1024))),128))])]),e("div",At,[g(H,{columns:h.value.fields,onOnFormUpdate:f},null,8,["columns"])]),e("div",{class:"modal-action"},[Kt,e("label",{for:"my-modal-5",class:"btn btn-success",onClick:o},"Create")])])):(u(),m("div",Lt,Wt))])],64))}},Rt=["for"],qt=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),zt=[qt],Jt=["id"],Xt={class:"modal text-center"},Yt={key:0,class:"modal-box w-11/12 max-w-5xl"},Gt=e("h3",{class:"font-bold text-lg"},"Edit",-1),Qt={class:"w-full"},Zt={class:"w-full bg-base-300 p-2"},el={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},tl=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"},null,-1),ll=[tl],ol={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},sl=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 5.25l-7.5 7.5-7.5-7.5m15 6l-7.5 7.5-7.5-7.5"},null,-1),nl=[sl],al={class:"w-full bg-base-300 p-6"},rl={class:"modal-action"},il=["for"],dl=["for"],cl={key:1,class:"modal-box w-11/12 max-w-5xl"},ul=G('<div class="card w-full bg-base-100 shadow-xl"><figure class="px-10 pt-10"><svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 rounded-xl" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg></figure><div class="card-body items-center text-center"><h2 class="card-title">The edit method has been disable</h2><p>Try to contact the administrator </p></div></div>',1),pl=[ul],ml={__name:"edit",props:{columns:{type:Array,default:()=>[]},model:{type:String,default:()=>[]},endpoint:{type:String,default:()=>[]},id:{type:String,default:"0"},modelValue:{type:Array,default:()=>[]},permission:{type:String,default:null}},emits:["onEdit"],setup(d,{emit:c}){const t=d,s=W(),i=D(()=>t.columns.filter(l=>l.canEdit).length>0),h=D(()=>{const l=t.columns.filter(y=>y.section),n=t.columns.filter(y=>!y.section),a=l.map(y=>y.section),r=[...new Set(a)],_=[];return r.forEach(y=>{const M=l.filter(O=>O.section==y);_.push({section:y,fields:M})}),{sections:r,fields:n,sectionsWithFields:_}});let v=b(t.columns.filter(l=>l.canEdit));const f=async l=>{if(v.value.length>0)for(const[n,a]of Object.entries(l))for(const[r,_]of Object.entries(v.value))a.key==_.key&&(v.value[r]=a);else v.value=l},o=async()=>{E.post(t.endpoint,{model:t.model,id:t.id,data:v.value,permission:t.permission}).then(function(l){s.success(l.data.message),c("onEdit")}).catch(function(l){for(const[n,a]of Object.entries(l.response.data.errors))s.error(a[0])})};return(l,n)=>(u(),m(x,null,[e("label",{for:"edit-data-"+t.id,class:"btn btn-info modal-button"},zt,8,Rt),e("input",{type:"checkbox",id:"edit-data-"+t.id,class:"modal-toggle"},null,8,Jt),e("div",Xt,[i.value?(u(),m("div",Yt,[Gt,e("div",Qt,[e("div",Zt,[(u(!0),m(x,null,$(h.value.sectionsWithFields,(a,r)=>(u(),re(p(ue),{as:"div",class:"mt-2",key:r,defaultOpen:!0},{default:P(({open:_})=>[g(p(pe),{class:"btn btn-primary w-full"},{default:P(()=>[e("span",null,k(a.section),1),_?(u(),m("svg",el,ll)):(u(),m("svg",ol,nl))]),_:2},1024),g(p(me),{class:"px-4 pt-4 pb-2 text-sm text-gray-500"},{default:P(()=>[g(H,{columns:a.fields,onOnFormUpdate:f,editMode:"true",modelValue:t.modelValue},null,8,["columns","modelValue"])]),_:2},1024)]),_:2},1024))),128))])]),e("div",al,[g(H,{columns:h.value.fields,onOnFormUpdate:f,editMode:"true",modelValue:t.modelValue},null,8,["columns","modelValue"])]),e("div",rl,[e("label",{for:"edit-data-"+t.id,class:"btn btn-error"},"Close",8,il),e("label",{for:"edit-data-"+t.id,class:"btn btn-success",onClick:o},"Edit",8,dl)])])):(u(),m("div",cl,pl))])],64))}},vl={class:"my-2 flex sm:flex-row flex-col p-6"},hl={class:"flex flex-row mb-1 sm:mb-0"},fl={class:"relative pl-4"},_l=G('<option disabled selected>Per page</option><option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',5),bl=[_l],yl={class:"relative pl-4"},gl=e("option",{disabled:"",selected:""},"Row",-1),wl=["value"],kl={class:"relative pl-4"},xl=e("option",{disabled:"",selected:""},"Order by",-1),$l=e("option",{value:"asc"},"Asc",-1),Sl=e("option",{value:"desc"},"Desc",-1),Vl=[xl,$l,Sl],Cl={class:"block relative pl-4"},Dl={class:"form-control"},Ol={class:"input-group"},Ml=e("button",{class:"btn btn-square btn-primary"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1),jl={__name:"filter",props:{columns:{type:Array,default:()=>[]}},emits:["onPerPage","onOrderBy","onSearch","onFilter","onFilterReset"],setup(d,{emit:c}){const t=d;let s=b(10),i=b("id"),h=b("asc"),v=b(""),f=b([]);(async()=>{for(const[a,r]of Object.entries(t.columns))r.sortable&&(a==0&&(i.value=r.key),f.value.push({label:r.label,value:r.key}))})(),I(()=>s.value,a=>{c("onPerPage",a)}),I(()=>h.value,a=>{c("onOrderBy",a)}),I(()=>i.value,a=>{c("onFilter",a)});let l=b(null);I(()=>v.value,a=>{clearTimeout(l.value),l.value=setTimeout(function(){c("onSearch",a)},500)});const n=async()=>{s.value=10,i.value="id",h.value="asc",v.value=null,c("onFilterReset",[{perPage:s.value,filterBy:i.value,orderBy:h.value,search:v.value}])};return(a,r)=>(u(),m("div",vl,[e("div",hl,[e("div",fl,[U(e("select",{class:"select select-primary w-full max-w-xs","onUpdate:modelValue":r[0]||(r[0]=_=>F(s)?s.value=_:s=_)},bl,512),[[R,p(s)]])]),e("div",yl,[U(e("select",{class:"select select-primary w-full max-w-xs","onUpdate:modelValue":r[1]||(r[1]=_=>F(i)?i.value=_:i=_),onChange:r[2]||(r[2]=(..._)=>a.filterChange&&a.filterChange(..._))},[gl,(u(!0),m(x,null,$(p(f),(_,y)=>(u(),m("option",{key:y,value:_.value},k(_.label),9,wl))),128))],544),[[R,p(i)]])]),e("div",kl,[U(e("select",{class:"select select-primary w-full max-w-xs","onUpdate:modelValue":r[3]||(r[3]=_=>F(h)?h.value=_:h=_)},Vl,512),[[R,p(h)]])])]),e("div",Cl,[e("div",Dl,[e("div",Ol,[U(e("input",{type:"text",placeholder:"Search…",class:"input input-bordered","onUpdate:modelValue":r[4]||(r[4]=_=>F(v)?v.value=_:v=_)},null,512),[[q,p(v)]]),Ml])])]),e("div",{class:"block relative pl-4"},[e("button",{class:"btn btn-outline btn-accent",onClick:n}," Reset ")])]))}},Bl={class:"px-5 py-5 bg-base-200 border-t flex flex-col xs:flex-row items-center xs:justify-between"},Ul={class:"text-xs xs:text-sm text-primary"},Fl={class:"inline-flex mt-2 xs:mt-0"},Il={class:"btn-group"},Pl=["onClick"],Tl=["innerHTML"],El={__name:"pagination",props:{paginationInfo:{type:Array,default:()=>[]}},emits:["onPagiation"],setup(d,{emit:c}){const t=d,s=async i=>{c("onPagiation",i)};return(i,h)=>(u(),m("div",Bl,[e("span",Ul," Showing "+k(t.paginationInfo.currentPage)+" to "+k(t.paginationInfo.perPage)+" of "+k(t.paginationInfo.total)+" Entries ",1),e("div",Fl,[e("div",Il,[(u(!0),m(x,null,$(t.paginationInfo.links,(v,f)=>(u(),m("button",{class:ve(["btn btn-md",v.active?"btn-active":""]),key:f,onClick:o=>s(v.url)},[e("span",{innerHTML:v.label},null,8,Tl)],10,Pl))),128))])])]))}},Al={key:0},Kl={class:"carousel rounded-box w-96"},Ll={class:"carousel-item w-1/2"},Hl=["src"],Wl={key:1},Nl={__name:"tableDataDisplay",props:{tableData:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]}},setup(d){const c=d,t=D(()=>{let s=[];for(const[i,h]of Object.entries(c.columns))s.push({label:h.label,type:h.type,value:c.tableData[h.key]});return s});return(s,i)=>(u(!0),m(x,null,$(t.value,(h,v)=>(u(),m("th",{key:v},[h.type==="media"?(u(),m("div",Al,[e("div",Kl,[(u(!0),m(x,null,$(h.value,(f,o)=>(u(),m("div",Ll,[e("img",{src:f.url.default,class:"w-full"},null,8,Hl)]))),256))])])):(u(),m("div",Wl,k(h.value),1))]))),128))}},Rl={class:"w-full mb-12 xl:mb-0"},ql={class:"relative flex flex-col min-w-0 break-words bg-base-200 w-full mb-6 shadow-lg rounded"},zl={class:"rounded-t mb-0 px-4 py-3 border-0"},Jl={class:"flex flex-wrap items-center"},Xl={class:"relative w-full px-4 max-w-full flex-grow flex-1"},Yl={class:"text-3xl font-bold text-base-content"},Gl={class:"relative w-full px-4 max-w-full flex-grow flex-1 text-right"},Ql={class:"overflow-x-auto p-6"},Zl={class:"overflow-x-auto"},eo={class:"table table-compact w-full"},to=e("th",null,"Action",-1),lo={class:"preview border-base-300 bg-base-200 rounded-b-box rounded-tr-box flex min-h-[6rem] min-w-[18rem] max-w-4xl flex-wrap items-center justify-center overflow-x-hidden border bg-cover bg-top p-4 undefined gap-4"},oo=e("th",null,"Action",-1),io={__name:"Table",props:{tableTitle:{type:String,default:"Table name"},columns:{type:Array,default:()=>[]},model:{type:String,default:""},endpoint:{type:String,default:""},endpointDelete:{type:String,default:""},endpointCreate:{type:String,default:""},endpointEdit:{type:String,default:""},permission:{type:String,default:null}},setup(d){const c=d,t=W(),s=async w=>{S(w)};let i=b(10);const h=async w=>{i.value=w,S()};let v=b("id");const f=async w=>{v.value=w,S()};let o=b(null);const l=async w=>{o.value=w,S()};let n=b(null);const a=async w=>{w&&w.length>3&&(n.value=w,S())},r=async()=>{S()},_=async()=>{S()},y=async()=>{S()},M=async w=>{i.value=w.perPage,v.value=w.filterBy,o.value=w.orderBy,n.value=w.search,S()};let O=b([]),ee=b([]);const S=async(w=null)=>{w===null&&(w=c.endpoint),E.post(w,{model:c.model,columns:c.columns,perPage:i.value,search:n.value,sort:v.value,direction:o.value,permission:c.permission}).then(function(C){O.value=C.data.data,ee.value={currentPage:C.data.current_page,lastPage:C.data.last_page,perPage:C.data.per_page,total:C.data.total,links:C.data.links}}).catch(function(C){for(const[V,j]of Object.entries(C.response.data.errors))t.error(j[0])})};return S(),(w,C)=>(u(),m("div",Rl,[e("div",ql,[e("div",zl,[e("div",Jl,[e("div",Xl,[e("h1",Yl,k(c.tableTitle),1)]),e("div",Gl,[he(w.$slots,"new",{},()=>[g(Nt,{columns:c.columns,endpoint:c.endpointCreate,model:c.model,permission:c.permission,onOnCreate:_},null,8,["columns","endpoint","model","permission"])])])])]),g(jl,{onOnPerPage:h,onOnOrderBy:l,onOnSearch:a,onOnFilter:f,onOnFilterReset:M,columns:c.columns},null,8,["columns"]),e("div",Ql,[e("div",Zl,[e("table",eo,[e("thead",null,[e("tr",null,[(u(!0),m(x,null,$(d.columns,(V,j)=>(u(),m("th",{key:j},k(V.label),1))),128)),to])]),e("tbody",null,[(u(!0),m(x,null,$(p(O),(V,j)=>(u(),m("tr",{key:V},[g(Nl,{tableData:V,columns:d.columns},null,8,["tableData","columns"]),e("th",null,[e("div",lo,[g(pt,{id:V.id,endpoint:c.endpointDelete,model:c.model,permission:c.permission,onOnDelete:r},null,8,["id","endpoint","model","permission"]),g(ml,{columns:c.columns,endpoint:c.endpointEdit,model:c.model,modelValue:V,id:V.id,permission:c.permission,onOnEdit:y},null,8,["columns","endpoint","model","modelValue","id","permission"])])])]))),128))]),e("tfoot",null,[e("tr",null,[(u(!0),m(x,null,$(d.columns,(V,j)=>(u(),m("th",{key:j},k(V.label),1))),128)),oo])])])]),g(El,{onOnPagiation:s,paginationInfo:p(ee)},null,8,["paginationInfo"])])])]))}};export{io as _};
