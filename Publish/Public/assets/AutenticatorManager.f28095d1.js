import{a as h,l as w,g as l,d as t,p as f,t as r,e as x,f as i,u,F as k,y as C,o as c,J as g}from"./preset.8feab997.js";import{_ as p}from"./Input.fb0a027a.js";import{_ as I}from"./Submit.dbf024dd.js";const V={class:"px-5 py-7"},T={key:0,class:"card shadow-lg compact side bg-base-100"},A={class:"flex-row items-center space-x-4 card-body"},F={class:"rounded-full w-60 h-60 shadow"},B=["innerHTML"],M={class:"w-full"},$=t("h2",{class:"card-title"}," Scan the qr code and enter the code to activate your two factor authentication. ",-1),j={class:"text-base-content text-opacity-40"},N=["onSubmit"],S={class:"form-control pt-10"},q={key:1},L={class:"card-body"},O={class:"my-4 text-4xl font-bold card-title"},R={class:"flex items-center justify-end gap-3"},U=t("label",{for:"my-modal-2",class:"btn btn-primary modal-button"},"Remove Autenticator",-1),D=t("input",{type:"checkbox",id:"my-modal-2",class:"modal-toggle"},null,-1),H={class:"modal"},J={class:"modal-box"},z=t("label",{for:"my-modal-2",class:"btn"},"Close",-1),E={class:"overflow-x-auto"},P={class:"table table-zebra w-full"},G=t("thead",null,[t("tr",null,[t("th",null,"Code"),t("th",null,"Used")])],-1),X={__name:"AutenticatorManager",props:{userInfo:{type:Object,default:()=>({})},autenticatorInfo:{type:Object,default:()=>({})}},setup(m){const n=m;let b=h([]);w(()=>{b.value=n.userInfo});let a=h("");const _=()=>{const e={code:a.value};g.post(route("user.2fa.enable"),e)},y=()=>{const e={code:a.value};Inertia.patch(route("user.remove-autenticator"),e)},v=()=>{let e=window.open("","PRINT","height=650,width=900,top=100,left=150");const s="codes";e.document.write(`<html><head><title>${s}</title>`),e.document.write("</head><body>"),e.document.write("<h1> Two Factor Autenticator Backup Codes </h1>"),e.document.write("<table>"),e.document.write("<tr><th>Code</th><th>used</th></tr>");for(const[o,d]of Object.entries(n.autenticatorInfo.backup_codes))e.document.write("<tr>"),e.document.write(`<td>${d.code}</td>`),e.document.write(`<td>${d.used}</td>`),e.document.write("</tr>");return e.document.write("</table>"),e.document.write("</body></html>"),e.document.close(),e.focus(),e.print(),e.close(),!0};return(e,s)=>(c(),l("div",null,[t("div",V,[n.autenticatorInfo.is_enable==!1?(c(),l("div",T,[t("div",A,[t("div",null,[t("div",F,[t("div",{innerHTML:n.autenticatorInfo.codeinfo.qr_code},null,8,B)])]),t("div",M,[$,t("p",j,[f(" Case you can,t use the qr code, you can enter the code manually. "),t("strong",null,r(n.autenticatorInfo.codeinfo.secret),1)]),t("div",null,[t("form",{onSubmit:x(_,["prevent"])},[i(u(p),{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=o=>a.value=o),label:"Code",type:"text",placeholder:"type your code",max:"6"},null,8,["modelValue"]),t("div",S,[i(u(I),{name:"activate",onClick:_})])],40,N)])])])])):(c(),l("div",q,[t("div",L,[t("h2",O,[f(" Two Factor Autenticator Backup Codes "),t("div",R,[t("button",{class:"btn btn-primary",onClick:v}," Download Csv "),U,D,t("div",H,[t("div",J,[i(u(p),{modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=o=>a.value=o),label:"Two Factor Autenticator Code",type:"text",placeholder:"type your code"},null,8,["modelValue"]),t("div",{class:"modal-action"},[t("label",{for:"my-modal-2",class:"btn btn-primary",onClick:y},"Remove"),z])])])])]),t("div",E,[t("table",P,[G,t("tbody",null,[(c(!0),l(k,null,C(m.autenticatorInfo.backup_codes,(o,d)=>(c(),l("tr",{key:d},[t("th",null,r(o.code),1),t("th",null,r(o.used),1)]))),128))])])])])]))])]))}};export{X as default};
