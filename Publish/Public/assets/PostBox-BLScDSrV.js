import{v as le,aa as ae,a as y,m as re,o as n,g as p,d as t,e as r,u as i,q as d,t as j,D as _,E as V,s as E,x as Q,f as L,H as ie,F as A,y as I,k as D,ab as U,b as F,I as H,w as G,ac as W,G as X,l as ne,i as ue,bJ as de}from"./preset-CQWAs5E6.js";import{a as z}from"./axios-BdxYjMEz.js";import{M as ce,S as pe}from"./Markdown-CNw4SKUu.js";import{T as fe}from"./triangle-alert-C3c_Md7z.js";import{P as me,d as be,e as xe,B as J,f as T,g as ve,L as ge}from"./App.vue_vue_type_script_setup_true_lang-CxiywCuu.js";import{X as q}from"./x-CWPZW0VO.js";import{F as ye}from"./folder-open-Dd3JiVNW.js";import{M as he}from"./SearchSidebar-CZd-7Eih.js";import{E as we}from"./eye-DQjgUhTM.js";import{F as R,H as ke}from"./hash-DyrwQXuk.js";import{C as Ce}from"./chevron-down-B4O--sp2.js";import{I as _e,C as Te}from"./trash-jANRBcXL.js";import{T as Ee}from"./trash-2-B-VaxneU.js";import{D as Se,B as Pe,I as je,a as Be,Q as Le}from"./underline-Df3BDPUJ.js";import{C as M}from"./code-Cxg_JzwN.js";import"./purify.es-CocPUCx9.js";/* empty css                                                                       */const Me={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[70]"},De={class:"bg-dark-blue-100 p-6 rounded-xl border border-gray-700 w-full max-w-md"},Fe={class:"text-lg font-semibold text-white mb-4 flex items-center gap-2"},$e={class:"text-gray-300 text-sm mb-4"},Oe={class:"text-white font-medium"},Ne={class:"flex justify-end gap-3"},Ve=["disabled"],Ae={class:"w-full max-w-3xl bg-dark-blue-100 rounded-xl shadow-xl border border-gray-700/50"},Ie={class:"flex items-center justify-between p-4 border-b border-gray-700/50"},Re={class:"flex items-center gap-2"},Ue={class:"text-lg font-semibold text-white"},He={class:"p-4 space-y-4"},ze={class:"space-y-2"},Je={for:"commentTitle",class:"flex items-center gap-2 text-sm font-medium text-gray-300"},qe={key:0,class:"space-y-2"},Qe={for:"channel",class:"flex items-center gap-2 text-sm font-medium text-gray-300"},Ge=["value"],We={class:"space-y-2"},Xe={class:"flex items-center gap-2 text-sm font-medium text-gray-300"},Ye={class:"flex border-b border-gray-700/50"},Ke={class:"flex items-center gap-2"},Ze={class:"flex items-center gap-2"},et={class:"space-y-2"},tt={class:"flex flex-wrap gap-1 p-2 bg-dark-blue-200 rounded-t-lg border border-gray-700"},st=["onClick","title"],ot={class:"relative"},lt={key:0,class:"absolute left-0 top-full mt-1 w-48 py-1 bg-dark-blue-100 rounded-lg border border-gray-700 shadow-xl z-[60]"},at=["onClick"],rt={class:"min-h-[16rem] p-4 bg-dark-blue-200 rounded-lg border border-gray-700"},it={key:0},nt={key:1,class:"text-gray-500 italic"},ut={class:"flex items-center gap-2 text-xs text-gray-500"},dt={class:"flex flex-col sm:flex-row justify-between items-center gap-4 p-4 border-t border-gray-700/50 bg-dark-blue-200/50"},ct={class:"flex items-center text-gray-400 text-sm"},pt={class:"flex gap-2 w-full sm:w-auto"},ft={type:"submit",class:"flex items-center justify-center gap-2 px-6 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 text-sm font-medium transition-colors flex-1 sm:flex-initial"},mt=le({__name:"Post",props:{commentClass:{type:String,default:"w-full rounded-lg"},categories:{type:Array,default:()=>[]},topitEdit:{type:Object,default:()=>({})}},emits:["fresh-comments","close"],setup(B,{emit:$}){const h={mounted:(o,e)=>{o._clickOutside=a=>{o===a.target||o.contains(a.target)||e.value()},document.body.addEventListener("click",o._clickOutside)},unmounted:o=>{document.body.removeEventListener("click",o._clickOutside)}},x=ae(),v=y(!1),S=y(null),w=y(!1),k=y(""),m=y(!1),l=y(""),g=y(""),P=y(""),Y=[{label:"JavaScript",value:"javascript",icon:J},{label:"PHP",value:"php",icon:R},{label:"Python",value:"python",icon:T},{label:"C++",value:"cpp",icon:T},{label:"Java",value:"java",icon:T},{label:"Ruby",value:"ruby",icon:T},{label:"SQL",value:"sql",icon:Se},{label:"HTML",value:"html",icon:M},{label:"CSS",value:"css",icon:M},{label:"TypeScript",value:"typescript",icon:J},{label:"Go",value:"go",icon:T},{label:"Rust",value:"rust",icon:T},{label:"Shell",value:"bash",icon:T},{label:"JSON",value:"json",icon:ve},{label:"XML",value:"xml",icon:M},{label:"YAML",value:"yaml",icon:R}],K=[{label:"Bold",icon:Pe,prefix:"**",suffix:"**"},{label:"Italic",icon:je,prefix:"*",suffix:"*"},{label:"Code",icon:M,prefix:"`",suffix:"`"},{label:"Heading",icon:ke,prefix:"# ",suffix:""},{label:"List",icon:Be,prefix:"- ",suffix:""},{label:"Quote",icon:Le,prefix:"> ",suffix:""},{label:"Link",icon:ge,prefix:"[",suffix:"](url)"}],b=B,O=$,Z=o=>{const e=S.value;if(!e)return;const a=e.selectionStart,u=e.selectionEnd,f=l.value.substring(a,u),c=["```"+o,f||"Your code here","```",""].join(`
`),s=l.value.substring(0,a),C=l.value.substring(u);l.value=s+c+C,setTimeout(()=>{m.value=!1,e.focus()},100)},ee=o=>{const e=S.value;if(!e)return;const a=e.selectionStart,u=e.selectionEnd,f=l.value.substring(a,u);let c;if(f){const s=l.value.substring(0,a),C=l.value.substring(u);c=s+o.prefix+f+o.suffix+C}else{const s=l.value.substring(0,a),C=l.value.substring(a);c=s+o.prefix+"text"+o.suffix+C}l.value=c,e.focus()},te=async()=>{var e,a,u,f;const o={title:g.value,content:l.value,category:P.value};if(!g.value||!l.value||!((e=b.topitEdit)!=null&&e.id)&&!P.value){x.error("Please fill in all required fields");return}try{let c=route("forum.thread.create");(a=b.topitEdit)!=null&&a.id&&(c=route("forum.thread.edit",b.topitEdit.id));const s=await z.post(c,o);x.success(s.data.message),oe(),O("fresh-comments"),O("close")}catch(c){(f=(u=c.response)==null?void 0:u.data)!=null&&f.errors&&Object.values(c.response.data.errors).forEach(s=>{x.error(s[0])})}},se=async()=>{var o,e,a;if(k.value===g.value)try{const u=await z.delete(route("forum.thread.edit",(o=b.topitEdit)==null?void 0:o.id));x.success(u.data.message),w.value=!1,X.visit(route("home"),{preserveScroll:"errors"})}catch(u){(a=(e=u.response)==null?void 0:e.data)!=null&&a.errors&&Object.values(u.response.data.errors).forEach(f=>{x.error(f[0])})}},oe=()=>{l.value="",g.value="",P.value="",v.value=!1,w.value=!1,k.value=""},N=()=>{O("close")};return re(()=>{var o;(o=b.topitEdit)!=null&&o.id&&(l.value=b.topitEdit.content,g.value=b.topitEdit.title)}),(o,e)=>{var a,u,f,c;return n(),p("div",{class:"fixed inset-0 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm z-50",onClick:L(N,["self"])},[w.value?(n(),p("div",Me,[t("div",De,[t("h3",Fe,[r(i(fe),{class:"w-5 h-5 text-red-400"}),e[9]||(e[9]=d(" Confirm Deletion "))]),t("p",$e,[e[10]||(e[10]=d(" This action cannot be undone. Please type ")),t("span",Oe,j(g.value),1),e[11]||(e[11]=d(" to confirm. "))]),_(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>k.value=s),type:"text",placeholder:"Type post title to confirm",class:"w-full px-3 py-2 bg-dark-blue-200 border border-gray-700 rounded-lg text-white placeholder-gray-500 mb-4"},null,512),[[V,k.value]]),t("div",Ne,[t("button",{type:"button",onClick:e[1]||(e[1]=s=>w.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-400 hover:text-white"}," Cancel "),t("button",{type:"button",onClick:se,disabled:k.value!==g.value,class:"px-4 py-2 bg-red-500 text-white rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," Delete Post ",8,Ve)])])])):E("",!0),t("div",Ae,[i(Q)().props.isUserAuth?(n(),p("form",{key:0,onSubmit:L(te,["prevent"])},[t("div",Ie,[t("div",Re,[r(i(me),{class:"w-5 h-5 text-purple-400"}),t("h2",Ue,j((a=b.topitEdit)!=null&&a.id?"Edit Discussion":"New Discussion"),1)]),t("button",{type:"button",onClick:N,class:"p-1 text-gray-400 hover:text-white transition-colors"},[r(i(q),{class:"w-5 h-5"})])]),t("div",He,[t("div",ze,[t("label",Je,[r(i(be),{class:"w-4 h-4"}),e[12]||(e[12]=d(" Title ")),e[13]||(e[13]=t("span",{class:"text-red-400"},"*",-1))]),_(t("input",{id:"commentTitle","onUpdate:modelValue":e[2]||(e[2]=s=>g.value=s),type:"text",placeholder:"What's your topic about?",class:"w-full px-3 py-2 bg-dark-blue-200 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all"},null,512),[[V,g.value]])]),(u=b.topitEdit)!=null&&u.id?E("",!0):(n(),p("div",qe,[t("label",Qe,[r(i(ye),{class:"w-4 h-4"}),e[14]||(e[14]=d(" Select Topic ")),e[15]||(e[15]=t("span",{class:"text-red-400"},"*",-1))]),_(t("select",{id:"channel","onUpdate:modelValue":e[3]||(e[3]=s=>P.value=s),class:"w-full px-3 py-2 bg-dark-blue-200 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all appearance-none"},[e[16]||(e[16]=t("option",{value:"",class:"bg-dark-blue-200"},"Choose a category",-1)),(n(!0),p(A,null,I(B.categories,s=>(n(),p("option",{key:s.id,value:s.slug,class:"bg-dark-blue-200"},j(s.name),9,Ge))),128))],512),[[ie,P.value]])])),t("div",We,[t("label",Xe,[r(i(he),{class:"w-4 h-4"}),e[17]||(e[17]=d(" Content ")),e[18]||(e[18]=t("span",{class:"text-red-400"},"*",-1))]),t("div",Ye,[t("button",{type:"button",class:D(["px-4 py-2 text-sm font-medium transition-colors border-b-2",[v.value?"text-gray-400 border-transparent hover:text-gray-300":"text-purple-400 border-purple-400"]]),onClick:e[4]||(e[4]=s=>v.value=!1)},[t("div",Ke,[r(i(xe),{class:"w-4 h-4"}),e[19]||(e[19]=d(" Write "))])],2),t("button",{type:"button",class:D(["px-4 py-2 text-sm font-medium transition-colors border-b-2",[v.value?"text-purple-400 border-purple-400":"text-gray-400 border-transparent hover:text-gray-300"]]),onClick:e[5]||(e[5]=s=>v.value=!0)},[t("div",Ze,[r(i(we),{class:"w-4 h-4"}),e[20]||(e[20]=d(" Preview "))])],2)]),_(t("div",et,[t("div",tt,[(n(),p(A,null,I(K,s=>t("button",{key:s.label,type:"button",onClick:C=>ee(s),class:"p-1.5 text-gray-400 hover:text-white rounded transition-colors",title:s.label},[(n(),F(H(s.icon),{class:"w-4 h-4"}))],8,st)),64)),t("div",ot,[t("button",{type:"button",onClick:e[6]||(e[6]=L(s=>m.value=!m.value,["stop"])),class:D(["p-1.5 text-gray-400 hover:text-white rounded transition-colors flex items-center gap-1",{"text-purple-400":m.value}]),title:"Insert Code Block"},[r(i(R),{class:"w-4 h-4"}),r(i(Ce),{class:"w-3 h-3"})],2),r(W,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:G(()=>[m.value?_((n(),p("div",lt,[(n(),p(A,null,I(Y,s=>t("button",{key:s.value,type:"button",onClick:L(C=>Z(s.value),["stop"]),class:"w-full px-4 py-2 text-sm text-left text-gray-300 hover:bg-dark-blue-200 hover:text-white flex items-center gap-2"},[(n(),F(H(s.icon),{class:"w-4 h-4"})),d(" "+j(s.label),1)],8,at)),64))])),[[h,()=>m.value=!1]]):E("",!0)]),_:1})])]),_(t("textarea",{id:"comment",ref_key:"textareaRef",ref:S,"onUpdate:modelValue":e[7]||(e[7]=s=>l.value=s),placeholder:"Share your thoughts with the community...",class:"w-full h-64 px-4 py-3 bg-dark-blue-200 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all resize-none"},null,512),[[V,l.value]])],512),[[U,!v.value]]),_(t("div",rt,[l.value?(n(),p("div",it,[r(ce,{content:l.value},null,8,["content"])])):(n(),p("div",nt," Nothing to preview yet... "))],512),[[U,v.value]]),t("div",ut,[r(i(_e),{class:"w-4 h-4"}),e[21]||(e[21]=t("span",null,[d(" Markdown supported: "),t("span",{class:"text-gray-400"},"**bold**, *italic*, `code`, etc.")],-1))])])]),t("div",dt,[t("div",ct,[r(i(Te),{class:"w-4 h-4 mr-2"}),e[22]||(e[22]=d(" Please follow community guidelines "))]),t("div",pt,[t("button",{type:"button",onClick:N,class:"flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium text-gray-400 hover:text-white transition-colors flex-1 sm:flex-initial"},[r(i(q),{class:"w-4 h-4"}),e[23]||(e[23]=d(" Cancel "))]),(f=b.topitEdit)!=null&&f.id?(n(),p("button",{key:0,type:"button",onClick:e[8]||(e[8]=s=>w.value=!0),class:"flex items-center justify-center gap-2 px-4 py-2 bg-red-500/10 text-red-400 rounded-lg hover:bg-red-500/20 text-sm font-medium transition-colors flex-1 sm:flex-initial"},[r(i(Ee),{class:"w-4 h-4"}),e[24]||(e[24]=d(" Delete "))])):E("",!0),t("button",ft,[r(i(pe),{class:"w-4 h-4"}),d(" "+j((c=b.topitEdit)!=null&&c.id?"Update":"Post"),1)])])])],32)):E("",!0)])])}}}),bt={class:"mt-3 bg-dark-100 rounded-lg"},Dt={__name:"PostBox",props:{categories:{type:Array,default:()=>[]},postBtnClass:{type:String,default:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold py-2 px-4 rounded-lg mb-6"},topitEdit:{type:Object,default:()=>{}}},emits:["displayLogin"],setup(B,{emit:$}){let h=y(!1);const x=B,v=()=>{setTimeout(()=>{X.reload({only:["blogPost"]})},300)},S=$,w=()=>{if(!Q().props.isUserAuth){S("displayLogin",!0);return}h.value=!h.value};return(k,m)=>(n(),p("section",bt,[t("button",{class:D(x.postBtnClass),onClick:w},[ne(k.$slots,"default",{},()=>[m[1]||(m[1]=d("New Dicussion"))])],2),(n(),F(de,{to:"body"},[r(W,{name:"fade"},{default:G(()=>[i(h)?(n(),F(mt,{key:0,onFreshComments:v,onClose:m[0]||(m[0]=l=>ue(h)?h.value=!1:h=!1),categories:x.categories,topitEdit:x.topitEdit},null,8,["categories","topitEdit"])):E("",!0)]),_:1})]))]))}};export{Dt as _};
